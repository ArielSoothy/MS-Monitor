import{j as e}from"./index-CXwfwQ1z.js";import{r}from"./charts-DwVu4C-4.js";import{H as C}from"./HowItWorksModal-DA6aht44.js";import{C as I}from"./ChallengesModal-CXJL8IDH.js";import{A as n,C as H,h as S,S as M,Z as q,b as T,D as w,_ as b,a as U,$ as z,o as h,T as u}from"./icons-CRfBaCPX.js";import"./vendor-Csw2ODfV.js";import"./router-Uvrq3glh.js";const R="_performancePage_1e584_1",L="_header_1e584_9",k="_titleSection_1e584_18",E="_titleIcon_1e584_24",V="_infoButton_1e584_38",B="_challengesButton_1e584_59",P="_refreshIndicator_1e584_73",G="_loadingContainer_1e584_85",Q="_loadingIcon_1e584_95",A="_systemHealthGrid_1e584_105",O="_healthCard_1e584_112",F="_cardHeader_1e584_126",$="_cardIcon_1e584_133",D="_healthMetrics_1e584_144",W="_metric_1e584_150",Z="_metricLabel_1e584_160",J="_metricValue_1e584_165",K="_queryMetricsSection_1e584_172",X="_metricsGrid_1e584_183",Y="_metricCard_1e584_189",ee="_selected_1e584_204",se="_metricHeader_1e584_209",ae="_statusIndicator_1e584_216",te="_statusText_1e584_224",ie="_metricId_1e584_228",re="_metricQuery_1e584_234",ce="_metricStats_1e584_250",ne="_stat_1e584_216",le="_detailView_1e584_269",de="_detailGrid_1e584_286",oe="_detailCard_1e584_293",me="_detailMetrics_1e584_307",he="_detailMetric_1e584_307",ue="_suggestions_1e584_335",xe="_suggestion_1e584_335",je="_queryCode_1e584_360",s={performancePage:R,header:L,titleSection:k,titleIcon:E,infoButton:V,challengesButton:B,refreshIndicator:P,loadingContainer:G,loadingIcon:Q,systemHealthGrid:A,healthCard:O,cardHeader:F,cardIcon:$,healthMetrics:D,metric:W,metricLabel:Z,metricValue:J,queryMetricsSection:K,metricsGrid:X,metricCard:Y,selected:ee,metricHeader:se,statusIndicator:ae,statusText:te,metricId:ie,metricQuery:re,metricStats:ce,stat:ne,detailView:le,detailGrid:de,detailCard:oe,detailMetrics:me,detailMetric:he,suggestions:ue,suggestion:xe,queryCode:je},Ce=()=>{const[x,j]=r.useState([]),[i,g]=r.useState(null),[t,_]=r.useState(null),[p,l]=r.useState(!0),[y,d]=r.useState(!1),[N,o]=r.useState(!1);r.useEffect(()=>{m();const a=setInterval(m,3e4);return()=>clearInterval(a)},[]);const m=async()=>{try{l(!0);const a=[{queryId:"threat-overview-001",query:'SecurityEvents | summarize TotalEvents = count(), HighRiskEvents = countif(ThreatLevel == "Critical")',executionTime:1247,resourceUsage:{cpuTime:.8,memoryUsage:156.7,networkIO:23.4},recordsScanned:2847592,recordsReturned:1,scanEfficiency:99.97,cacheHitRate:87.3,status:"optimized",suggestions:["Consider adding time filters to reduce scan scope"]},{queryId:"geo-threats-002",query:'SecurityEvents | where ThreatLevel in ("High", "Critical") | summarize by Country, City',executionTime:3421,resourceUsage:{cpuTime:2.1,memoryUsage:445.2,networkIO:67.8},recordsScanned:5847293,recordsReturned:847,scanEfficiency:85.4,cacheHitRate:23.1,status:"warning",suggestions:["Add indexed column for ThreatLevel","Consider partitioning by Country","Use materialized view for frequent geo queries"]},{queryId:"correlation-003",query:"SecurityEvents | join ThreatIndicators on $left.SourceIP == $right.IP",executionTime:7834,resourceUsage:{cpuTime:5.7,memoryUsage:1205.3,networkIO:234.7},recordsScanned:12847592,recordsReturned:23456,scanEfficiency:62.8,cacheHitRate:12.7,status:"critical",suggestions:["Optimize join strategy using broadcast hint","Create lookup table for threat indicators","Implement incremental processing","Add time-based partitioning for both tables"]},{queryId:"pipeline-health-004",query:"PipelineMetrics | summarize AvgLatency = avg(Latency), TotalThreats = sum(Threats)",executionTime:892,resourceUsage:{cpuTime:.3,memoryUsage:78.4,networkIO:12.1},recordsScanned:456789,recordsReturned:12,scanEfficiency:95.2,cacheHitRate:94.6,status:"optimized",suggestions:["Query is well-optimized for current workload"]}],c={clusterHealth:{nodeCount:6,activeNodes:6,avgCpuUsage:34.7,avgMemoryUsage:67.2,avgDiskUsage:23.8},ingestionHealth:{throughput:847.3,latency:2.4,errorRate:.02,queueSize:156},queryHealth:{avgExecutionTime:2156,concurrentQueries:23,cacheHitRate:67.8,timeoutRate:.1}};j(a),g(c)}catch(a){console.error("Failed to load performance data:",a)}finally{l(!1)}},v=a=>{switch(a){case"optimized":return"#10b981";case"warning":return"#f59e0b";case"critical":return"#ef4444";default:return"#6b7280"}},f=a=>{switch(a){case"optimized":return e.jsx(h,{size:16});case"warning":return e.jsx(u,{size:16});case"critical":return e.jsx(u,{size:16});default:return e.jsx(n,{size:16})}};return p?e.jsxs("div",{className:s.loadingContainer,children:[e.jsx(n,{className:s.loadingIcon}),e.jsx("span",{children:"Loading performance metrics..."})]}):e.jsxs("div",{className:s.performancePage,children:[e.jsxs("div",{className:s.header,children:[e.jsxs("div",{className:s.titleSection,children:[e.jsx(H,{className:s.titleIcon}),e.jsxs("div",{children:[e.jsxs("h1",{children:["Performance & Optimization",e.jsx("button",{className:s.infoButton,onClick:()=>d(!0),title:"How does this system work?",children:e.jsx(S,{size:18})}),e.jsx("button",{className:`${s.infoButton} ${s.challengesButton}`,onClick:()=>o(!0),title:"Implementation Challenges",children:e.jsx(M,{size:18})})]}),e.jsx("p",{children:"Real-time query performance, system health, and optimization insights"})]})]}),e.jsxs("div",{className:s.refreshIndicator,children:[e.jsx(q,{size:16}),e.jsx("span",{children:"Auto-refresh: 30s"})]})]}),i&&e.jsxs("div",{className:s.systemHealthGrid,children:[e.jsxs("div",{className:s.healthCard,children:[e.jsxs("div",{className:s.cardHeader,children:[e.jsx(T,{className:s.cardIcon}),e.jsx("h3",{children:"Cluster Health"})]}),e.jsxs("div",{className:s.healthMetrics,children:[e.jsxs("div",{className:s.metric,children:[e.jsx("span",{className:s.metricLabel,children:"Active Nodes"}),e.jsxs("span",{className:s.metricValue,children:[i.clusterHealth.activeNodes,"/",i.clusterHealth.nodeCount]})]}),e.jsxs("div",{className:s.metric,children:[e.jsx("span",{className:s.metricLabel,children:"CPU Usage"}),e.jsxs("span",{className:s.metricValue,children:[i.clusterHealth.avgCpuUsage,"%"]})]}),e.jsxs("div",{className:s.metric,children:[e.jsx("span",{className:s.metricLabel,children:"Memory Usage"}),e.jsxs("span",{className:s.metricValue,children:[i.clusterHealth.avgMemoryUsage,"%"]})]})]})]}),e.jsxs("div",{className:s.healthCard,children:[e.jsxs("div",{className:s.cardHeader,children:[e.jsx(w,{className:s.cardIcon}),e.jsx("h3",{children:"Ingestion Health"})]}),e.jsxs("div",{className:s.healthMetrics,children:[e.jsxs("div",{className:s.metric,children:[e.jsx("span",{className:s.metricLabel,children:"Throughput"}),e.jsxs("span",{className:s.metricValue,children:[i.ingestionHealth.throughput," MB/s"]})]}),e.jsxs("div",{className:s.metric,children:[e.jsx("span",{className:s.metricLabel,children:"Latency"}),e.jsxs("span",{className:s.metricValue,children:[i.ingestionHealth.latency,"s"]})]}),e.jsxs("div",{className:s.metric,children:[e.jsx("span",{className:s.metricLabel,children:"Error Rate"}),e.jsxs("span",{className:s.metricValue,children:[i.ingestionHealth.errorRate,"%"]})]})]})]}),e.jsxs("div",{className:s.healthCard,children:[e.jsxs("div",{className:s.cardHeader,children:[e.jsx(n,{className:s.cardIcon}),e.jsx("h3",{children:"Query Performance"})]}),e.jsxs("div",{className:s.healthMetrics,children:[e.jsxs("div",{className:s.metric,children:[e.jsx("span",{className:s.metricLabel,children:"Avg Execution"}),e.jsxs("span",{className:s.metricValue,children:[i.queryHealth.avgExecutionTime,"ms"]})]}),e.jsxs("div",{className:s.metric,children:[e.jsx("span",{className:s.metricLabel,children:"Cache Hit Rate"}),e.jsxs("span",{className:s.metricValue,children:[i.queryHealth.cacheHitRate,"%"]})]}),e.jsxs("div",{className:s.metric,children:[e.jsx("span",{className:s.metricLabel,children:"Concurrent"}),e.jsx("span",{className:s.metricValue,children:i.queryHealth.concurrentQueries})]})]})]})]}),e.jsxs("div",{className:s.queryMetricsSection,children:[e.jsx("h2",{children:"Query Performance Analysis"}),e.jsx("div",{className:s.metricsGrid,children:x.map(a=>e.jsxs("div",{className:`${s.metricCard} ${(t==null?void 0:t.queryId)===a.queryId?s.selected:""}`,onClick:()=>_(a),children:[e.jsxs("div",{className:s.metricHeader,children:[e.jsxs("div",{className:s.statusIndicator,style:{color:v(a.status)},children:[f(a.status),e.jsx("span",{className:s.statusText,children:a.status})]}),e.jsx("span",{className:s.metricId,children:a.queryId})]}),e.jsx("div",{className:s.metricQuery,children:e.jsxs("code",{children:[a.query.substring(0,100),"..."]})}),e.jsxs("div",{className:s.metricStats,children:[e.jsxs("div",{className:s.stat,children:[e.jsx(b,{size:14}),e.jsxs("span",{children:[a.executionTime,"ms"]})]}),e.jsxs("div",{className:s.stat,children:[e.jsx(U,{size:14}),e.jsxs("span",{children:[a.scanEfficiency.toFixed(1),"% efficient"]})]}),e.jsxs("div",{className:s.stat,children:[e.jsx(z,{size:14}),e.jsxs("span",{children:[a.resourceUsage.memoryUsage.toFixed(1)," MB"]})]})]})]},a.queryId))})]}),t&&e.jsxs("div",{className:s.detailView,children:[e.jsxs("h3",{children:["Query Analysis: ",t.queryId]}),e.jsxs("div",{className:s.detailGrid,children:[e.jsxs("div",{className:s.detailCard,children:[e.jsx("h4",{children:"Execution Metrics"}),e.jsxs("div",{className:s.detailMetrics,children:[e.jsxs("div",{className:s.detailMetric,children:[e.jsx("span",{children:"Execution Time"}),e.jsxs("span",{children:[t.executionTime,"ms"]})]}),e.jsxs("div",{className:s.detailMetric,children:[e.jsx("span",{children:"Records Scanned"}),e.jsx("span",{children:t.recordsScanned.toLocaleString()})]}),e.jsxs("div",{className:s.detailMetric,children:[e.jsx("span",{children:"Records Returned"}),e.jsx("span",{children:t.recordsReturned.toLocaleString()})]}),e.jsxs("div",{className:s.detailMetric,children:[e.jsx("span",{children:"Scan Efficiency"}),e.jsxs("span",{children:[t.scanEfficiency.toFixed(2),"%"]})]})]})]}),e.jsxs("div",{className:s.detailCard,children:[e.jsx("h4",{children:"Resource Usage"}),e.jsxs("div",{className:s.detailMetrics,children:[e.jsxs("div",{className:s.detailMetric,children:[e.jsx("span",{children:"CPU Time"}),e.jsxs("span",{children:[t.resourceUsage.cpuTime,"s"]})]}),e.jsxs("div",{className:s.detailMetric,children:[e.jsx("span",{children:"Memory Usage"}),e.jsxs("span",{children:[t.resourceUsage.memoryUsage.toFixed(1)," MB"]})]}),e.jsxs("div",{className:s.detailMetric,children:[e.jsx("span",{children:"Network I/O"}),e.jsxs("span",{children:[t.resourceUsage.networkIO.toFixed(1)," MB"]})]}),e.jsxs("div",{className:s.detailMetric,children:[e.jsx("span",{children:"Cache Hit Rate"}),e.jsxs("span",{children:[t.cacheHitRate.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:s.detailCard,children:[e.jsx("h4",{children:"Optimization Suggestions"}),e.jsx("div",{className:s.suggestions,children:t.suggestions.map((a,c)=>e.jsxs("div",{className:s.suggestion,children:[e.jsx(h,{size:14}),e.jsx("span",{children:a})]},c))})]})]}),e.jsxs("div",{className:s.queryCode,children:[e.jsx("h4",{children:"Full Query"}),e.jsx("pre",{children:e.jsx("code",{children:t.query})})]})]}),e.jsx(C,{isOpen:y,onClose:()=>d(!1),section:"performance"}),e.jsx(I,{isOpen:N,onClose:()=>o(!1),section:"performance"})]})};export{Ce as default};
//# sourceMappingURL=Performance-D25sHPBx.js.map
