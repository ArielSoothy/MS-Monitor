import{j as e,m as ae}from"./index-D0qYZVlT.js";import{r as b}from"./charts-CVhI3LTv.js";import{p as es,A as K,E as ee,t as Fe,u as ne,v as W,j as ie,q as se,w as us,x as hs,y as ps,a as ss,e as gs,S as ts,o as J,C as ce,z as re,s as oe,T as Q,Z as as,k as We,l as fs,D as Qe,B as Ke,G as Je,H as Xe,X as _s,J as xs,N as ys,c as Ye}from"./icons-xX1ujmH_.js";import{H as js}from"./HowItWorksModal-CBqvuu0I.js";import"./vendor-Csw2ODfV.js";import"./router-BUTKzT10.js";const bs="_modalOverlay_f9ny3_2",vs="_modal_f9ny3_2",Ns="_modalHeader_f9ny3_29",Ss="_modalTitle_f9ny3_38",ws="_pipelineName_f9ny3_45",Cs="_operationsSection_f9ny3_53",Is="_contactSection_f9ny3_73",Ls="_contactGrid_f9ny3_80",ks="_contactCard_f9ny3_86",Ts="_teamInfo_f9ny3_102",As="_teamName_f9ny3_108",Ms="_contactMethods_f9ny3_114",Ps="_contactButton_f9ny3_119",zs="_escalationPath_f9ny3_137",Ds="_escalationLevel_f9ny3_143",Es="_escalationOrder_f9ny3_150",$s="_escalationRole_f9ny3_163",Bs="_keyContacts_f9ny3_168",Hs="_contactPerson_f9ny3_174",Rs="_contactName_f9ny3_181",Gs="_contactRole_f9ny3_187",qs="_contactDetails_f9ny3_193",Os="_contactEmail_f9ny3_199",Vs="_contactPhone_f9ny3_200",Us="_contactSlack_f9ny3_201",Fs="_slaSection_f9ny3_210",Ws="_slaGrid_f9ny3_217",Qs="_slaCard_f9ny3_223",Ks="_slaLabel_f9ny3_231",Js="_slaValue_f9ny3_240",Xs="_slaTarget_f9ny3_247",Ys="_techSection_f9ny3_253",Zs="_techGrid_f9ny3_260",et="_techCard_f9ny3_266",st="_techLabel_f9ny3_273",tt="_techValue_f9ny3_282",at="_configSection_f9ny3_290",nt="_configGrid_f9ny3_297",it="_configCard_f9ny3_303",rt="_configLabel_f9ny3_310",ot="_configValue_f9ny3_319",ct="_complianceList_f9ny3_338",lt="_complianceBadge_f9ny3_344",dt="_perfSection_f9ny3_356",mt="_perfGrid_f9ny3_363",ut="_perfCard_f9ny3_369",ht="_perfLabel_f9ny3_377",pt="_perfValue_f9ny3_386",gt="_troubleshootSection_f9ny3_393",ft="_troubleshootGrid_f9ny3_400",_t="_troubleshootCard_f9ny3_406",xt="_issuesList_f9ny3_420",yt="_issueItem_f9ny3_429",jt="_endpointsList_f9ny3_438",bt="_endpointButton_f9ny3_444",vt="_queriesList_f9ny3_462",Nt="_queryItem_f9ny3_468",St="_queryHeader_f9ny3_475",wt="_queryCode_f9ny3_484",Ct="_closeButton_f9ny3_495",It="_quickActions_f9ny3_511",Lt="_actionButton_f9ny3_520",kt="_tabNav_f9ny3_545",Tt="_tab_f9ny3_545",At="_activeTab_f9ny3_571",Mt="_errorBadge_f9ny3_577",Pt="_modalContent_f9ny3_587",zt="_tabContent_f9ny3_593",Dt="_currentError_f9ny3_598",Et="_errorHeader_f9ny3_606",$t="_errorInfo_f9ny3_613",Bt="_errorIcon_f9ny3_619",Ht="_errorTitle_f9ny3_625",Rt="_errorMeta_f9ny3_633",Gt="_errorCode_f9ny3_639",qt="_errorTime_f9ny3_645",Ot="_severityBadge_f9ny3_650",Vt="_stackTrace_f9ny3_660",Ut="_stackHeader_f9ny3_664",Ft="_copyButton_f9ny3_677",Wt="_stackContent_f9ny3_695",Qt="_suggestedActions_f9ny3_709",Kt="_actionsList_f9ny3_719",Jt="_actionItem_f9ny3_725",Xt="_actionIcon_f9ny3_734",Yt="_context_f9ny3_741",Zt="_contextGrid_f9ny3_751",ea="_contextItem_f9ny3_757",sa="_contextKey_f9ny3_767",ta="_contextValue_f9ny3_774",aa="_noError_f9ny3_782",na="_noErrorIcon_f9ny3_788",ia="_errorHistory_f9ny3_800",ra="_historyList_f9ny3_810",oa="_historyItem_f9ny3_816",ca="_historyIcon_f9ny3_831",la="_historyContent_f9ny3_836",da="_historyMessage_f9ny3_840",ma="_historyMeta_f9ny3_846",ua="_historySeverity_f9ny3_853",ha="_logsSection_f9ny3_863",pa="_logsList_f9ny3_869",ga="_logItem_f9ny3_875",fa="_logHeader_f9ny3_882",_a="_logSystem_f9ny3_889",xa="_logButton_f9ny3_898",ya="_logMeta_f9ny3_916",ja="_queryTemplate_f9ny3_925",ba="_metricsSection_f9ny3_955",va="_metricsPlaceholder_f9ny3_961",Na="_metricsInfo_f9ny3_980",Sa="_grafanaButton_f9ny3_986",wa="_impactSection_f9ny3_1007",Ca="_impactOverview_f9ny3_1013",Ia="_impactLevel_f9ny3_1020",La="_impactBadge_f9ny3_1025",ka="_impactGrid_f9ny3_1035",Ta="_impactCard_f9ny3_1041",Aa="_affectedList_f9ny3_1054",Ma="_affectedItem_f9ny3_1060",Pa="_impactMetric_f9ny3_1073",za="_noImpact_f9ny3_1079",Da="_runbooksSection_f9ny3_1097",Ea="_runbooksList_f9ny3_1103",$a="_runbookItem_f9ny3_1110",Ba="_runbookHeader_f9ny3_1117",Ha="_runbookMeta_f9ny3_1130",Ra="_runbookDescription_f9ny3_1138",Ga="_runbookButton_f9ny3_1144",qa="_oncallInfo_f9ny3_1163",Oa="_oncallDetails_f9ny3_1174",n={modalOverlay:bs,modal:vs,modalHeader:Ns,modalTitle:Ss,pipelineName:ws,operationsSection:Cs,contactSection:Is,contactGrid:Ls,contactCard:ks,teamInfo:Ts,teamName:As,contactMethods:Ms,contactButton:Ps,escalationPath:zs,escalationLevel:Ds,escalationOrder:Es,escalationRole:$s,keyContacts:Bs,contactPerson:Hs,contactName:Rs,contactRole:Gs,contactDetails:qs,contactEmail:Os,contactPhone:Vs,contactSlack:Us,slaSection:Fs,slaGrid:Ws,slaCard:Qs,slaLabel:Ks,slaValue:Js,slaTarget:Xs,techSection:Ys,techGrid:Zs,techCard:et,techLabel:st,techValue:tt,configSection:at,configGrid:nt,configCard:it,configLabel:rt,configValue:ot,"criticality-critical":"_criticality-critical_f9ny3_328","criticality-high":"_criticality-high_f9ny3_329","criticality-medium":"_criticality-medium_f9ny3_330","criticality-low":"_criticality-low_f9ny3_331","classification-restricted":"_classification-restricted_f9ny3_333","classification-confidential":"_classification-confidential_f9ny3_334","classification-internal":"_classification-internal_f9ny3_335","classification-public":"_classification-public_f9ny3_336",complianceList:ct,complianceBadge:lt,perfSection:dt,perfGrid:mt,perfCard:ut,perfLabel:ht,perfValue:pt,troubleshootSection:gt,troubleshootGrid:ft,troubleshootCard:_t,issuesList:xt,issueItem:yt,endpointsList:jt,endpointButton:bt,queriesList:vt,queryItem:Nt,queryHeader:St,queryCode:wt,closeButton:Ct,quickActions:It,actionButton:Lt,tabNav:kt,tab:Tt,activeTab:At,errorBadge:Mt,modalContent:Pt,tabContent:zt,currentError:Dt,errorHeader:Et,errorInfo:$t,errorIcon:Bt,errorTitle:Ht,errorMeta:Rt,errorCode:Gt,errorTime:qt,severityBadge:Ot,stackTrace:Vt,stackHeader:Ut,copyButton:Ft,stackContent:Wt,suggestedActions:Qt,actionsList:Kt,actionItem:Jt,actionIcon:Xt,context:Yt,contextGrid:Zt,contextItem:ea,contextKey:sa,contextValue:ta,noError:aa,noErrorIcon:na,errorHistory:ia,historyList:ra,historyItem:oa,historyIcon:ca,historyContent:la,historyMessage:da,historyMeta:ma,historySeverity:ua,logsSection:ha,logsList:pa,logItem:ga,logHeader:fa,logSystem:_a,logButton:xa,logMeta:ya,queryTemplate:ja,metricsSection:ba,metricsPlaceholder:va,metricsInfo:Na,grafanaButton:Sa,impactSection:wa,impactOverview:Ca,impactLevel:Ia,impactBadge:La,impactGrid:ka,impactCard:Ta,affectedList:Aa,affectedItem:Ma,impactMetric:Pa,noImpact:za,runbooksSection:Da,runbooksList:Ea,runbookItem:$a,runbookHeader:Ba,runbookMeta:Ha,runbookDescription:Ra,runbookButton:Ga,oncallInfo:qa,oncallDetails:Oa},Ze=({isOpen:q,onClose:X,pipelineName:v,currentError:x,errorHistory:i,logReferences:P,metricsHistory:B,impactAnalysis:L,runbooks:z,oncallTeam:D,slackChannel:k,teamsChannel:T,dashboardUrl:Y,grafanaUrl:E,healthCheckUrl:H,operationalData:m})=>{var M,$;const[w,O]=b.useState("error"),[A,V]=b.useState(null);if(!q)return null;const U=async(c,h)=>{try{await navigator.clipboard.writeText(c),V(h),setTimeout(()=>V(null),2e3)}catch(F){console.error("Failed to copy:",F)}},l=c=>{switch(c){case"connection":return e.jsx(as,{className:n.errorIcon});case"data_quality":return e.jsx(Fe,{className:n.errorIcon});case"timeout":return e.jsx(J,{className:n.errorIcon});case"authentication":return e.jsx(W,{className:n.errorIcon});default:return e.jsx(Q,{className:n.errorIcon})}},R=c=>{switch(c){case"critical":return"#ef4444";case"high":return"#f97316";case"medium":return"#eab308";case"low":return"#22c55e";default:return"#6b7280"}};return e.jsx("div",{className:n.modalOverlay,onClick:X,children:e.jsxs("div",{className:n.modal,onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{className:n.modalHeader,children:[e.jsxs("div",{children:[e.jsx("h2",{className:n.modalTitle,children:"Pipeline Error Details"}),e.jsx("p",{className:n.pipelineName,children:v})]}),e.jsx("button",{className:n.closeButton,onClick:X,children:e.jsx(es,{size:24})})]}),e.jsxs("div",{className:n.quickActions,children:[e.jsxs("button",{className:n.actionButton,onClick:()=>window.open(H,"_blank"),disabled:!H,children:[e.jsx(K,{size:16}),"Health Check"]}),e.jsxs("button",{className:n.actionButton,onClick:()=>window.open(Y,"_blank"),disabled:!Y,children:[e.jsx(ee,{size:16}),"Dashboard"]}),e.jsxs("button",{className:n.actionButton,onClick:()=>window.open(E,"_blank"),disabled:!E,children:[e.jsx(Fe,{size:16}),"Metrics"]}),k&&e.jsxs("button",{className:n.actionButton,onClick:()=>window.open(`slack://channel?team=T123&id=${k}`,"_blank"),children:[e.jsx(ne,{size:16}),"Slack"]}),T&&e.jsxs("button",{className:n.actionButton,onClick:()=>window.open(T,"_blank"),children:[e.jsx(W,{size:16}),"Teams"]})]}),e.jsx("div",{className:n.tabNav,children:["error","operations","logs","metrics","impact","runbooks"].map(c=>e.jsxs("button",{className:`${n.tab} ${w===c?n.activeTab:""}`,onClick:()=>O(c),children:[c==="operations"?"Operations":c.charAt(0).toUpperCase()+c.slice(1),c==="error"&&x&&e.jsx("span",{className:n.errorBadge,style:{backgroundColor:R(x.severity)},children:x.severity})]},c))}),e.jsxs("div",{className:n.modalContent,children:[w==="error"&&e.jsxs("div",{className:n.tabContent,children:[x?e.jsxs("div",{className:n.currentError,children:[e.jsxs("div",{className:n.errorHeader,children:[e.jsxs("div",{className:n.errorInfo,children:[l(x.errorType),e.jsxs("div",{children:[e.jsx("h3",{className:n.errorTitle,children:x.errorMessage}),e.jsxs("div",{className:n.errorMeta,children:[e.jsxs("span",{className:n.errorCode,children:["Error Code: ",x.errorCode]}),e.jsx("span",{className:n.errorTime,children:new Date(x.timestamp).toLocaleString()})]})]})]}),e.jsx("span",{className:n.severityBadge,style:{backgroundColor:R(x.severity)},children:x.severity})]}),x.stackTrace&&e.jsxs("div",{className:n.stackTrace,children:[e.jsxs("div",{className:n.stackHeader,children:[e.jsx("h4",{children:"Stack Trace"}),e.jsxs("button",{className:n.copyButton,onClick:()=>U(x.stackTrace,"Stack Trace"),children:[e.jsx(ie,{size:14}),A==="Stack Trace"?"Copied!":"Copy"]})]}),e.jsx("pre",{className:n.stackContent,children:x.stackTrace})]}),e.jsxs("div",{className:n.suggestedActions,children:[e.jsx("h4",{children:"Suggested Actions"}),e.jsx("ul",{className:n.actionsList,children:x.suggestedActions.map((c,h)=>e.jsxs("li",{className:n.actionItem,children:[e.jsx(se,{size:16,className:n.actionIcon}),c]},h))})]}),x.context&&Object.keys(x.context).length>0&&e.jsxs("div",{className:n.context,children:[e.jsx("h4",{children:"Error Context"}),e.jsx("div",{className:n.contextGrid,children:Object.entries(x.context).map(([c,h])=>e.jsxs("div",{className:n.contextItem,children:[e.jsxs("span",{className:n.contextKey,children:[c,":"]}),e.jsx("span",{className:n.contextValue,children:String(h)})]},c))})]})]}):e.jsxs("div",{className:n.noError,children:[e.jsx(se,{size:48,className:n.noErrorIcon}),e.jsx("h3",{children:"No Current Errors"}),e.jsx("p",{children:"This pipeline is currently running without any detected errors."})]}),i.length>0&&e.jsxs("div",{className:n.errorHistory,children:[e.jsx("h4",{children:"Recent Error History"}),e.jsx("div",{className:n.historyList,children:i.slice(0,5).map((c,h)=>e.jsxs("div",{className:n.historyItem,children:[e.jsx("div",{className:n.historyIcon,children:l(c.errorType)}),e.jsxs("div",{className:n.historyContent,children:[e.jsx("div",{className:n.historyMessage,children:c.errorMessage}),e.jsxs("div",{className:n.historyMeta,children:[e.jsx("span",{children:c.errorCode}),e.jsx("span",{children:new Date(c.timestamp).toLocaleString()})]})]}),e.jsx("span",{className:n.historySeverity,style:{backgroundColor:R(c.severity)},children:c.severity})]},h))})]})]}),w==="operations"&&e.jsx("div",{className:n.tabContent,children:e.jsxs("div",{className:n.operationsSection,children:[e.jsxs("div",{className:n.contactSection,children:[e.jsxs("h3",{children:[e.jsx(W,{size:20}),"Contact Information"]}),e.jsxs("div",{className:n.contactGrid,children:[e.jsxs("div",{className:n.contactCard,children:[e.jsx("h4",{children:"Primary Team"}),e.jsxs("div",{className:n.teamInfo,children:[e.jsx("span",{className:n.teamName,children:((M=m==null?void 0:m.operationalInfo)==null?void 0:M.owner)||D}),e.jsxs("div",{className:n.contactMethods,children:[k&&e.jsxs("button",{className:n.contactButton,onClick:()=>window.open(`slack://channel?team=T123&id=${k}`,"_blank"),children:[e.jsx(ne,{size:14}),"#",k]}),T&&e.jsxs("button",{className:n.contactButton,onClick:()=>window.open(T,"_blank"),children:[e.jsx(W,{size:14}),"Teams Channel"]})]})]})]}),e.jsxs("div",{className:n.contactCard,children:[e.jsx("h4",{children:"Escalation Path"}),e.jsx("div",{className:n.escalationPath,children:((($=m==null?void 0:m.operationalInfo)==null?void 0:$.escalationPath)||["On-call Engineer","Senior Engineer","Team Lead","Principal Engineer"]).map((c,h)=>e.jsxs("div",{className:n.escalationLevel,children:[e.jsx("span",{className:n.escalationOrder,children:h+1}),e.jsx("span",{className:n.escalationRole,children:c})]},h))})]}),(m==null?void 0:m.contactInfo)&&e.jsxs("div",{className:n.contactCard,children:[e.jsx("h4",{children:"Key Contacts"}),e.jsx("div",{className:n.keyContacts,children:m.contactInfo.escalationContacts.slice(0,3).map((c,h)=>e.jsxs("div",{className:n.contactPerson,children:[e.jsx("div",{className:n.contactName,children:c.name}),e.jsx("div",{className:n.contactRole,children:c.role}),e.jsxs("div",{className:n.contactDetails,children:[e.jsxs("span",{className:n.contactEmail,children:[e.jsx(us,{size:12}),c.email]}),c.phone&&e.jsxs("span",{className:n.contactPhone,children:[e.jsx(hs,{size:12}),c.phone]}),c.slackHandle&&e.jsxs("span",{className:n.contactSlack,children:[e.jsx(ne,{size:12}),"@",c.slackHandle]})]})]},h))})]})]})]}),(m==null?void 0:m.slaMetrics)&&e.jsxs("div",{className:n.slaSection,children:[e.jsxs("h3",{children:[e.jsx(ps,{size:20}),"SLA Metrics"]}),e.jsxs("div",{className:n.slaGrid,children:[e.jsxs("div",{className:n.slaCard,children:[e.jsx("div",{className:n.slaLabel,children:"Current Uptime"}),e.jsxs("div",{className:n.slaValue,children:[m.slaMetrics.uptime.toFixed(2),"%"]}),e.jsxs("div",{className:n.slaTarget,children:["Target: ",m.slaMetrics.targetUptime,"%"]})]}),e.jsxs("div",{className:n.slaCard,children:[e.jsx("div",{className:n.slaLabel,children:"MTTR"}),e.jsxs("div",{className:n.slaValue,children:[m.slaMetrics.mttr," min"]}),e.jsx("div",{className:n.slaTarget,children:"Mean Time To Recovery"})]}),e.jsxs("div",{className:n.slaCard,children:[e.jsx("div",{className:n.slaLabel,children:"MTBF"}),e.jsxs("div",{className:n.slaValue,children:[m.slaMetrics.mtbf," hrs"]}),e.jsx("div",{className:n.slaTarget,children:"Mean Time Between Failures"})]})]})]}),(m==null?void 0:m.technology)&&e.jsxs("div",{className:n.techSection,children:[e.jsxs("h3",{children:[e.jsx(ss,{size:20}),"Technology Stack"]}),e.jsxs("div",{className:n.techGrid,children:[e.jsxs("div",{className:n.techCard,children:[e.jsx("div",{className:n.techLabel,children:"Service"}),e.jsx("div",{className:n.techValue,children:m.technology.stack})]}),e.jsxs("div",{className:n.techCard,children:[e.jsx("div",{className:n.techLabel,children:"Resource Group"}),e.jsx("div",{className:n.techValue,children:m.technology.resourceGroup})]}),e.jsxs("div",{className:n.techCard,children:[e.jsx("div",{className:n.techLabel,children:"Region"}),e.jsx("div",{className:n.techValue,children:m.technology.region})]}),e.jsxs("div",{className:n.techCard,children:[e.jsx("div",{className:n.techLabel,children:"Subscription"}),e.jsx("div",{className:n.techValue,children:m.technology.subscriptionId})]})]})]}),(m==null?void 0:m.operationalInfo)&&e.jsxs("div",{className:n.configSection,children:[e.jsxs("h3",{children:[e.jsx(gs,{size:20}),"Operational Configuration"]}),e.jsxs("div",{className:n.configGrid,children:[e.jsxs("div",{className:n.configCard,children:[e.jsx("div",{className:n.configLabel,children:"Criticality Level"}),e.jsx("div",{className:`${n.configValue} ${n[`criticality-${m.operationalInfo.criticalityLevel}`]}`,children:m.operationalInfo.criticalityLevel.toUpperCase()})]}),e.jsxs("div",{className:n.configCard,children:[e.jsx("div",{className:n.configLabel,children:"Data Classification"}),e.jsxs("div",{className:`${n.configValue} ${n[`classification-${m.operationalInfo.dataClassification}`]}`,children:[e.jsx(ts,{size:14}),m.operationalInfo.dataClassification.toUpperCase()]})]}),e.jsxs("div",{className:n.configCard,children:[e.jsx("div",{className:n.configLabel,children:"Maintenance Window"}),e.jsxs("div",{className:n.configValue,children:[e.jsx(J,{size:14}),m.operationalInfo.maintenanceWindow]})]}),e.jsxs("div",{className:n.configCard,children:[e.jsx("div",{className:n.configLabel,children:"Compliance"}),e.jsx("div",{className:n.complianceList,children:m.operationalInfo.complianceRequirements.map((c,h)=>e.jsx("span",{className:n.complianceBadge,children:c},h))})]})]})]}),(m==null?void 0:m.performanceMetrics)&&e.jsxs("div",{className:n.perfSection,children:[e.jsxs("h3",{children:[e.jsx(ce,{size:20}),"Real-time Performance"]}),e.jsxs("div",{className:n.perfGrid,children:[e.jsxs("div",{className:n.perfCard,children:[e.jsx("div",{className:n.perfLabel,children:"Average Latency"}),e.jsxs("div",{className:n.perfValue,children:[m.performanceMetrics.avgLatency,"ms"]})]}),e.jsxs("div",{className:n.perfCard,children:[e.jsx("div",{className:n.perfLabel,children:"P95 Latency"}),e.jsxs("div",{className:n.perfValue,children:[m.performanceMetrics.p95Latency,"ms"]})]}),e.jsxs("div",{className:n.perfCard,children:[e.jsx("div",{className:n.perfLabel,children:"Error Rate"}),e.jsxs("div",{className:n.perfValue,children:[m.performanceMetrics.errorRate.toFixed(2),"%"]})]}),e.jsxs("div",{className:n.perfCard,children:[e.jsx("div",{className:n.perfLabel,children:"Throughput"}),e.jsxs("div",{className:n.perfValue,children:[m.performanceMetrics.throughputMbps," MB/s"]})]}),e.jsxs("div",{className:n.perfCard,children:[e.jsx("div",{className:n.perfLabel,children:"CPU Usage"}),e.jsxs("div",{className:n.perfValue,children:[m.performanceMetrics.cpuUtilization.toFixed(1),"%"]})]}),e.jsxs("div",{className:n.perfCard,children:[e.jsx("div",{className:n.perfLabel,children:"Memory Usage"}),e.jsxs("div",{className:n.perfValue,children:[m.performanceMetrics.memoryUtilization.toFixed(1),"%"]})]})]})]}),(m==null?void 0:m.troubleshooting)&&e.jsxs("div",{className:n.troubleshootSection,children:[e.jsxs("h3",{children:[e.jsx(re,{size:20}),"Troubleshooting Resources"]}),e.jsxs("div",{className:n.troubleshootGrid,children:[e.jsxs("div",{className:n.troubleshootCard,children:[e.jsx("h4",{children:"Common Issues"}),e.jsx("ul",{className:n.issuesList,children:m.troubleshooting.commonIssues.map((c,h)=>e.jsxs("li",{className:n.issueItem,children:[e.jsx(oe,{size:14}),c]},h))})]}),e.jsxs("div",{className:n.troubleshootCard,children:[e.jsx("h4",{children:"Health Check Endpoints"}),e.jsx("div",{className:n.endpointsList,children:m.troubleshooting.healthCheckEndpoints.map((c,h)=>e.jsxs("button",{className:n.endpointButton,onClick:()=>window.open(c,"_blank"),children:[e.jsx(K,{size:14}),"Health Check ",h+1,e.jsx(ee,{size:12})]},h))})]}),e.jsxs("div",{className:n.troubleshootCard,children:[e.jsx("h4",{children:"Diagnostic Queries"}),e.jsx("div",{className:n.queriesList,children:m.troubleshooting.logQuerySamples.slice(0,2).map((c,h)=>e.jsxs("div",{className:n.queryItem,children:[e.jsxs("div",{className:n.queryHeader,children:[e.jsxs("span",{children:["Query ",h+1]}),e.jsxs("button",{className:n.copyButton,onClick:()=>U(c,`Query ${h+1}`),children:[e.jsx(ie,{size:12}),A===`Query ${h+1}`?"Copied!":"Copy"]})]}),e.jsx("code",{className:n.queryCode,children:c})]},h))})]})]})]})]})}),w==="logs"&&e.jsx("div",{className:n.tabContent,children:e.jsxs("div",{className:n.logsSection,children:[e.jsx("h3",{children:"Log References"}),e.jsx("div",{className:n.logsList,children:P.map((c,h)=>e.jsxs("div",{className:n.logItem,children:[e.jsxs("div",{className:n.logHeader,children:[e.jsxs("div",{className:n.logSystem,children:[e.jsx(re,{size:16}),c.logSystem.toUpperCase()]}),e.jsxs("button",{className:n.logButton,onClick:()=>window.open(c.logUrl,"_blank"),children:[e.jsx(ee,{size:14}),"Open Logs"]})]}),e.jsxs("div",{className:n.logMeta,children:[e.jsxs("span",{children:["Correlation ID: ",c.correlationId]}),e.jsxs("span",{children:["Time Range: ",new Date(c.timeRange.start).toLocaleString()," -",new Date(c.timeRange.end).toLocaleString()]})]}),c.queryTemplate&&e.jsxs("div",{className:n.queryTemplate,children:[e.jsxs("div",{className:n.queryHeader,children:[e.jsx("span",{children:"Query Template:"}),e.jsxs("button",{className:n.copyButton,onClick:()=>U(c.queryTemplate,"Query"),children:[e.jsx(ie,{size:12}),A==="Query"?"Copied!":"Copy"]})]}),e.jsx("code",{className:n.queryCode,children:c.queryTemplate})]})]},h))})]})}),w==="metrics"&&e.jsx("div",{className:n.tabContent,children:e.jsxs("div",{className:n.metricsSection,children:[e.jsx("h3",{children:"Performance Metrics History"}),e.jsxs("div",{className:n.metricsPlaceholder,children:[e.jsx(K,{size:48}),e.jsx("p",{children:"Interactive metrics charts would be displayed here"}),e.jsx("p",{children:"Showing trends for: Records/sec, Processing Time, Error Rate, Data Quality"}),B.length>0&&e.jsxs("p",{className:n.metricsInfo,children:[B.length," historical data points available"]}),E&&e.jsxs("button",{className:n.grafanaButton,onClick:()=>window.open(E,"_blank"),children:[e.jsx(ee,{size:16}),"View in Grafana"]})]})]})}),w==="impact"&&e.jsx("div",{className:n.tabContent,children:L?e.jsxs("div",{className:n.impactSection,children:[e.jsxs("div",{className:n.impactOverview,children:[e.jsx("h3",{children:"Impact Analysis"}),e.jsx("div",{className:n.impactLevel,children:e.jsxs("span",{className:n.impactBadge,style:{backgroundColor:R(L.businessImpactLevel)},children:[L.businessImpactLevel.toUpperCase()," IMPACT"]})})]}),e.jsxs("div",{className:n.impactGrid,children:[e.jsxs("div",{className:n.impactCard,children:[e.jsx("h4",{children:"Affected Downstream Pipelines"}),e.jsx("div",{className:n.affectedList,children:L.affectedDownstreamPipelines.map((c,h)=>e.jsxs("div",{className:n.affectedItem,children:[e.jsx(oe,{size:14}),c]},h))})]}),e.jsxs("div",{className:n.impactCard,children:[e.jsx("h4",{children:"Affected Destinations"}),e.jsx("div",{className:n.affectedList,children:L.affectedDestinations.map((c,h)=>e.jsxs("div",{className:n.affectedItem,children:[e.jsx(oe,{size:14}),c]},h))})]}),e.jsxs("div",{className:n.impactCard,children:[e.jsx("h4",{children:"Estimated Data Loss"}),e.jsxs("div",{className:n.impactMetric,children:[L.estimatedDataLoss.toLocaleString()," records"]})]}),e.jsxs("div",{className:n.impactCard,children:[e.jsx("h4",{children:"Recovery Time Estimate"}),e.jsxs("div",{className:n.impactMetric,children:[L.recoveryTimeEstimate," minutes"]})]})]})]}):e.jsxs("div",{className:n.noImpact,children:[e.jsx(se,{size:48}),e.jsx("h3",{children:"No Current Impact"}),e.jsx("p",{children:"This pipeline failure is not currently impacting downstream systems."})]})}),w==="runbooks"&&e.jsx("div",{className:n.tabContent,children:e.jsxs("div",{className:n.runbooksSection,children:[e.jsx("h3",{children:"Resolution Runbooks"}),e.jsx("div",{className:n.runbooksList,children:z.map((c,h)=>e.jsxs("div",{className:n.runbookItem,children:[e.jsxs("div",{className:n.runbookHeader,children:[e.jsx("h4",{children:c.title}),e.jsxs("div",{className:n.runbookMeta,children:[e.jsx(J,{size:14}),"~",c.estimatedResolutionTime," min"]})]}),e.jsx("p",{className:n.runbookDescription,children:c.description}),e.jsxs("button",{className:n.runbookButton,onClick:()=>window.open(c.url,"_blank"),children:[e.jsx(re,{size:16}),"Open Runbook"]})]},h))}),e.jsxs("div",{className:n.oncallInfo,children:[e.jsx("h4",{children:"On-Call Team"}),e.jsxs("div",{className:n.oncallDetails,children:[e.jsx(W,{size:16}),e.jsx("span",{children:D})]})]})]})})]})]})})},Va="_dataLineage_wbss7_2",Ua="_header_wbss7_9",Fa="_headerContent_wbss7_13",Wa="_titleSection_wbss7_19",Qa="_title_wbss7_19",Ka="_infoButton_wbss7_37",Ja="_subtitle_wbss7_57",Xa="_mainContent_wbss7_64",Ya="_controls_wbss7_70",Za="_searchContainer_wbss7_82",en="_searchIcon_wbss7_89",sn="_searchInput_wbss7_99",tn="_filterSelect_wbss7_120",an="_clearButton_wbss7_137",nn="_filterIndicator_wbss7_153",rn="_clearFilterButton_wbss7_166",on="_contentGrid_wbss7_181",cn="_visualizationPanel_wbss7_188",ln="_legend_wbss7_197",dn="_legendItem_wbss7_209",mn="_legendDot_wbss7_218",un="_source_wbss7_225",hn="_ingestion_wbss7_229",pn="_transformation_wbss7_233",gn="_enrichment_wbss7_237",fn="_destination_wbss7_241",_n="_legendSeparator_wbss7_246",xn="_legendProcessingBadge_wbss7_254",yn="_streaming_wbss7_266",jn="_microBatch_wbss7_272",bn="_batch_wbss7_278",vn="_hybrid_wbss7_284",Nn="_lineageContainer_wbss7_290",Sn="_lineageSvg_wbss7_298",wn="_sectionLabel_wbss7_305",Cn="_nodeGroup_wbss7_312",In="_nodeRect_wbss7_317",Ln="_selectedNode_wbss7_329",kn="_nodeText_wbss7_335",Tn="_nodeSubtext_wbss7_340",An="_connectionLine_wbss7_345",Mn="_flowDot_wbss7_349",Pn="_glow_wbss7_1",zn="_tooltip_wbss7_354",Dn="_nodePopup_wbss7_360",En="_popupSlideIn_wbss7_1",$n="_nodePopupExpanded_wbss7_376",Bn="_popupHeader_wbss7_394",Hn="_popupTitle_wbss7_403",Rn="_popupActions_wbss7_413",Gn="_popupButton_wbss7_419",qn="_expandButtonContainer_wbss7_437",On="_expandButton_wbss7_437",Vn="_popupContent_wbss7_463",Un="_quickInfo_wbss7_467",Fn="_quickInfoItem_wbss7_474",Wn="_quickInfoLabel_wbss7_480",Qn="_quickInfoValue_wbss7_488",Kn="_statusBadge_wbss7_497",Jn="_statusHealthy_wbss7_506",Xn="_statusWarning_wbss7_512",Yn="_statusFailed_wbss7_518",Zn="_statusProcessing_wbss7_524",ei="_processingModeBadge_wbss7_531",si="_expandedContent_wbss7_584",ti="_expandedSection_wbss7_591",ai="_expandedSectionTitle_wbss7_598",ni="_expandedSectionContent_wbss7_608",ii="_detailItem_wbss7_614",ri="_detailLabel_wbss7_621",oi="_detailValue_wbss7_625",ci="_tagList_wbss7_630",li="_tag_wbss7_630",di="_popupOverlay_wbss7_646",mi="_metricGrid_wbss7_657",ui="_metricItem_wbss7_664",hi="_metricValue_wbss7_672",pi="_metricLabel_wbss7_679",gi="_sidePanel_wbss7_713",fi="_summaryGrid_wbss7_746",_i="_errorBadge_wbss7_756",xi="_warning_wbss7_774",yi="_nodeWithErrors_wbss7_778",ji="_clickHint_wbss7_788",bi="_errorNode_wbss7_809",vi="_warningNode_wbss7_815",Ni="_techDetails_wbss7_822",Si="_techItem_wbss7_828",wi="_protocolTag_wbss7_853",Ci="_serviceTag_wbss7_853",Ii="_apiTag_wbss7_853",Li="_networkTag_wbss7_853",ki="_alertRule_wbss7_853",Ti="_alertList_wbss7_891",Ai="_troubleshootingActions_wbss7_898",Mi="_actionButton_wbss7_904",Pi="_errorDetails_wbss7_930",zi="_errorHeader_wbss7_938",Di="_errorIcon_wbss7_945",Ei="_errorMessage_wbss7_951",$i="_errorMeta_wbss7_958",Bi="_errorCode_wbss7_964",Hi="_errorTime_wbss7_974",Ri="_suggestedActions_wbss7_979",Gi="_viewFullErrorButton_wbss7_1003",qi="_monitoringLinks_wbss7_1032",Oi="_logLink_wbss7_1039",Vi="_communicationLinks_wbss7_1060",Ui="_commLink_wbss7_1069",Fi="_detailTitle_wbss7_1091",Wi="_pulse_wbss7_1",Qi="_linkList_wbss7_1109",Ki="_link_wbss7_1109",Ji="_codeSnippets_wbss7_1131",Xi="_codeSnippet_wbss7_1131",Yi="_summaryCard_wbss7_1164",Zi="_summaryIcon_wbss7_1200",er="_summaryContent_wbss7_1238",sr="_summaryValue_wbss7_1245",tr="_summaryLabel_wbss7_1257",t={dataLineage:Va,header:Ua,headerContent:Fa,titleSection:Wa,title:Qa,infoButton:Ka,subtitle:Ja,mainContent:Xa,controls:Ya,searchContainer:Za,searchIcon:en,searchInput:sn,filterSelect:tn,clearButton:an,filterIndicator:nn,clearFilterButton:rn,contentGrid:on,visualizationPanel:cn,legend:ln,legendItem:dn,legendDot:mn,source:un,ingestion:hn,transformation:pn,enrichment:gn,destination:fn,legendSeparator:_n,legendProcessingBadge:xn,streaming:yn,microBatch:jn,batch:bn,hybrid:vn,lineageContainer:Nn,lineageSvg:Sn,sectionLabel:wn,nodeGroup:Cn,nodeRect:In,selectedNode:Ln,nodeText:kn,nodeSubtext:Tn,connectionLine:An,flowDot:Mn,glow:Pn,tooltip:zn,nodePopup:Dn,popupSlideIn:En,nodePopupExpanded:$n,popupHeader:Bn,popupTitle:Hn,popupActions:Rn,popupButton:Gn,expandButtonContainer:qn,expandButton:On,popupContent:Vn,quickInfo:Un,quickInfoItem:Fn,quickInfoLabel:Wn,quickInfoValue:Qn,statusBadge:Kn,statusHealthy:Jn,statusWarning:Xn,statusFailed:Yn,statusProcessing:Zn,processingModeBadge:ei,expandedContent:si,expandedSection:ti,expandedSectionTitle:ai,expandedSectionContent:ni,detailItem:ii,detailLabel:ri,detailValue:oi,tagList:ci,tag:li,popupOverlay:di,metricGrid:mi,metricItem:ui,metricValue:hi,metricLabel:pi,sidePanel:gi,summaryGrid:fi,errorBadge:_i,warning:xi,nodeWithErrors:yi,clickHint:ji,errorNode:bi,warningNode:vi,techDetails:Ni,techItem:Si,protocolTag:wi,serviceTag:Ci,apiTag:Ii,networkTag:Li,alertRule:ki,alertList:Ti,troubleshootingActions:Ai,actionButton:Mi,errorDetails:Pi,errorHeader:zi,errorIcon:Di,errorMessage:Ei,errorMeta:$i,errorCode:Bi,errorTime:Hi,suggestedActions:Ri,viewFullErrorButton:Gi,monitoringLinks:qi,logLink:Oi,communicationLinks:Vi,commLink:Ui,detailTitle:Fi,pulse:Wi,linkList:Qi,link:Ki,codeSnippets:Ji,codeSnippet:Xi,summaryCard:Yi,summaryIcon:Zi,summaryContent:er,summaryValue:sr,summaryLabel:tr},ar=b.memo(()=>{var le,de,me,ue,he,pe,ge,fe,_e,xe,ye,je,be,ve,Ne,Se,we,Ce,Ie,Le,ke,Te,Ae,Me,Pe,ze,De,Ee,$e,Be,He,Re,Ge,qe,Oe,Ve,Ue;const[q,X]=b.useState(""),[v,x]=b.useState("all"),[i,P]=b.useState(null),[B,L]=b.useState(null),[z,D]=b.useState([]),[k,T]=b.useState(!1),[Y,E]=b.useState(!1),[H,m]=b.useState(!1),[w,O]=b.useState({x:0,y:0}),[A,V]=b.useState(!1),U=b.useRef(null),l=a=>{let o=0;for(let d=0;d<a.length;d++){const u=a.charCodeAt(d);o=(o<<5)-o+u,o=o&o}return Math.abs(o)/2147483647},R=()=>{const a=[],o=[],d=["LinkedIn","Twitter","Office365","AzureAD","GitHub","ThreatIntel","Exchange","Teams","SharePoint","PowerBI"];d.forEach((s,j)=>{var N;const _=l(`${s}-status`),f=["healthy","warning","failed"],p=f[Math.floor(_*f.length)],r=ae.filter(te=>te.source===s),S=r.length>0?r[0]:null;a.push({id:`source-${s}`,name:s,type:"source",source:s,x:50,y:80+j*70,status:p,recordsPerSecond:Math.floor(l(`${s}-records`)*1e3)+100,avgProcessingTime:Math.floor(l(`${s}-time`)*500)+50,connections:[],description:`Data ingestion from ${s} platform`,lastUpdate:new Date(Date.now()-l(`${s}-update`)*36e5).toISOString(),dataQuality:Math.floor(l(`${s}-quality`)*20)+80,pipelineData:S,hasErrors:p==="failed"||p==="warning",errorCount:((N=S==null?void 0:S.errorHistory)==null?void 0:N.length)||(p==="failed"?3:p==="warning"?1:0),technology:s==="Office365"||s==="Exchange"||s==="Teams"||s==="SharePoint"?"Microsoft Graph API":s==="AzureAD"?"Azure Active Directory Logs":s==="LinkedIn"||s==="Twitter"?"Azure Event Hubs":s==="GitHub"?"GitHub REST API â†’ Azure Logic Apps":s==="ThreatIntel"?"Microsoft Defender for Threat Intelligence API":"Azure Event Hubs",resourceGroup:"rg-mstic-prod-eastus2",subscriptionId:"mstic-prod-subscription",region:"East US 2",throughputUnits:["LinkedIn","Twitter"].includes(s)?20:10,partitionCount:["LinkedIn","Twitter"].includes(s)?32:16,retentionDays:7,protocols:s==="Office365"||s==="AzureAD"?["HTTPS","OAuth 2.0"]:s==="GitHub"?["HTTPS","Webhook"]:["HTTPS","AMQP 1.0","Kafka"],authentication:s==="Office365"||s==="AzureAD"?"Managed Identity + Application Registration":s==="GitHub"?"GitHub App + Personal Access Token":"Managed Identity + Shared Access Key",monitoring:{applicationInsights:"ai-mstic-ingestion-prod",logAnalyticsWorkspace:"law-mstic-prod-eastus2",kustoCluster:"msticdata.eastus2.kusto.windows.net",alertRules:[`${s}_ingestion_failure`,`${s}_throughput_low`,`${s}_latency_high`]},dependencies:{keyVault:"kv-mstic-secrets-prod",serviceAccounts:[`sa-${s.toLowerCase()}-ingestion`],externalApis:s==="Office365"?["graph.microsoft.com"]:s==="GitHub"?["api.github.com"]:s==="LinkedIn"?["api.linkedin.com"]:s==="Twitter"?["api.twitter.com"]:[],networkConnections:["Virtual Network Gateway","Private Endpoints","Service Endpoints"]},slaMetrics:{uptime:Math.max(95,100-l(`${s}-uptime`)*5),targetUptime:99.9,mttr:Math.floor(l(`${s}-mttr`)*30)+5,mtbf:Math.floor(l(`${s}-mtbf`)*168)+24},operationalInfo:{owner:s==="Office365"||s==="AzureAD"?"MSTIC Identity Team":s==="GitHub"||s==="LinkedIn"?"MSTIC External Feeds Team":"MSTIC Data Ingestion Team",escalationPath:["On-call Engineer","Team Lead","Principal Engineer","Engineering Manager"],maintenanceWindow:"Sundays 02:00-04:00 UTC",criticalityLevel:["Office365","AzureAD","ThreatIntel"].includes(s)?"critical":["LinkedIn","Twitter"].includes(s)?"high":"medium",dataClassification:["Office365","AzureAD"].includes(s)?"confidential":"internal",complianceRequirements:["Office365","AzureAD"].includes(s)?["GDPR","SOX","ISO 27001","FedRAMP"]:["GDPR","ISO 27001"]},performanceMetrics:{avgLatency:Math.floor(l(`${s}-latency`)*200)+50,p95Latency:Math.floor(l(`${s}-p95`)*500)+100,errorRate:Math.round(l(`${s}-errors`)*2*100)/100,throughputMbps:Math.floor(l(`${s}-throughput`)*100)+10,cpuUtilization:Math.floor(l(`${s}-cpu`)*30)+20,memoryUtilization:Math.floor(l(`${s}-memory`)*40)+30},troubleshooting:{commonIssues:[`${s} API rate limiting`,"Authentication token expiration","Network connectivity issues","Data format validation errors"],runbookUrls:[`https://mstic.wiki/runbooks/${s.toLowerCase()}-ingestion`,`https://mstic.wiki/troubleshooting/${s.toLowerCase()}-common-issues`],logQuerySamples:[`${s}Ingestion_CL | where TimeGenerated > ago(1h) | where Level == "Error"`,`${s}Metrics_CL | summarize avg(RecordsPerSecond) by bin(TimeGenerated, 5m)`],healthCheckEndpoints:[`https://mstic-monitoring.azurewebsites.net/health/${s.toLowerCase()}`,`https://mstic-api.azurewebsites.net/status/${s.toLowerCase()}`]},processingMode:["LinkedIn","Twitter","ThreatIntel"].includes(s)?"streaming":"batch",dataMovementTool:s==="Office365"||s==="Exchange"||s==="Teams"||s==="SharePoint"?"Microsoft Graph API + Azure Logic Apps":s==="AzureAD"?"Azure AD Logs API + Event Grid":s==="LinkedIn"||s==="Twitter"?"REST API + Azure Event Hubs":s==="GitHub"?"GitHub Webhooks + Azure Logic Apps":"REST API + Azure Functions",batchFrequency:["Office365","AzureAD","Exchange","Teams","SharePoint"].includes(s)?"Every 15 minutes":"N/A (Streaming)",streamingLatency:["LinkedIn","Twitter","ThreatIntel"].includes(s)?"< 10 seconds":"N/A (Batch)",dataFormat:s==="Office365"||s==="Exchange"||s==="Teams"?["JSON","XML"]:s==="AzureAD"?["JSON","CSV"]:["JSON","Avro"],compressionType:["LinkedIn","Twitter"].includes(s)?"LZ4":"GZIP"})}),[{type:"ingestion",x:350},{type:"transformation",x:650},{type:"enrichment",x:950}].forEach(({type:s,x:j})=>{const _={};ae.forEach(r=>{_[r.source]||(_[r.source]=[]),_[r.source].push(r)});const f=[];d.forEach(r=>{const S=_[r]||[];if(S.length>0){const N=Math.floor(l(`${s}-${r}`)*S.length);f.push(S[N])}});const p=f.map((r,S)=>{var N;return{id:`${s}-${r.id}`,name:`${s.charAt(0).toUpperCase()+s.slice(1)} - ${r.name.split(" ").slice(0,3).join(" ")}`,type:s,source:r.source,x:j,y:80+S*70,status:r.status,recordsPerSecond:Math.floor(r.recordsProcessed/60),avgProcessingTime:r.avgProcessingTime,connections:[],description:`${s} pipeline: ${r.name}`,lastUpdate:r.lastRun.toISOString(),dataQuality:Math.floor(l(`${r.id}-quality`)*15)+85,actualPipeline:r,pipelineData:r,hasErrors:r.status==="failed"||r.status==="warning",errorCount:((N=r.errorHistory)==null?void 0:N.length)||0,technology:s==="ingestion"?r.source==="LinkedIn"||r.source==="Twitter"?"Azure Event Hubs + Stream Analytics":r.source==="Office365"||r.source==="AzureAD"?"Azure Data Factory (Copy Activity)":r.source==="GitHub"?"Azure Logic Apps + Azure Functions":"Azure Data Factory + Event Grid":s==="transformation"?r.source==="LinkedIn"||r.source==="Twitter"?"Azure Stream Analytics + Databricks Streaming":r.source==="Office365"||r.source==="Exchange"?"Azure Synapse Analytics (SQL Pool)":r.source==="ThreatIntel"?"Azure Functions + Cosmos DB Change Feed":"Azure Data Factory (Mapping Data Flows)":r.source==="LinkedIn"||r.source==="Twitter"?"Azure Functions (Real-time) + SignalR":r.source==="Office365"||r.source==="AzureAD"?"Azure Cognitive Services + ML Studio":"Azure Databricks (ML Runtime) + MLflow",resourceGroup:`rg-mstic-${s}-prod-eastus2`,subscriptionId:"mstic-prod-subscription",region:"East US 2",computeType:s==="ingestion"?r.source==="LinkedIn"||r.source==="Twitter"?"Event Hubs (20 TUs) + Auto-scale Runtime":r.source==="Office365"||r.source==="AzureAD"?"Integration Runtime (Self-hosted)":"Azure-SSIS Integration Runtime":s==="transformation"?r.source==="LinkedIn"||r.source==="Twitter"?"Stream Analytics (120 SUs) + Databricks (8-node cluster)":r.source==="Office365"||r.source==="Exchange"?"Synapse SQL Pool (DW500c)":"Data Factory Mapping Data Flow (16-core)":r.source==="LinkedIn"||r.source==="Twitter"?"Consumption Plan Functions + SignalR (Standard)":"Databricks ML Runtime (Standard_DS4_v2)",partitionCount:s==="transformation"?64:32,retentionDays:30,protocols:s==="ingestion"?["HTTPS","ODBC","JDBC"]:s==="transformation"?["Spark SQL","Delta Lake"]:["Python","Scala","Delta Lake","MLflow"],authentication:"Managed Identity + Azure Key Vault",monitoring:{applicationInsights:`ai-mstic-${s}-prod`,logAnalyticsWorkspace:"law-mstic-prod-eastus2",kustoCluster:"msticdata.eastus2.kusto.windows.net",alertRules:[`${s}_pipeline_failure`,`${s}_processing_delay`,`${s}_resource_exhaustion`]},dependencies:{keyVault:"kv-mstic-secrets-prod",serviceAccounts:[`sa-${s}-${r.source.toLowerCase()}`],externalApis:s==="enrichment"?["threatintelligence.microsoft.com","virusshare.com"]:[],networkConnections:["Azure Virtual Network","Private Link","Managed Virtual Network"]},processingMode:s==="ingestion"?r.source==="LinkedIn"||r.source==="Twitter"?"streaming":r.source==="Office365"||r.source==="AzureAD"?"batch":"hybrid":s==="transformation"?r.source==="LinkedIn"||r.source==="Twitter"?"micro-batch":r.source==="Office365"||r.source==="Exchange"?"batch":"hybrid":"streaming",dataMovementTool:s==="ingestion"?r.source==="LinkedIn"||r.source==="Twitter"?"Azure Event Hubs + Stream Analytics":r.source==="Office365"||r.source==="AzureAD"?"Azure Data Factory Copy Activity":"Azure Logic Apps + HTTP Connector":s==="transformation"?r.source==="LinkedIn"||r.source==="Twitter"?"Databricks Auto Loader + Delta Live Tables":r.source==="Office365"||r.source==="Exchange"?"Synapse Pipelines + PolyBase":"Azure Data Factory Mapping Data Flows":"Azure Functions + Service Bus",batchFrequency:s==="ingestion"&&["Office365","AzureAD","Exchange","Teams"].includes(r.source)?"Every 15 minutes":s==="transformation"&&["Office365","Exchange","SharePoint"].includes(r.source)?"Hourly (00:15, 01:15, etc.)":"N/A (Streaming)",streamingLatency:["LinkedIn","Twitter","ThreatIntel"].includes(r.source)?s==="ingestion"?"< 30 seconds":s==="transformation"?"< 2 minutes":"< 5 seconds":"N/A (Batch)",dataFormat:s==="ingestion"?r.source==="LinkedIn"||r.source==="Twitter"?["JSON","Avro"]:r.source==="Office365"||r.source==="AzureAD"?["JSON","CSV"]:["JSON","XML"]:s==="transformation"?r.source==="LinkedIn"||r.source==="Twitter"?["Parquet","Delta"]:["Parquet","ORC","Delta"]:["JSON","Parquet"],compressionType:s==="ingestion"?"Snappy":s==="transformation"?"GZIP":"LZ4",slaMetrics:{uptime:Math.max(95,100-l(`${r.id}-uptime`)*5),targetUptime:s==="ingestion"?99.95:99.9,mttr:Math.floor(l(`${r.id}-mttr`)*20)+10,mtbf:Math.floor(l(`${r.id}-mtbf`)*120)+48},operationalInfo:{owner:s==="ingestion"?"MSTIC Data Ingestion Team":s==="transformation"?"MSTIC Data Platform Team":"MSTIC ML Engineering Team",escalationPath:["On-call Engineer","Senior Engineer","Team Lead","Principal Engineer"],maintenanceWindow:s==="transformation"?"Saturdays 01:00-03:00 UTC":"Sundays 03:00-05:00 UTC",criticalityLevel:s==="ingestion"?"high":s==="transformation"?"critical":"medium",dataClassification:"internal",complianceRequirements:["GDPR","ISO 27001","SOC 2"]},performanceMetrics:{avgLatency:s==="ingestion"?Math.floor(l(`${r.id}-lat1`)*100)+20:s==="transformation"?Math.floor(l(`${r.id}-lat2`)*300)+100:Math.floor(l(`${r.id}-lat3`)*500)+200,p95Latency:s==="ingestion"?Math.floor(l(`${r.id}-p95-1`)*200)+50:s==="transformation"?Math.floor(l(`${r.id}-p95-2`)*600)+200:Math.floor(l(`${r.id}-p95-3`)*1e3)+500,errorRate:Math.round(l(`${r.id}-errors`)*1.5*100)/100,throughputMbps:Math.floor(l(`${r.id}-throughput`)*200)+50,cpuUtilization:Math.floor(l(`${r.id}-cpu`)*40)+30,memoryUtilization:Math.floor(l(`${r.id}-memory`)*50)+25},troubleshooting:{commonIssues:[`${s} pipeline timeout issues`,"Resource scaling limitations","Data schema validation errors","Memory pressure during peak loads"],runbookUrls:[`https://mstic.wiki/runbooks/${s}-pipeline-troubleshooting`,`https://mstic.wiki/scaling/${s}-performance-tuning`],logQuerySamples:[`${s.charAt(0).toUpperCase()+s.slice(1)}Pipeline_CL | where TimeGenerated > ago(1h) | where Level == "Error"`,`${s.charAt(0).toUpperCase()+s.slice(1)}Metrics_CL | summarize avg(ProcessingTimeMs) by bin(TimeGenerated, 5m)`],healthCheckEndpoints:[`https://mstic-monitoring.azurewebsites.net/health/${s}`,`https://mstic-${s}.azurewebsites.net/status`]}}});a.push(...p)});const g=[{name:"MSTIC Data Lake",types:["storage","archive"],priority:1},{name:"Threat Intelligence DB",types:["threat","intel"],priority:1},{name:"Security Analytics Store",types:["analytics","ml"],priority:2},{name:"Alert System",types:["realtime","alerts"],priority:1},{name:"ML Training Data",types:["ml","training"],priority:3},{name:"Compliance Archive",types:["compliance","audit"],priority:2},{name:"Real-time Dashboard",types:["realtime","dashboard"],priority:1},{name:"API Gateway",types:["api","external"],priority:2},{name:"Kusto Analytics Engine",types:["kusto","analytics"],priority:1}],C={id:"parquet-staging-pipeline",name:"Parquet Field Extraction Staging",type:"transformation",x:500,y:780,status:"healthy",recordsPerSecond:2340,avgProcessingTime:450,connections:[],description:"Staging table for selective JSON field extraction from high-volume Parquet ingestion",lastUpdate:new Date().toISOString(),dataQuality:98,technology:"Azure Data Factory + Delta Lake + Kusto",resourceGroup:"rg-mstic-staging-prod-eastus2",subscriptionId:"mstic-prod-subscription",region:"East US 2",computeType:"Azure Data Factory Integration Runtime",partitionCount:64,retentionDays:7,protocols:["HTTPS","Delta Lake","KQL"],authentication:"Managed Identity + Service Principal",monitoring:{applicationInsights:"ai-mstic-staging-prod",logAnalyticsWorkspace:"law-mstic-prod-eastus2",kustoCluster:"msticdata.eastus2.kusto.windows.net",alertRules:["parquet_staging_failure","parquet_field_extraction_delay","staging_table_capacity"]},dependencies:{keyVault:"kv-mstic-secrets-prod",serviceAccounts:["sa-parquet-staging"],externalApis:[],networkConnections:["Private Link to Kusto","ADLS Private Endpoint"]},processingMode:"batch",dataMovementTool:"Azure Data Factory + Delta Lake Engine",batchFrequency:"Triggered by file arrival (Event Grid)",streamingLatency:"N/A (Batch Processing)",dataFormat:["Parquet","JSON","Delta"],compressionType:"Snappy (Parquet native)",slaMetrics:{uptime:99.8,targetUptime:99.9,mttr:12,mtbf:168},operationalInfo:{owner:"MSTIC Data Platform Team",escalationPath:["On-call Engineer","Senior Data Engineer","Principal Engineer"],maintenanceWindow:"Saturdays 02:00-04:00 UTC",criticalityLevel:"high",dataClassification:"internal",complianceRequirements:["GDPR","ISO 27001"]},performanceMetrics:{avgLatency:450,p95Latency:850,errorRate:.8,throughputMbps:320,cpuUtilization:45,memoryUtilization:60},troubleshooting:{commonIssues:["JSON field extraction timeout","Parquet schema evolution issues","Kusto ingestion capacity limits","Delta Lake table optimization needed"],runbookUrls:["https://mstic.wiki/runbooks/parquet-staging-troubleshooting","https://mstic.wiki/kusto/field-extraction-optimization"],logQuerySamples:['ParquetStagingPipeline_CL | where TimeGenerated > ago(1h) | where Level == "Error"',"ParquetFieldExtraction_CL | summarize avg(ProcessingTimeMs) by bin(TimeGenerated, 5m)"],healthCheckEndpoints:["https://mstic-monitoring.azurewebsites.net/health/parquet-staging","https://mstic-staging.azurewebsites.net/status/field-extraction"]},scenarioDetails:{problem:"Extract specific JSON fields from thousands of Parquet files per hour",solution:"Staging table with conditional ingestion trigger",sourceFormat:"Parquet files (Azure Data Lake)",targetSystem:"Azure Data Explorer (Kusto)",volumePerHour:"~3,000 files",fieldFilter:"user_activity.threat_indicators",triggerCondition:"IF field_exists AND field_not_null"},stagingDetails:{tableName:"threat_indicators_staging",partitionStrategy:"BY (date_hour, source_system)",retentionPolicy:"7 days (staging only)",compressionRatio:"85%",indexStrategy:"Clustered on timestamp, source_ip"}};g.forEach((s,j)=>{const _=l(`${s.name}-status`),f=["healthy","warning"],p=f[Math.floor(_*f.length)];a.push({id:`dest-${s.name}`,name:s.name,type:"destination",x:1250,y:80+j*70,status:p,recordsPerSecond:Math.floor(l(`${s.name}-records`)*500)+50,avgProcessingTime:Math.floor(l(`${s.name}-time`)*100)+20,connections:[],description:`Data destination: ${s.name}`,lastUpdate:new Date(Date.now()-l(`${s.name}-update`)*18e5).toISOString(),dataQuality:Math.floor(l(`${s.name}-quality`)*10)+90,destinationTypes:s.types,priority:s.priority,technology:s.name.includes("Data Lake")?"Azure Data Lake Storage Gen2 (ADLS)":s.name.includes("DB")||s.name.includes("Database")?"Azure SQL Database (Premium)":s.name.includes("Analytics")?"Azure Synapse Analytics (SQL Pool)":s.name.includes("Alert")?"Azure Logic Apps + Service Bus":s.name.includes("ML")?"Azure Machine Learning Studio":s.name.includes("Compliance")?"Azure Purview + Archive Storage":s.name.includes("Dashboard")?"Power BI Premium + Azure SignalR":"Azure API Management + Application Gateway",resourceGroup:"rg-mstic-storage-prod-eastus2",subscriptionId:"mstic-prod-subscription",region:"East US 2",storageType:s.name.includes("Data Lake")?"Hot (Standard LRS) + Cool Archive":s.name.includes("Analytics")?"Premium SSD + Columnstore Index":s.name.includes("ML")?"Standard SSD + Blob Storage":s.name.includes("Compliance")?"Archive Storage (GRS)":"Standard Storage (ZRS)",partitionCount:s.name.includes("Data Lake")?128:s.name.includes("Analytics")?256:s.name.includes("Alert")?64:32,retentionDays:s.name.includes("Compliance")?2555:s.name.includes("Archive")?365:s.name.includes("ML")?180:90,protocols:s.name.includes("Data Lake")?["HTTPS","REST API","ABFS"]:s.name.includes("DB")?["TDS","HTTPS","ODBC"]:s.name.includes("Alert")?["HTTPS","AMQP","Service Bus"]:s.name.includes("API")?["HTTPS","OAuth 2.0","OpenAPI"]:["HTTPS","WebSocket","REST API"],authentication:s.name.includes("Data Lake")?"Managed Identity + ACLs + RBAC":s.name.includes("DB")?"Managed Identity + SQL Authentication":s.name.includes("ML")?"Service Principal + Workspace MSI":"Managed Identity + Key Vault",monitoring:{applicationInsights:"ai-mstic-destinations-prod",logAnalyticsWorkspace:"law-mstic-prod-eastus2",kustoCluster:"msticdata.eastus2.kusto.windows.net",alertRules:[`${s.name.replace(/\s+/g,"_").toLowerCase()}_capacity`,`${s.name.replace(/\s+/g,"_").toLowerCase()}_latency`,`${s.name.replace(/\s+/g,"_").toLowerCase()}_availability`]},dependencies:{keyVault:"kv-mstic-secrets-prod",serviceAccounts:[`sa-${s.name.replace(/\s+/g,"-").toLowerCase()}`],externalApis:s.name.includes("API")?["partner-apis.microsoft.com"]:[],networkConnections:["Private Endpoints","VNet Integration","Service Endpoints"]},slaMetrics:{uptime:Math.max(98,100-l(`${s.name}-uptime`)*2),targetUptime:s.name.includes("Data Lake")||s.name.includes("Alert")?99.99:99.9,mttr:Math.floor(l(`${s.name}-mttr`)*15)+5,mtbf:Math.floor(l(`${s.name}-mtbf`)*200)+100},operationalInfo:{owner:s.name.includes("Data Lake")||s.name.includes("Analytics")?"MSTIC Data Platform Team":s.name.includes("Alert")||s.name.includes("Dashboard")?"MSTIC Operations Team":s.name.includes("ML")?"MSTIC ML Engineering Team":s.name.includes("Compliance")?"MSTIC Compliance Team":"MSTIC Infrastructure Team",escalationPath:["On-call Engineer","Senior Engineer","Team Lead","Engineering Manager"],maintenanceWindow:s.name.includes("Alert")?"None (24/7 Operations)":"Sundays 01:00-03:00 UTC",criticalityLevel:s.name.includes("Alert")||s.name.includes("Data Lake")?"critical":s.name.includes("Dashboard")||s.name.includes("Analytics")?"high":"medium",dataClassification:s.name.includes("Compliance")?"confidential":"internal",complianceRequirements:s.name.includes("Compliance")?["GDPR","SOX","ISO 27001","FedRAMP","HIPAA"]:["GDPR","ISO 27001","SOC 2"]},performanceMetrics:{avgLatency:s.name.includes("Data Lake")?Math.floor(l(`${s.name}-lat1`)*50)+10:s.name.includes("Alert")?Math.floor(l(`${s.name}-lat2`)*100)+50:s.name.includes("Analytics")?Math.floor(l(`${s.name}-lat3`)*200)+100:Math.floor(l(`${s.name}-lat4`)*150)+75,p95Latency:s.name.includes("Data Lake")?Math.floor(l(`${s.name}-p95-1`)*100)+25:s.name.includes("Alert")?Math.floor(l(`${s.name}-p95-2`)*200)+100:s.name.includes("Analytics")?Math.floor(l(`${s.name}-p95-3`)*500)+250:Math.floor(l(`${s.name}-p95-4`)*300)+150,errorRate:Math.round(l(`${s.name}-errors`)*1*100)/100,throughputMbps:s.name.includes("Data Lake")?Math.floor(l(`${s.name}-through1`)*500)+100:s.name.includes("Analytics")?Math.floor(l(`${s.name}-through2`)*300)+50:Math.floor(l(`${s.name}-through3`)*200)+25,cpuUtilization:Math.floor(l(`${s.name}-cpu`)*25)+15,memoryUtilization:Math.floor(l(`${s.name}-memory`)*35)+20},troubleshooting:{commonIssues:[`${s.name} capacity management`,"Query performance optimization","Connection pool exhaustion","Storage tier optimization"],runbookUrls:[`https://mstic.wiki/runbooks/${s.name.replace(/\s+/g,"-").toLowerCase()}-maintenance`,`https://mstic.wiki/troubleshooting/${s.name.replace(/\s+/g,"-").toLowerCase()}-performance`],logQuerySamples:[`${s.name.replace(/\s+/g,"")}Logs_CL | where TimeGenerated > ago(1h) | where Level == "Error"`,`${s.name.replace(/\s+/g,"")}Metrics_CL | summarize avg(ResponseTimeMs) by bin(TimeGenerated, 5m)`],healthCheckEndpoints:[`https://mstic-monitoring.azurewebsites.net/health/${s.name.replace(/\s+/g,"-").toLowerCase()}`,`https://mstic-storage.azurewebsites.net/status/${s.name.replace(/\s+/g,"-").toLowerCase()}`]},processingMode:s.name.includes("Real-time")||s.name.includes("Alert")?"streaming":"batch",dataMovementTool:s.name.includes("Data Lake")?"PolyBase + COPY INTO (T-SQL)":s.name.includes("Analytics")?"Azure Synapse Pipelines + SQL Pools":s.name.includes("Alert")?"Azure Logic Apps + Service Bus":s.name.includes("ML")?"Azure ML Pipelines + AutoML":s.name.includes("API")?"Azure API Management + Application Gateway":"Azure Data Factory + REST API",batchFrequency:s.name.includes("Real-time")||s.name.includes("Alert")?"N/A (Streaming)":s.name.includes("Compliance")?"Daily at 02:00 UTC":"Hourly (00:30, 01:30, etc.)",streamingLatency:s.name.includes("Real-time")||s.name.includes("Alert")?"< 5 seconds":"N/A (Batch)",dataFormat:s.name.includes("Data Lake")?["Parquet","Delta","JSON"]:s.name.includes("Analytics")?["Parquet","ORC","Columnstore"]:s.name.includes("ML")?["Parquet","CSV","JSON"]:["JSON","Avro"],compressionType:s.name.includes("Data Lake")?"Snappy":s.name.includes("Analytics")?"GZIP":"LZ4"})}),a.push(C),a.push({id:"parquet-source-adls",name:"Azure Data Lake (Parquet)",type:"source",source:"AzureAD",x:50,y:780,status:"healthy",recordsPerSecond:4500,avgProcessingTime:120,connections:[],description:"High-volume Parquet file ingestion from ADLS Gen2",lastUpdate:new Date().toISOString(),dataQuality:96,technology:"Azure Data Lake Storage Gen2",resourceGroup:"rg-mstic-datalake-prod-eastus2",subscriptionId:"mstic-prod-subscription",region:"East US 2",throughputUnits:50,partitionCount:128,retentionDays:30,protocols:["HTTPS","ABFS","REST API"],authentication:"Managed Identity + ACLs",monitoring:{applicationInsights:"ai-mstic-datalake-prod",logAnalyticsWorkspace:"law-mstic-prod-eastus2",kustoCluster:"msticdata.eastus2.kusto.windows.net",alertRules:["parquet_ingestion_failure","parquet_throughput_low","parquet_storage_capacity"]},dependencies:{keyVault:"kv-mstic-secrets-prod",serviceAccounts:["sa-adls-parquet-reader"],externalApis:[],networkConnections:["Private Endpoints","VNet Integration"]},slaMetrics:{uptime:99.95,targetUptime:99.99,mttr:5,mtbf:720},operationalInfo:{owner:"MSTIC Data Platform Team",escalationPath:["On-call Engineer","Storage Lead","Principal Engineer","Engineering Manager"],maintenanceWindow:"Sundays 01:00-02:00 UTC",criticalityLevel:"critical",dataClassification:"internal",complianceRequirements:["GDPR","ISO 27001","SOC 2"]},performanceMetrics:{avgLatency:45,p95Latency:120,errorRate:.05,throughputMbps:850,cpuUtilization:15,memoryUtilization:25},troubleshooting:{commonIssues:["Parquet file format validation errors","Storage tier access delays","Network connectivity to ADLS","Authentication token expiration"],runbookUrls:["https://mstic.wiki/runbooks/adls-parquet-troubleshooting","https://mstic.wiki/storage/adls-performance-optimization"],logQuerySamples:['ADLSParquetIngestion_CL | where TimeGenerated > ago(1h) | where Level == "Error"',"ADLSMetrics_CL | summarize avg(ThroughputMbps) by bin(TimeGenerated, 5m)"],healthCheckEndpoints:["https://mstic-monitoring.azurewebsites.net/health/adls-parquet","https://mstic-datalake.azurewebsites.net/status/parquet-ingestion"]},actualPipeline:null,hasErrors:!1,errorCount:0,processingMode:"batch",dataMovementTool:"ADLS Gen2 REST API + Azure Storage Explorer",batchFrequency:"Continuous (new files every 2-3 minutes)",streamingLatency:"N/A (File-based ingestion)",dataFormat:["Parquet","JSON","Avro"],compressionType:"Snappy (default for Parquet)"}),a.forEach(s=>{if(s.type==="source")a.filter(_=>_.type==="ingestion"&&_.source===s.source).forEach(_=>{const f=`${s.id}-${_.id}`,p=l(`${f}-volume`),r=["low","medium","high"],S=r[Math.floor(p*r.length)];o.push({id:f,from:s.id,to:_.id,volume:S,health:s.status==="failed"?"error":s.status==="warning"?"warning":"healthy",animated:s.status!=="failed"}),s.connections.push(_.id),_.connections.push(s.id)});else if(s.type==="ingestion"){const j=a.find(_=>_.type==="source"&&_.source===s.source);(j==null?void 0:j.status)!=="failed"&&a.filter(f=>f.type==="transformation"&&f.source===s.source).slice(0,2).forEach(f=>{const p=`${s.id}-${f.id}`,r=l(`${p}-volume`),S=["medium","high"],N=S[Math.floor(r*S.length)];o.push({id:p,from:s.id,to:f.id,volume:N,health:s.status==="failed"?"error":s.status==="warning"?"warning":"healthy",animated:s.status!=="failed"}),s.connections.push(f.id),f.connections.push(s.id)})}else if(s.type==="transformation"){const j=a.find(f=>f.type==="ingestion"&&f.source===s.source),_=a.find(f=>f.type==="source"&&f.source===s.source);(_==null?void 0:_.status)!=="failed"&&(j==null?void 0:j.status)!=="failed"&&a.filter(p=>p.type==="enrichment"&&p.source===s.source).slice(0,2).forEach(p=>{const r=`${s.id}-${p.id}`;o.push({id:r,from:s.id,to:p.id,volume:"high",health:s.status==="failed"?"error":s.status==="warning"?"warning":"healthy",animated:s.status!=="failed"}),s.connections.push(p.id),p.connections.push(s.id)})}else if(s.type==="enrichment"){const j=a.find(p=>p.type==="source"&&p.source===s.source),_=a.find(p=>p.type==="ingestion"&&p.source===s.source),f=a.find(p=>p.type==="transformation"&&p.source===s.source);if((j==null?void 0:j.status)!=="failed"&&(_==null?void 0:_.status)!=="failed"&&(f==null?void 0:f.status)!=="failed"){const r={LinkedIn:["Threat Intelligence DB","MSTIC Data Lake","ML Training Data"],Twitter:["Real-time Dashboard","Alert System","Security Analytics Store"],Office365:["Compliance Archive","Security Analytics Store","Alert System"],AzureAD:["Security Analytics Store","Alert System","Threat Intelligence DB"],GitHub:["Threat Intelligence DB","Security Analytics Store","API Gateway"],ThreatIntel:["Alert System","Threat Intelligence DB","Real-time Dashboard"],Exchange:["Compliance Archive","Security Analytics Store","Alert System"],Teams:["Compliance Archive","Real-time Dashboard","Security Analytics Store"],SharePoint:["Compliance Archive","MSTIC Data Lake","Security Analytics Store"],PowerBI:["Real-time Dashboard","Security Analytics Store","API Gateway"]}[s.source]||["MSTIC Data Lake","Security Analytics Store","Alert System"];a.filter(N=>N.type==="destination"&&r.includes(N.name)).forEach(N=>{const te=`${s.id}-${N.id}`;o.push({id:te,from:s.id,to:N.id,volume:"high",health:s.status==="failed"?"error":s.status==="warning"?"warning":"healthy",animated:s.status!=="failed"}),s.connections.push(N.id),N.connections.push(s.id)})}}});const y=a.find(s=>s.id==="parquet-source-adls"),I=a.find(s=>s.id==="parquet-staging-pipeline"),Z=a.find(s=>s.name==="Kusto Analytics Engine");return y&&I&&Z&&(o.push({id:"parquet-to-staging",from:y.id,to:I.id,volume:"high",health:"healthy",animated:!0}),y.connections.push(I.id),I.connections.push(y.id),o.push({id:"staging-to-kusto",from:I.id,to:Z.id,volume:"medium",health:"healthy",animated:!0}),I.connections.push(Z.id),Z.connections.push(I.id)),{nodes:a,connections:o}},{nodes:M,connections:$}=b.useMemo(()=>{const a=R(),o=a.nodes.filter(d=>d.hasErrors);return console.log("Generated nodes:",{total:a.nodes.length,withErrors:o.length,errorNodes:o.map(d=>({id:d.id,name:d.name,status:d.status,errorCount:d.errorCount}))}),a},[]),c=b.useMemo(()=>v==="all"?$:$.filter(a=>{const o=M.find(u=>u.id===a.from),d=M.find(u=>u.id===a.to);return(o==null?void 0:o.source)===v||(d==null?void 0:d.source)===v?!0:(d==null?void 0:d.type)==="destination"?$.filter(g=>{var C;return g.to===d.id&&((C=M.find(y=>y.id===g.from))==null?void 0:C.type)==="enrichment"}).some(g=>{const C=M.find(y=>y.id===g.from);return(C==null?void 0:C.source)===v}):!1}),[M,$,v]),h=M,F=c;b.useEffect(()=>{D([]),P(null)},[v]),b.useEffect(()=>{const a=()=>{if(H&&i){let u=w.x,g=w.y;u+420>window.innerWidth-20&&(u=window.innerWidth-420-20),g+400>window.innerHeight-20&&(g=window.innerHeight-400-20),u<20&&(u=20),g<20&&(g=20),O({x:u,y:g})}};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[H,i,w]);const G=h.filter(a=>a.name.toLowerCase().includes(q.toLowerCase())||a.source&&a.source.toLowerCase().includes(q.toLowerCase())),ns=a=>{const o=new Set,d=[],u=g=>{if(o.has(g))return;o.add(g),d.push(g);const C=h.find(y=>y.id===g);C&&C.connections.forEach(y=>{o.has(y)||u(y)})};u(a),D(d)},is=(a,o)=>{V(!1);const d=420,u=400,g=o.clientX,C=o.clientY;let y=g+15,I=C+15;y+d>window.innerWidth-20&&(y=g-d-15),I+u>window.innerHeight-20&&(I=C-u-15),y<20&&(y=20),I<20&&(I=20),d>window.innerWidth-40&&(y=20),u>window.innerHeight-40&&(I=20),O({x:y,y:I}),P(a),m(!0),a.type==="source"&&a.source?(x(a.source),D([])):ns(a.id)},rs=()=>{const a=!A;if(V(a),!i)return;const o=a?800:420,d=a?600:400;let u=w.x,g=w.y;u+o>window.innerWidth-20&&(u=window.innerWidth-o-20),g+d>window.innerHeight-20&&(g=window.innerHeight-d-20),u<20&&(u=20),g<20&&(g=20),O({x:u,y:g})},os=a=>{console.log("Node double-clicked:",{id:a.id,name:a.name,status:a.status,hasErrors:a.hasErrors,errorCount:a.errorCount,hasPipelineData:!!a.pipelineData,pipelineDataKeys:a.pipelineData?Object.keys(a.pipelineData):[]}),(a.status==="failed"||a.status==="warning")&&a.pipelineData?(console.log("Opening error modal for node:",a.name),P(a),T(!0)):console.log("Not opening modal - conditions not met")},cs=a=>{if(z.length>0&&!z.includes(a.id))return"#444";if(v!=="all"){if(a.type==="source"&&a.source===v)return"#0078d4";if(a.type==="source"&&a.source!==v)return"#333";if(a.type!=="source"&&a.type!=="destination")if(a.source===v)switch(a.type){case"ingestion":return"#52c41a";case"transformation":return"#faad14";case"enrichment":return"#8b5cf6";default:return"#888"}else return"#333";if(a.type==="destination")return F.some(d=>d.to===a.id)?"#ef4444":"#333"}switch(a.type){case"source":return"#0078d4";case"ingestion":return"#52c41a";case"transformation":return"#faad14";case"enrichment":return"#8b5cf6";case"destination":return"#ef4444";default:return"#888"}},ls=a=>{const o=z.includes(a.from)&&z.includes(a.to);return{strokeWidth:a.volume==="high"?"3":a.volume==="medium"?"2":"1",stroke:a.health==="error"?"#ef4444":a.health==="warning"?"#faad14":"#52c41a",opacity:z.length>0?o?"1":"0.2":"0.8",strokeDasharray:a.volume==="low"?"5,5":"none",markerEnd:a.health==="error"?"url(#arrowhead-error)":a.health==="warning"?"url(#arrowhead-warning)":"url(#arrowhead-healthy)"}},ds=a=>{switch(a){case"healthy":return e.jsx(se,{size:16,className:t.statusHealthy});case"warning":return e.jsx(Q,{size:16,className:t.statusWarning});case"failed":return e.jsx(es,{size:16,className:t.statusFailed});case"processing":return e.jsx(K,{size:16,className:t.statusProcessing});default:return null}},ms=[...new Set(ae.map(a=>a.source))];return e.jsxs("div",{className:t.dataLineage,children:[e.jsx("div",{className:t.header,children:e.jsx("div",{className:t.headerContent,children:e.jsxs("div",{className:t.titleSection,children:[e.jsxs("h1",{className:t.title,children:["Interactive Data Lineage",e.jsx("button",{className:t.infoButton,onClick:()=>E(!0),title:"How does this system work?",children:e.jsx(We,{size:18})})]}),e.jsx("p",{className:t.subtitle,children:"Visualize and explore data flow through your threat intelligence pipelines"})]})})}),e.jsxs("div",{className:t.mainContent,children:[e.jsxs("div",{className:t.controls,children:[e.jsxs("div",{className:t.searchContainer,children:[e.jsx(fs,{className:t.searchIcon}),e.jsx("input",{type:"text",placeholder:"Search nodes and pipelines...",value:q,onChange:a=>X(a.target.value),className:t.searchInput})]}),e.jsxs("select",{value:v,onChange:a=>x(a.target.value),className:t.filterSelect,children:[e.jsx("option",{value:"all",children:"All Sources"}),ms.map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsx("button",{className:t.clearButton,onClick:()=>{P(null),D([]),x("all")},children:"Clear Selection"}),e.jsx("button",{className:t.clearButton,onClick:()=>{const a=M.find(o=>o.hasErrors&&o.pipelineData);a?(console.log("Test: Opening modal for",a.name),P(a),T(!0)):console.log("Test: No error nodes found")},style:{background:"#dc3545"},children:"Test Error Modal"})]}),v!=="all"&&e.jsxs("div",{className:t.filterIndicator,children:[e.jsxs("span",{children:["Showing data flow for: ",e.jsx("strong",{children:v})]}),e.jsx("button",{className:t.clearFilterButton,onClick:()=>x("all"),title:"Show all sources",children:"Ã—"})]}),e.jsx("div",{className:t.contentGrid,children:e.jsxs("div",{className:t.visualizationPanel,children:[e.jsxs("div",{className:t.legend,children:[e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendDot} ${t.source}`}),e.jsx("span",{children:"Data Sources"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendDot} ${t.ingestion}`}),e.jsx("span",{children:"Ingestion"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendDot} ${t.transformation}`}),e.jsx("span",{children:"Transformation"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendDot} ${t.enrichment}`}),e.jsx("span",{children:"Enrichment"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendDot} ${t.destination}`}),e.jsx("span",{children:"Destinations"})]}),e.jsx("div",{className:t.legendSeparator}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendProcessingBadge} ${t.streaming}`,children:"STRM"}),e.jsx("span",{children:"Streaming"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendProcessingBadge} ${t.microBatch}`,children:"Î¼BTCH"}),e.jsx("span",{children:"Micro-batch"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendProcessingBadge} ${t.batch}`,children:"BTCH"}),e.jsx("span",{children:"Batch"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendProcessingBadge} ${t.hybrid}`,children:"HYB"}),e.jsx("span",{children:"Hybrid"})]})]}),e.jsx("div",{className:t.lineageContainer,children:e.jsxs("svg",{ref:U,className:t.lineageSvg,viewBox:"0 0 1600 900",preserveAspectRatio:"xMidYMid meet",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"flowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(82, 196, 26, 0.1)"}),e.jsx("stop",{offset:"50%",stopColor:"rgba(82, 196, 26, 0.8)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(82, 196, 26, 0.1)"}),e.jsx("animateTransform",{attributeName:"gradientTransform",attributeType:"XML",type:"translate",values:"-100 0; 200 0; -100 0",dur:"3s",repeatCount:"indefinite"})]}),e.jsx("marker",{id:"arrowhead-healthy",markerWidth:"6",markerHeight:"4",refX:"5",refY:"2",orient:"auto",children:e.jsx("polygon",{points:"0 0, 6 2, 0 4",fill:"#52c41a"})}),e.jsx("marker",{id:"arrowhead-warning",markerWidth:"6",markerHeight:"4",refX:"5",refY:"2",orient:"auto",children:e.jsx("polygon",{points:"0 0, 6 2, 0 4",fill:"#faad14"})}),e.jsx("marker",{id:"arrowhead-error",markerWidth:"6",markerHeight:"4",refX:"5",refY:"2",orient:"auto",children:e.jsx("polygon",{points:"0 0, 6 2, 0 4",fill:"#ef4444"})}),e.jsxs("filter",{id:"glow",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("text",{x:"120",y:"50",className:t.sectionLabel,children:"Data Sources"}),e.jsx("text",{x:"420",y:"50",className:t.sectionLabel,children:"Ingestion"}),e.jsx("text",{x:"720",y:"50",className:t.sectionLabel,children:"Transformation"}),e.jsx("text",{x:"1020",y:"50",className:t.sectionLabel,children:"Enrichment"}),e.jsx("text",{x:"1320",y:"50",className:t.sectionLabel,children:"Destinations"}),F.filter(a=>{const o=G.find(u=>u.id===a.from),d=G.find(u=>u.id===a.to);return o&&d}).map(a=>{const o=G.find(g=>g.id===a.from),d=G.find(g=>g.id===a.to),u=ls(a);return e.jsxs("g",{children:[e.jsx("line",{x1:o.x+180,y1:o.y+22,x2:d.x-20,y2:d.y+22,stroke:u.stroke,strokeWidth:u.strokeWidth,opacity:u.opacity,strokeDasharray:u.strokeDasharray,markerEnd:u.markerEnd,className:t.connectionLine}),a.animated&&e.jsx("circle",{r:"3",fill:u.stroke,className:t.flowDot,children:e.jsx("animateMotion",{dur:"3s",repeatCount:"indefinite",path:`M${o.x+180},${o.y+22} L${d.x-20},${d.y+22}`})})]},a.id)}),G.map(a=>{const o=a.type==="source"&&v!=="all"&&a.source===v;return e.jsxs("g",{className:t.nodeGroup,onClick:d=>is(a,d),onDoubleClick:()=>os(a),onMouseEnter:()=>L(a.id),onMouseLeave:()=>L(null),children:[e.jsx("rect",{x:a.x,y:a.y,width:"180",height:"45",fill:cs(a),rx:"6",className:`${t.nodeRect} ${(i==null?void 0:i.id)===a.id?t.selectedNode:""}`,filter:(i==null?void 0:i.id)===a.id||o?"url(#glow)":"none",stroke:o?"#ffffff":"transparent",strokeWidth:o?"2":"0"}),e.jsx("text",{x:a.x+90,y:a.y+18,textAnchor:"middle",fill:"white",fontSize:"11",fontWeight:"600",className:t.nodeText,children:a.name.length>20?`${a.name.substring(0,17)}...`:a.name}),e.jsx("text",{x:a.x+90,y:a.y+30,textAnchor:"middle",fill:"#0078d4",fontSize:"8",fontWeight:"500",children:a.technology.length>30?a.technology.split(" ")[0]+(a.technology.includes("Azure")?" "+a.technology.split(" ")[1]:""):a.technology}),e.jsx("rect",{x:a.x+5,y:a.y+5,width:"28",height:"12",fill:a.processingMode==="streaming"?"#52c41a":a.processingMode==="micro-batch"?"#faad14":a.processingMode==="hybrid"?"#8b5cf6":"#0078d4",rx:"2"}),e.jsx("text",{x:a.x+19,y:a.y+13,textAnchor:"middle",fill:"white",fontSize:"6",fontWeight:"700",children:a.processingMode==="streaming"?"STRM":a.processingMode==="micro-batch"?"Î¼BTCH":a.processingMode==="hybrid"?"HYB":"BTCH"}),e.jsxs("text",{x:a.x+90,y:a.y+40,textAnchor:"middle",fill:"rgba(255,255,255,0.8)",fontSize:"9",className:t.nodeSubtext,children:[a.recordsPerSecond,"/s"]}),e.jsx("circle",{cx:a.x+160,cy:a.y+12,r:"5",fill:a.status==="healthy"?"#52c41a":a.status==="warning"?"#faad14":a.status==="failed"?"#ef4444":"#1890ff"}),a.hasErrors&&a.errorCount&&a.errorCount>0&&e.jsxs("g",{children:[e.jsx("circle",{cx:a.x+170,cy:a.y+35,r:"12",fill:"#ef4444",stroke:"#ffffff",strokeWidth:"2"}),e.jsx("text",{x:a.x+170,y:a.y+40,textAnchor:"middle",fill:"white",fontSize:"11",fontWeight:"700",children:a.errorCount>9?"9+":a.errorCount})]}),a.hasErrors&&e.jsx("rect",{x:a.x-3,y:a.y-3,width:"186",height:"51",fill:"none",stroke:a.status==="failed"?"#ef4444":"#faad14",strokeWidth:"3",rx:"8",className:t.errorBorder}),a.hasErrors&&B===a.id&&e.jsxs("g",{children:[e.jsx("rect",{x:a.x+20,y:a.y+55,width:"140",height:"20",fill:"rgba(0, 0, 0, 0.8)",rx:"4"}),e.jsx("text",{x:a.x+90,y:a.y+68,textAnchor:"middle",fill:"#faad14",fontSize:"10",fontWeight:"600",children:"Double-click for error details"})]})]},a.id)}),B&&G.map(a=>{var u;if(B!==a.id)return null;const o=a.x>1e3?a.x-210:a.x+190,d=a.y-10;return e.jsxs("g",{className:t.tooltip,children:[e.jsx("rect",{x:o,y:d,width:"240",height:"110",fill:"rgba(0,0,0,0.95)",rx:"6",stroke:"#555",strokeWidth:"1"}),e.jsx("text",{x:o+10,y:d+15,fill:"white",fontSize:"11",fontWeight:"600",children:a.name}),e.jsx("text",{x:o+10,y:d+28,fill:"#0078d4",fontSize:"9",fontWeight:"500",children:a.technology}),e.jsxs("text",{x:o+10,y:d+40,fill:"#ccc",fontSize:"9",children:["Processing: ",(u=a.processingMode)==null?void 0:u.toUpperCase()," | ",a.dataMovementTool]}),e.jsxs("text",{x:o+10,y:d+52,fill:"#ccc",fontSize:"9",children:["Records/sec: ",a.recordsPerSecond," | Avg Time: ",a.avgProcessingTime,"ms"]}),e.jsx("text",{x:o+10,y:d+64,fill:"#ccc",fontSize:"9",children:a.processingMode==="streaming"?`Latency: ${a.streamingLatency}`:a.processingMode==="batch"?`Frequency: ${a.batchFrequency}`:"Mode: Hybrid Processing"}),e.jsxs("text",{x:o+10,y:d+76,fill:"#ccc",fontSize:"9",children:["Format: ",a.dataFormat," | Quality: ",a.dataQuality,"%"]}),e.jsxs("text",{x:o+10,y:d+88,fill:"#ccc",fontSize:"9",children:["RG: ",a.resourceGroup.split("-").slice(-2).join("-")]}),e.jsx("text",{x:o+10,y:d+100,fill:"#52c41a",fontSize:"8",children:"Click for detailed tech specs â†’"})]},`tooltip-${a.id}`)})]})})]})}),H&&i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:t.popupOverlay,onClick:()=>m(!1)}),e.jsxs("div",{className:`${t.nodePopup} ${A?t.nodePopupExpanded:""}`,style:{left:`${w.x}px`,top:`${w.y}px`},children:[e.jsxs("div",{className:t.popupHeader,children:[e.jsxs("h3",{className:t.popupTitle,children:[i.type==="source"&&e.jsx(Qe,{size:18}),i.type==="ingestion"&&e.jsx(Ke,{size:18}),i.type==="transformation"&&e.jsx(Je,{size:18}),i.type==="enrichment"&&e.jsx(as,{size:18}),i.type==="destination"&&e.jsx(Xe,{size:18}),i.name]}),e.jsx("div",{className:t.popupActions,children:e.jsx("button",{className:t.popupButton,onClick:()=>m(!1),title:"Close",children:e.jsx(_s,{size:16})})})]}),e.jsxs("div",{className:t.popupContent,children:[e.jsxs("div",{className:t.quickInfo,children:[e.jsxs("div",{className:t.quickInfoItem,children:[e.jsx("span",{className:t.quickInfoLabel,children:"Status"}),e.jsx("div",{className:t.quickInfoValue,children:e.jsxs("span",{className:`${t.statusBadge} ${t[`status${i.status.charAt(0).toUpperCase()+i.status.slice(1)}`]}`,children:[ds(i.status),i.status]})})]}),e.jsxs("div",{className:t.quickInfoItem,children:[e.jsx("span",{className:t.quickInfoLabel,children:"Technology"}),e.jsxs("div",{className:t.quickInfoValue,children:[e.jsx(ss,{size:14}),i.technology]})]}),e.jsxs("div",{className:t.quickInfoItem,children:[e.jsx("span",{className:t.quickInfoLabel,children:"Throughput"}),e.jsxs("div",{className:t.quickInfoValue,children:[e.jsx(K,{size:14}),i.recordsPerSecond,"/s"]})]}),e.jsxs("div",{className:t.quickInfoItem,children:[e.jsx("span",{className:t.quickInfoLabel,children:"Processing Time"}),e.jsxs("div",{className:t.quickInfoValue,children:[e.jsx(J,{size:14}),i.avgProcessingTime,"ms"]})]})]}),e.jsxs("div",{className:t.metricGrid,children:[e.jsxs("div",{className:t.metricItem,children:[e.jsxs("p",{className:t.metricValue,children:[i.dataQuality,"%"]}),e.jsx("p",{className:t.metricLabel,children:"Data Quality"})]}),e.jsxs("div",{className:t.metricItem,children:[e.jsx("p",{className:t.metricValue,children:i.connections.length}),e.jsx("p",{className:t.metricLabel,children:"Connections"})]}),e.jsxs("div",{className:t.metricItem,children:[e.jsx("p",{className:t.metricValue,children:i.region}),e.jsx("p",{className:t.metricLabel,children:"Region"})]})]}),e.jsx("div",{className:t.expandButtonContainer,children:e.jsxs("button",{className:t.expandButton,onClick:rs,title:A?"Show less details":"Show more details",children:[A?e.jsx(xs,{size:14}):e.jsx(ys,{size:14}),A?"Less Details":"More Details"]})}),A&&e.jsxs("div",{className:t.expandedContent,children:[e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(ts,{size:16}),"Security & Authentication"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Authentication:"}),e.jsx("span",{className:t.detailValue,children:i.authentication})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Protocols:"}),e.jsx("div",{className:t.tagList,children:(le=i.protocols)==null?void 0:le.slice(0,3).map((a,o)=>e.jsx("span",{className:t.tag,children:a},o))})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(Ye,{size:16}),"Infrastructure"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Resource Group:"}),e.jsx("span",{className:t.detailValue,children:i.resourceGroup})]}),i.computeType&&e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Compute:"}),e.jsx("span",{className:t.detailValue,children:i.computeType})]}),i.storageType&&e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Storage:"}),e.jsx("span",{className:t.detailValue,children:i.storageType})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(ce,{size:16}),"Monitoring"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"App Insights:"}),e.jsx("span",{className:t.detailValue,children:(de=i.monitoring)==null?void 0:de.applicationInsights})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Log Analytics:"}),e.jsx("span",{className:t.detailValue,children:(me=i.monitoring)==null?void 0:me.logAnalyticsWorkspace})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(Q,{size:16}),"Dependencies"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Key Vault:"}),e.jsx("span",{className:t.detailValue,children:(ue=i.dependencies)==null?void 0:ue.keyVault})]}),((he=i.dependencies)==null?void 0:he.externalApis)&&i.dependencies.externalApis.length>0&&e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"External APIs:"}),e.jsx("div",{className:t.tagList,children:i.dependencies.externalApis.slice(0,2).map((a,o)=>e.jsx("span",{className:t.tag,children:a},o))})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(Ye,{size:16}),"Operational Information"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Owner:"}),e.jsx("span",{className:t.detailValue,children:(pe=i.operationalInfo)==null?void 0:pe.owner})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Escalation Path:"}),e.jsx("div",{className:t.tagList,children:(fe=(ge=i.operationalInfo)==null?void 0:ge.escalationPath)==null?void 0:fe.map((a,o)=>e.jsx("span",{className:t.tag,children:a},o))})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Maintenance Window:"}),e.jsx("span",{className:t.detailValue,children:(_e=i.operationalInfo)==null?void 0:_e.maintenanceWindow})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Criticality Level:"}),e.jsx("span",{className:t.detailValue,children:(xe=i.operationalInfo)==null?void 0:xe.criticalityLevel})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Data Classification:"}),e.jsx("span",{className:t.detailValue,children:(ye=i.operationalInfo)==null?void 0:ye.dataClassification})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Compliance Requirements:"}),e.jsx("div",{className:t.tagList,children:(be=(je=i.operationalInfo)==null?void 0:je.complianceRequirements)==null?void 0:be.map((a,o)=>e.jsx("span",{className:t.tag,children:a},o))})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(J,{size:16}),"SLA Metrics"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Uptime:"}),e.jsxs("span",{className:t.detailValue,children:[(ve=i.slaMetrics)==null?void 0:ve.uptime,"%"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Target Uptime:"}),e.jsxs("span",{className:t.detailValue,children:[(Ne=i.slaMetrics)==null?void 0:Ne.targetUptime,"%"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"MTTR:"}),e.jsxs("span",{className:t.detailValue,children:[(Se=i.slaMetrics)==null?void 0:Se.mttr," minutes"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"MTBF:"}),e.jsxs("span",{className:t.detailValue,children:[(we=i.slaMetrics)==null?void 0:we.mtbf," hours"]})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(ce,{size:16}),"Performance Metrics"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Avg Latency:"}),e.jsxs("span",{className:t.detailValue,children:[(Ce=i.performanceMetrics)==null?void 0:Ce.avgLatency,"ms"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"P95 Latency:"}),e.jsxs("span",{className:t.detailValue,children:[(Ie=i.performanceMetrics)==null?void 0:Ie.p95Latency,"ms"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Error Rate:"}),e.jsxs("span",{className:t.detailValue,children:[(Le=i.performanceMetrics)==null?void 0:Le.errorRate,"%"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Throughput:"}),e.jsxs("span",{className:t.detailValue,children:[(ke=i.performanceMetrics)==null?void 0:ke.throughputMbps," Mbps"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"CPU Utilization:"}),e.jsxs("span",{className:t.detailValue,children:[(Te=i.performanceMetrics)==null?void 0:Te.cpuUtilization,"%"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Memory Utilization:"}),e.jsxs("span",{className:t.detailValue,children:[(Ae=i.performanceMetrics)==null?void 0:Ae.memoryUtilization,"%"]})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(We,{size:16}),"Troubleshooting Resources"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Common Issues:"}),e.jsx("div",{className:t.tagList,children:(Pe=(Me=i.troubleshooting)==null?void 0:Me.commonIssues)==null?void 0:Pe.slice(0,2).map((a,o)=>e.jsx("span",{className:t.tag,children:a},o))})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Runbook URLs:"}),e.jsx("div",{className:t.linkList,children:(De=(ze=i.troubleshooting)==null?void 0:ze.runbookUrls)==null?void 0:De.map((a,o)=>e.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:t.link,children:["Runbook ",o+1]},o))})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Health Check Endpoints:"}),e.jsx("div",{className:t.linkList,children:($e=(Ee=i.troubleshooting)==null?void 0:Ee.healthCheckEndpoints)==null?void 0:$e.map((a,o)=>e.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:t.link,children:["Health Check ",o+1]},o))})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Sample Log Queries:"}),e.jsx("div",{className:t.codeSnippets,children:(He=(Be=i.troubleshooting)==null?void 0:Be.logQuerySamples)==null?void 0:He.map((a,o)=>e.jsx("code",{className:t.codeSnippet,children:a},o))})]})]})]})]}),(i.hasErrors||i.status==="failed"||i.status==="warning")&&e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"#1a1a1a",borderRadius:"8px",border:"1px solid #ef4444"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(Q,{size:16,style:{color:"#ef4444"}}),e.jsx("span",{style:{fontWeight:"600",color:"#ef4444"},children:i.errorCount?`${i.errorCount} Active Errors`:"System Issues Detected"})]}),((Re=i.pipelineData)==null?void 0:Re.currentError)&&e.jsxs("p",{style:{fontSize:"0.85rem",color:"#cccccc",margin:"0 0 0.75rem 0"},children:[i.pipelineData.currentError.errorMessage.slice(0,100),"..."]}),e.jsxs("button",{onClick:()=>{T(!0),m(!1)},style:{background:"#ef4444",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Q,{size:14}),"View Error Details"]})]}),e.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.8rem",color:"#888",textAlign:"center"},children:["Last updated: ",new Date(i.lastUpdate).toLocaleString()]})]})]})]}),k&&i&&i.pipelineData&&e.jsx(Ze,{isOpen:k,onClose:()=>T(!1),pipelineName:i.name,currentError:i.pipelineData.currentError,errorHistory:i.pipelineData.errorHistory||[],logReferences:i.pipelineData.logs||[],metricsHistory:i.pipelineData.metrics||[],impactAnalysis:i.pipelineData.impact,runbooks:i.pipelineData.runbooks||[],oncallTeam:((Ge=i.operationalInfo)==null?void 0:Ge.owner)||"MSTIC Data Engineering Team",slackChannel:"#mstic-incidents",teamsChannel:"MSTIC Operations",operationalData:{slaMetrics:i.slaMetrics,operationalInfo:i.operationalInfo,performanceMetrics:i.performanceMetrics,troubleshooting:i.troubleshooting,contactInfo:{primaryTeam:((qe=i.operationalInfo)==null?void 0:qe.owner)||"MSTIC Data Engineering Team",secondaryTeam:"MSTIC Platform Team",escalationContacts:[{name:"On-call Engineer",role:"Level 1 Support",email:"mstic-oncall@microsoft.com",phone:"+1-425-882-8080",slackHandle:"@mstic-oncall"},{name:"Senior Engineer",role:"Level 2 Support",email:"mstic-senior@microsoft.com",phone:"+1-425-882-8081",slackHandle:"@mstic-senior"},{name:"Engineering Manager",role:"Level 3 Escalation",email:"mstic-manager@microsoft.com",phone:"+1-425-882-8082",slackHandle:"@mstic-manager"}]},technology:{stack:i.technology,resourceGroup:i.resourceGroup,subscriptionId:i.subscriptionId,region:i.region}}}),e.jsxs("div",{className:t.summaryGrid,children:[e.jsxs("div",{className:t.summaryCard,children:[e.jsx("div",{className:t.summaryIcon,children:e.jsx(Qe,{size:24})}),e.jsxs("div",{className:t.summaryContent,children:[e.jsx("div",{className:t.summaryValue,children:h.filter(a=>a.type==="source").length}),e.jsx("div",{className:t.summaryLabel,children:"Data Sources"})]})]}),e.jsxs("div",{className:t.summaryCard,children:[e.jsx("div",{className:t.summaryIcon,children:e.jsx(Je,{size:24})}),e.jsxs("div",{className:t.summaryContent,children:[e.jsx("div",{className:t.summaryValue,children:h.filter(a=>["ingestion","transformation","enrichment"].includes(a.type)).length}),e.jsx("div",{className:t.summaryLabel,children:"Processing Pipelines"})]})]}),e.jsxs("div",{className:t.summaryCard,children:[e.jsx("div",{className:t.summaryIcon,children:e.jsx(Ke,{size:24})}),e.jsxs("div",{className:t.summaryContent,children:[e.jsx("div",{className:t.summaryValue,children:F.length}),e.jsx("div",{className:t.summaryLabel,children:"Data Flows"})]})]}),e.jsxs("div",{className:t.summaryCard,children:[e.jsx("div",{className:t.summaryIcon,children:e.jsx(Xe,{size:24})}),e.jsxs("div",{className:t.summaryContent,children:[e.jsx("div",{className:t.summaryValue,children:h.filter(a=>a.type==="destination").length}),e.jsx("div",{className:t.summaryLabel,children:"Destinations"})]})]})]})]}),k&&i&&i.pipelineData&&e.jsx(Ze,{isOpen:k,onClose:()=>T(!1),pipelineName:i.pipelineData.name,currentError:i.pipelineData.currentError,errorHistory:i.pipelineData.errorHistory||[],logReferences:i.pipelineData.logReferences||[],metricsHistory:i.pipelineData.metricsHistory||[],impactAnalysis:i.pipelineData.impactAnalysis,runbooks:i.pipelineData.runbooks||[],oncallTeam:i.pipelineData.oncallTeam||"MSTIC Data Engineering",slackChannel:i.pipelineData.slackChannel,teamsChannel:i.pipelineData.teamsChannel,dashboardUrl:i.pipelineData.dashboardUrl,grafanaUrl:i.pipelineData.grafanaUrl,healthCheckUrl:i.pipelineData.healthCheckUrl,operationalData:{slaMetrics:i.slaMetrics,operationalInfo:i.operationalInfo,performanceMetrics:i.performanceMetrics,troubleshooting:i.troubleshooting,technology:{stack:i.technology,resourceGroup:i.resourceGroup,region:i.region,subscriptionId:i.subscriptionId},contactInfo:{primaryTeam:((Oe=i.operationalInfo)==null?void 0:Oe.owner)||"MSTIC Data Engineering",escalationContacts:((Ue=(Ve=i.operationalInfo)==null?void 0:Ve.escalationPath)==null?void 0:Ue.map((a,o)=>({name:`${a} Contact`,role:a,email:`${a.toLowerCase().replace(/\s+/g,".")}@microsoft.com`,phone:o===0?"+1-555-0123":void 0,slackHandle:`@${a.toLowerCase().replace(/\s+/g,"")}`})))||[]}}}),e.jsx(js,{isOpen:Y,onClose:()=>E(!1),section:"dataLineage"})]})});ar.displayName="DataLineage";export{ar as default};
//# sourceMappingURL=DataLineage-BTU0FNFN.js.map
