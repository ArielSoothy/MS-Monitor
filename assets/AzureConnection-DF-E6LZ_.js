import{j as t}from"./index-DmF_wIl1.js";import{r as d}from"./charts-CVhI3LTv.js";import{a as o}from"./azureService-DXCUUKSM.js";import{a as C,D as m,O as g,q as u,s as v,P as q,z as b,Q as y,V as L}from"./icons-xX1ujmH_.js";import"./vendor-Csw2ODfV.js";import"./router-BUTKzT10.js";const T="_azureConnection_aq5xm_1",D="_header_aq5xm_9",A="_titleSection_aq5xm_17",E="_titleIcon_aq5xm_23",z="_statusCard_aq5xm_42",w="_statusHeader_aq5xm_50",V="_statusIcon_aq5xm_57",H="_statusContent_aq5xm_63",R="_statusLoading_aq5xm_67",G="_spinner_aq5xm_74",k="_statusConnected_aq5xm_80",P="_statusError_aq5xm_88",M="_statusIndicator_aq5xm_96",Q="_lastTest_aq5xm_101",B="_testButton_aq5xm_107",F="_buttonSpinner_aq5xm_133",K="_statsGrid_aq5xm_139",O="_statCard_aq5xm_146",X="_statIcon_aq5xm_156",$="_statContent_aq5xm_162",Y="_statValue_aq5xm_166",J="_statLabel_aq5xm_173",U="_setupSection_aq5xm_178",W="_stepsContainer_aq5xm_189",Z="_stepCard_aq5xm_195",tt="_stepActive_aq5xm_209",et="_stepCompleted_aq5xm_214",st="_stepHeader_aq5xm_218",at="_stepNumber_aq5xm_224",nt="_stepIcon_aq5xm_242",it="_stepTitle_aq5xm_247",ct="_stepStatus_aq5xm_264",ot="_completed_aq5xm_268",rt="_pending_aq5xm_274",lt="_stepDetails_aq5xm_280",dt="_detailsSection_aq5xm_296",mt="_errorSection_aq5xm_297",ut="_successSection_aq5xm_298",xt="_configGrid_aq5xm_311",_t="_configItem_aq5xm_317",pt="_configIcon_aq5xm_327",ht="_configValue_aq5xm_333",jt="_errorIcon_aq5xm_354",Ct="_errorHelp_aq5xm_372",gt="_successIcon_aq5xm_405",vt="_nextSteps_aq5xm_423",e={azureConnection:T,header:D,titleSection:A,titleIcon:E,statusCard:z,statusHeader:w,statusIcon:V,statusContent:H,statusLoading:R,spinner:G,statusConnected:k,statusError:P,statusIndicator:M,lastTest:Q,testButton:B,buttonSpinner:F,statsGrid:K,statCard:O,statIcon:X,statContent:$,statValue:Y,statLabel:J,setupSection:U,stepsContainer:W,stepCard:Z,stepActive:tt,stepCompleted:et,stepHeader:st,stepNumber:at,stepIcon:nt,stepTitle:it,stepStatus:ct,completed:ot,pending:rt,stepDetails:lt,detailsSection:dt,errorSection:mt,successSection:ut,configGrid:xt,configItem:_t,configIcon:pt,configValue:ht,errorIcon:jt,errorHelp:Ct,successIcon:gt,nextSteps:vt},yt=()=>{var p,h;const[s,r]=d.useState({isConnected:!1,isLoading:!1,error:null,lastTest:null}),[x,N]=d.useState(1),_=async()=>{var a,i,c;r(n=>({...n,isLoading:!0,error:null}));try{const n=await o.testConnection();let j;if(n)try{const l=await o.executeCustomQuery("show tables | count"),I=await o.executeCustomQuery("SecurityEvents | count"),f=await o.executeCustomQuery("ThreatIndicators | count");j={tables:((a=l[0])==null?void 0:a.Count)||0,totalRecords:(((i=I[0])==null?void 0:i.Count)||0)+(((c=f[0])==null?void 0:c.Count)||0),lastIngestion:new Date}}catch(l){console.log("Could not get database stats:",l)}r({isConnected:n,isLoading:!1,error:n?null:"Failed to connect to Azure Data Explorer",lastTest:new Date,databaseStats:j})}catch(n){r({isConnected:!1,isLoading:!1,error:n instanceof Error?n.message:"Connection failed",lastTest:new Date})}},S=[{id:1,title:"Azure Data Explorer Setup",description:"Create your ADX cluster and database",status:"completed",details:["Cluster: msmonitoradx.israelcentral.kusto.windows.net","Database: monitoringdb","Region: Israel Central","Retention: 2 days (cost-optimized for demo)"]},{id:2,title:"Database Schema Creation",description:"Create tables for security and pipeline data",status:(p=s.databaseStats)!=null&&p.tables?"completed":"pending",details:["SecurityEvents table for threat intelligence","ThreatIndicators for IOC correlation","PipelineHealth for monitoring metrics","PipelineMetrics for time-series data"]},{id:3,title:"Sample Data Ingestion",description:"Load realistic MSTIC-style security data",status:(h=s.databaseStats)!=null&&h.totalRecords?"completed":"pending",details:["Security events from various sources","Threat indicators and IOCs","Pipeline health metrics","Geographic threat distribution data"]},{id:4,title:"Live Connection Test",description:"Verify React app can query Azure Data Explorer",status:s.isConnected?"completed":"pending",details:["KQL query execution","Real-time data retrieval","Authentication validation","Error handling verification"]}];return d.useEffect(()=>{_()},[]),t.jsxs("div",{className:e.azureConnection,children:[t.jsxs("div",{className:e.header,children:[t.jsxs("div",{className:e.titleSection,children:[t.jsx(C,{className:e.titleIcon}),t.jsxs("div",{children:[t.jsx("h1",{children:"Azure Data Explorer Integration"}),t.jsx("p",{children:"Live connection to Microsoft MSTIC-style threat intelligence database"})]})]}),t.jsxs("div",{className:e.statusCard,children:[t.jsxs("div",{className:e.statusHeader,children:[t.jsx(m,{className:e.statusIcon}),t.jsx("span",{children:"Connection Status"})]}),t.jsxs("div",{className:e.statusContent,children:[s.isLoading?t.jsxs("div",{className:e.statusLoading,children:[t.jsx(g,{className:e.spinner}),t.jsx("span",{children:"Testing connection..."})]}):s.isConnected?t.jsxs("div",{className:e.statusConnected,children:[t.jsx(u,{className:e.statusIndicator}),t.jsx("span",{children:"Connected to Azure Data Explorer"})]}):t.jsxs("div",{className:e.statusError,children:[t.jsx(v,{className:e.statusIndicator}),t.jsx("span",{children:"Not Connected"})]}),s.lastTest&&t.jsxs("div",{className:e.lastTest,children:["Last tested: ",s.lastTest.toLocaleTimeString()]})]}),t.jsx("button",{className:e.testButton,onClick:_,disabled:s.isLoading,children:s.isLoading?t.jsxs(t.Fragment,{children:[t.jsx(g,{className:e.buttonSpinner}),"Testing..."]}):t.jsxs(t.Fragment,{children:[t.jsx(q,{}),"Test Connection"]})})]})]}),s.databaseStats&&t.jsxs("div",{className:e.statsGrid,children:[t.jsxs("div",{className:e.statCard,children:[t.jsx(m,{className:e.statIcon}),t.jsxs("div",{className:e.statContent,children:[t.jsx("div",{className:e.statValue,children:s.databaseStats.tables}),t.jsx("div",{className:e.statLabel,children:"Tables Created"})]})]}),t.jsxs("div",{className:e.statCard,children:[t.jsx(b,{className:e.statIcon}),t.jsxs("div",{className:e.statContent,children:[t.jsx("div",{className:e.statValue,children:s.databaseStats.totalRecords.toLocaleString()}),t.jsx("div",{className:e.statLabel,children:"Total Records"})]})]}),t.jsxs("div",{className:e.statCard,children:[t.jsx(y,{className:e.statIcon}),t.jsxs("div",{className:e.statContent,children:[t.jsx("div",{className:e.statValue,children:"Live"}),t.jsx("div",{className:e.statLabel,children:"Data Status"})]})]})]}),t.jsxs("div",{className:e.setupSection,children:[t.jsx("h2",{children:"Implementation Progress"}),t.jsx("div",{className:e.stepsContainer,children:S.map(a=>t.jsxs("div",{className:`${e.stepCard} ${a.status==="completed"?e.stepCompleted:e.stepPending} ${x===a.id?e.stepActive:""}`,onClick:()=>N(a.id),children:[t.jsxs("div",{className:e.stepHeader,children:[t.jsx("div",{className:e.stepNumber,children:a.status==="completed"?t.jsx(u,{className:e.stepIcon}):t.jsx("span",{children:a.id})}),t.jsxs("div",{className:e.stepTitle,children:[t.jsx("h3",{children:a.title}),t.jsx("p",{children:a.description})]}),t.jsx("div",{className:e.stepStatus,children:t.jsx("span",{className:a.status==="completed"?e.completed:e.pending,children:a.status==="completed"?"Completed":"Pending"})})]}),x===a.id&&t.jsx("div",{className:e.stepDetails,children:t.jsx("ul",{children:a.details.map((i,c)=>t.jsx("li",{children:i},c))})})]},a.id))})]}),t.jsxs("div",{className:e.detailsSection,children:[t.jsx("h2",{children:"Connection Configuration"}),t.jsxs("div",{className:e.configGrid,children:[t.jsxs("div",{className:e.configItem,children:[t.jsx(C,{className:e.configIcon}),t.jsxs("div",{children:[t.jsx("strong",{children:"Cluster Endpoint"}),t.jsx("div",{className:e.configValue,children:"msmonitoradx.israelcentral.kusto.windows.net"})]})]}),t.jsxs("div",{className:e.configItem,children:[t.jsx(m,{className:e.configIcon}),t.jsxs("div",{children:[t.jsx("strong",{children:"Database"}),t.jsx("div",{className:e.configValue,children:"monitoringdb"})]})]}),t.jsxs("div",{className:e.configItem,children:[t.jsx(L,{className:e.configIcon}),t.jsxs("div",{children:[t.jsx("strong",{children:"Authentication"}),t.jsx("div",{className:e.configValue,children:s.isConnected?"Azure AD (Demo Mode)":"Not Connected"})]})]})]})]}),s.error&&t.jsxs("div",{className:e.errorSection,children:[t.jsx(v,{className:e.errorIcon}),t.jsxs("div",{children:[t.jsx("h3",{children:"Connection Error"}),t.jsx("p",{children:s.error}),t.jsxs("div",{className:e.errorHelp,children:[t.jsx("strong",{children:"Next Steps:"}),t.jsxs("ol",{children:[t.jsx("li",{children:"Verify your Azure Data Explorer cluster is running"}),t.jsx("li",{children:"Check that tables are created using phase1-create-tables.kql"}),t.jsx("li",{children:"Ensure sample data is loaded using phase2-insert-data.kql"}),t.jsx("li",{children:"Verify network connectivity to Azure"})]})]})]})]}),s.isConnected&&t.jsxs("div",{className:e.successSection,children:[t.jsx(u,{className:e.successIcon}),t.jsxs("div",{children:[t.jsx("h3",{children:"ðŸŽ‰ Azure Data Explorer Successfully Connected!"}),t.jsx("p",{children:"Your React application is now connected to live Azure data. The dashboard will show real threat intelligence data from your ADX cluster."}),t.jsxs("div",{className:e.nextSteps,children:[t.jsx("strong",{children:"Ready for the MSTIC interview:"}),t.jsxs("ul",{children:[t.jsx("li",{children:"âœ… Live KQL queries executing against real Azure data"}),t.jsx("li",{children:"âœ… Real-time threat intelligence monitoring"}),t.jsx("li",{children:"âœ… Geographic threat distribution from live data"}),t.jsx("li",{children:"âœ… Pipeline health metrics from ADX"})]})]})]})]})]})};export{yt as default};
//# sourceMappingURL=AzureConnection-DF-E6LZ_.js.map
