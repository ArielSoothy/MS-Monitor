import{m as X,a as Y,j as e}from"./index-QRpErOtS.js";import{r as l,a as n,P as T,b as R,C as I,T as c,B as S,c as u,X as x,Y as f,d as g,L as J,e as Q}from"./charts-BdICjjZY.js";import{R as k,a as Z,b as ee,T as ae,A as P}from"./icons-CZRcmTJT.js";import"./vendor-Csw2ODfV.js";import"./router-BGDWP-Da.js";const te="_overview_1ppcr_1",se="_loadingContainer_1ppcr_7",re="_loadingIcon_1ppcr_16",ie="_spin_1ppcr_1",le="_header_1ppcr_27",ne="_headerContent_1ppcr_31",ce="_title_1ppcr_37",oe="_subtitle_1ppcr_44",de="_refreshInfo_1ppcr_50",he="_refreshIcon_1ppcr_58",me="_refreshText_1ppcr_63",pe="_metricsHeader_1ppcr_68",_e="_metricCard_1ppcr_75",ue="_metricHeader_1ppcr_89",xe="_metricIcon_1ppcr_95",fe="_healthy_1ppcr_102",ge="_warning_1ppcr_106",je="_metricTitle_1ppcr_110",ve="_metricValue_1ppcr_116",Ne="_metricSubtext_1ppcr_123",ye="_metricBreakdown_1ppcr_128",be="_statusBadge_1ppcr_135",Ce="_dashboardGrid_1ppcr_145",we="_chartCard_1ppcr_164",Te="_chartTitle_1ppcr_178",Re="_chartLegend_1ppcr_185",Ie="_legendItem_1ppcr_193",Se="_legendColor_1ppcr_201",ke="_failingPipelinesTable_1ppcr_208",Pe="_tableHeader_1ppcr_212",He="_tableRow_1ppcr_223",Le="_pipelineName_1ppcr_236",De="_name_1ppcr_242",Ae="_source_1ppcr_248",Me="_status_1ppcr_135",$e="_failed_1ppcr_272",Be="_processing_1ppcr_277",Ke="_failureRate_1ppcr_282",Fe="_lastRun_1ppcr_288",Ve="_team_1ppcr_293",Oe="_sla_1ppcr_299",Ge="_recentAlertsCard_1ppcr_305",Ue="_alertsList_1ppcr_312",We="_alertItem_1ppcr_318",ze="_critical_1ppcr_329",Ee="_high_1ppcr_333",qe="_medium_1ppcr_337",Xe="_low_1ppcr_341",Ye="_alertInfo_1ppcr_345",Je="_alertMessage_1ppcr_351",Qe="_alertTime_1ppcr_356",Ze="_alertSeverity_1ppcr_361",t={overview:te,loadingContainer:se,loadingIcon:re,spin:ie,header:le,headerContent:ne,title:ce,subtitle:oe,refreshInfo:de,refreshIcon:he,refreshText:me,metricsHeader:pe,metricCard:_e,metricHeader:ue,metricIcon:xe,healthy:fe,warning:ge,metricTitle:je,metricValue:ve,metricSubtext:Ne,metricBreakdown:ye,statusBadge:be,dashboardGrid:Ce,chartCard:we,chartTitle:Te,chartLegend:Re,legendItem:Ie,legendColor:Se,failingPipelinesTable:ke,tableHeader:Pe,tableRow:He,pipelineName:Le,name:De,source:Ae,status:Me,failed:$e,processing:Be,failureRate:Ke,lastRun:Fe,team:Ve,sla:Oe,recentAlertsCard:Ge,alertsList:Ue,alertItem:We,critical:ze,high:Ee,medium:qe,low:Xe,alertInfo:Ye,alertMessage:Je,alertTime:Qe,alertSeverity:Ze},ea=l.memo(()=>{const[i]=l.useState(X),[d]=l.useState(Y),[H,L]=l.useState(1247),[D,A]=l.useState(!0),[M,$]=l.useState(new Date),[B]=l.useState(()=>{const a=[],s=new Date;for(let r=23;r>=0;r--){const o=new Date(s.getTime()-r*60*60*1e3);a.push({time:o.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),rate:Math.floor(Math.random()*500)+800})}return a});l.useEffect(()=>{A(!1);const a=setInterval(()=>{L(s=>{const r=(Math.random()-.5)*100,o=Math.max(800,Math.min(1500,s+r));return Math.floor(o)}),$(new Date)},5e3);return()=>clearInterval(a)},[]);const K=l.useMemo(()=>({totalPipelines:i.length,healthyPipelines:i.filter(a=>a.status==="healthy").length,warningPipelines:i.filter(a=>a.status==="warning").length,failedPipelines:i.filter(a=>a.status==="failed").length,processingPipelines:i.filter(a=>a.status==="processing").length}),[i]),{totalPipelines:j,healthyPipelines:h,warningPipelines:m,failedPipelines:v,processingPipelines:p}=K,F=d.filter(a=>!a.resolved).length,V=d.filter(a=>!a.resolved&&a.severity==="critical").length,O=d.filter(a=>!a.resolved&&(a.severity==="high"||a.severity==="medium")).length,N=Math.round((h*100+m*70+p*85)/j),_=[{name:"Healthy",value:h,color:"#52c41a"},{name:"Warning",value:m,color:"#faad14"},{name:"Failed",value:v,color:"#f5222d"},{name:"Processing",value:p,color:"#1890ff"}],G=i.filter(a=>a.status==="failed"||a.status==="warning").sort((a,s)=>s.failureRate-a.failureRate).slice(0,5),U=i.reduce((a,s)=>{const r=s.ownerTeam||"Unknown";return a[r]||(a[r]={total:0,healthy:0,failed:0,warning:0}),a[r].total++,a[r][s.status]++,a},{}),W=Object.entries(U).map(([a,s])=>({team:a,healthPercentage:Math.round(s.healthy/s.total*100),total:s.total,healthy:s.healthy,failed:s.failed,warning:s.warning})).sort((a,s)=>s.healthPercentage-a.healthPercentage),z=i.reduce((a,s)=>{const r=s.dataClassification||"Unknown";return a[r]||(a[r]={total:0,healthy:0,failed:0}),a[r].total++,s.status==="healthy"&&a[r].healthy++,s.status==="failed"&&a[r].failed++,a},{}),E=Object.entries(z).map(([a,s])=>({name:a,total:s.total,healthy:s.healthy,failed:s.failed,healthPercentage:Math.round(s.healthy/s.total*100)})),y=i.filter(a=>{const s=a.slaRequirement||60,r=new Date(a.lastRun);return(new Date().getTime()-r.getTime())/(1e3*60)>s&&a.status!=="processing"}),b=Math.round((i.length-y.length)/i.length*100),q=i.reduce((a,s)=>{const r=s.region||"Unknown";return a[r]||(a[r]={total:0,healthy:0,failed:0}),a[r].total++,s.status==="healthy"&&a[r].healthy++,s.status==="failed"&&a[r].failed++,a},{}),C=Object.entries(q).map(([a,s])=>({region:a,total:s.total,healthy:s.healthy,failed:s.failed,healthPercentage:Math.round(s.healthy/s.total*100)})),w=a=>a>=90?"#52c41a":a>=75?"#faad14":a>=60?"#ff7a45":"#f5222d";return D?e.jsx("div",{className:t.overview,children:e.jsxs("div",{className:t.loadingContainer,children:[e.jsx(k,{className:t.loadingIcon}),e.jsx("span",{children:"Loading dashboard..."})]})}):e.jsxs("div",{className:t.overview,children:[e.jsx("div",{className:t.header,children:e.jsxs("div",{className:t.headerContent,children:[e.jsxs("div",{children:[e.jsx("h1",{className:t.title,children:"Threat Intelligence Pipeline Dashboard"}),e.jsx("p",{className:t.subtitle,children:"Real-time monitoring and analytics"})]}),e.jsxs("div",{className:t.refreshInfo,children:[e.jsx(k,{className:t.refreshIcon}),e.jsxs("span",{className:t.refreshText,children:["Last updated: ",M.toLocaleTimeString()]})]})]})}),e.jsxs("div",{className:t.metricsHeader,children:[e.jsxs("div",{className:t.metricCard,children:[e.jsxs("div",{className:t.metricHeader,children:[e.jsx(Z,{className:t.metricIcon}),e.jsx("span",{className:t.metricTitle,children:"Total Pipelines"})]}),e.jsx("div",{className:t.metricValue,children:j}),e.jsxs("div",{className:t.metricBreakdown,children:[e.jsxs("span",{className:t.statusBadge,style:{backgroundColor:"#52c41a"},children:[h," Healthy"]}),e.jsxs("span",{className:t.statusBadge,style:{backgroundColor:"#faad14"},children:[m," Warning"]}),e.jsxs("span",{className:t.statusBadge,style:{backgroundColor:"#f5222d"},children:[v," Failed"]}),e.jsxs("span",{className:t.statusBadge,style:{backgroundColor:"#1890ff"},children:[p," Processing"]})]})]}),e.jsxs("div",{className:t.metricCard,children:[e.jsxs("div",{className:t.metricHeader,children:[e.jsx(ee,{className:t.metricIcon}),e.jsx("span",{className:t.metricTitle,children:"Ingestion Rate"})]}),e.jsx("div",{className:t.metricValue,children:H.toLocaleString()}),e.jsx("div",{className:t.metricSubtext,children:"files/hour"})]}),e.jsxs("div",{className:t.metricCard,children:[e.jsxs("div",{className:t.metricHeader,children:[e.jsx(ae,{className:`${t.metricIcon} ${t.warning}`}),e.jsx("span",{className:t.metricTitle,children:"Active Alerts"})]}),e.jsx("div",{className:t.metricValue,children:F}),e.jsxs("div",{className:t.metricSubtext,children:[V," critical, ",O," warnings"]})]}),e.jsxs("div",{className:t.metricCard,children:[e.jsxs("div",{className:t.metricHeader,children:[e.jsx(P,{className:t.metricIcon}),e.jsx("span",{className:t.metricTitle,children:"System Health"})]}),e.jsxs("div",{className:t.metricValue,style:{color:w(N)},children:[N,"%"]}),e.jsx("div",{className:t.metricSubtext,children:"Overall system health"})]}),e.jsxs("div",{className:t.metricCard,children:[e.jsxs("div",{className:t.metricHeader,children:[e.jsx(P,{className:t.metricIcon}),e.jsx("span",{className:t.metricTitle,children:"SLA Compliance"})]}),e.jsxs("div",{className:t.metricValue,style:{color:w(b)},children:[b,"%"]}),e.jsxs("div",{className:t.metricSubtext,children:[y.length," SLA breaches"]})]})]}),e.jsxs("div",{className:t.dashboardGrid,children:[e.jsxs("div",{className:t.chartCard,children:[e.jsx("h3",{className:t.chartTitle,children:"Pipeline Status Distribution"}),e.jsx(n,{width:"100%",height:300,children:e.jsxs(T,{children:[e.jsx(R,{data:_,cx:"50%",cy:"50%",innerRadius:80,outerRadius:120,paddingAngle:2,dataKey:"value",children:_.map((a,s)=>e.jsx(I,{fill:a.color},`cell-${s}`))}),e.jsx(c,{formatter:(a,s)=>[`${a} pipelines`,s],contentStyle:{backgroundColor:"#252526",border:"1px solid #333",borderRadius:"6px"}})]})}),e.jsx("div",{className:t.chartLegend,children:_.map((a,s)=>e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:t.legendColor,style:{backgroundColor:a.color}}),e.jsxs("span",{children:[a.name,": ",a.value]})]},s))})]}),e.jsxs("div",{className:t.chartCard,children:[e.jsx("h3",{className:t.chartTitle,children:"Team Health Performance"}),e.jsx(n,{width:"100%",height:300,children:e.jsxs(S,{data:W.slice(0,6),layout:"horizontal",children:[e.jsx(u,{strokeDasharray:"3 3",stroke:"#333"}),e.jsx(x,{type:"number",tick:{fill:"#ccc"},domain:[0,100]}),e.jsx(f,{type:"category",dataKey:"team",tick:{fill:"#ccc",fontSize:11},width:100}),e.jsx(c,{formatter:(a,s)=>s==="healthPercentage"?[`${a}%`,"Health Score"]:[a,s],labelFormatter:a=>`Team: ${a}`,contentStyle:{backgroundColor:"#252526",border:"1px solid #333",borderRadius:"6px"}}),e.jsx(g,{dataKey:"healthPercentage",fill:"#52c41a",radius:[0,4,4,0]})]})})]}),e.jsxs("div",{className:t.chartCard,children:[e.jsx("h3",{className:t.chartTitle,children:"Data Classification Status"}),e.jsx(n,{width:"100%",height:300,children:e.jsxs(S,{data:E,children:[e.jsx(u,{strokeDasharray:"3 3",stroke:"#333"}),e.jsx(x,{dataKey:"name",tick:{fill:"#ccc",fontSize:11},angle:-45,textAnchor:"end",height:80}),e.jsx(f,{tick:{fill:"#ccc"}}),e.jsx(c,{formatter:(a,s)=>s==="healthy"?[`${a} pipelines`,"Healthy"]:s==="failed"?[`${a} pipelines`,"Failed"]:[a,s],contentStyle:{backgroundColor:"#252526",border:"1px solid #333",borderRadius:"6px"}}),e.jsx(g,{dataKey:"healthy",stackId:"a",fill:"#52c41a"}),e.jsx(g,{dataKey:"failed",stackId:"a",fill:"#f5222d"})]})})]}),e.jsxs("div",{className:t.chartCard,children:[e.jsx("h3",{className:t.chartTitle,children:"Ingestion Rate (Last 24 Hours)"}),e.jsx(n,{width:"100%",height:300,children:e.jsxs(J,{data:B,children:[e.jsx(u,{strokeDasharray:"3 3",stroke:"#333"}),e.jsx(x,{dataKey:"time",tick:{fill:"#ccc",fontSize:11},interval:2}),e.jsx(f,{tick:{fill:"#ccc"},domain:["dataMin - 50","dataMax + 50"]}),e.jsx(c,{labelFormatter:a=>`Time: ${a}`,formatter:a=>[`${a} files/hour`,"Ingestion Rate"],contentStyle:{backgroundColor:"#252526",border:"1px solid #333",borderRadius:"6px"}}),e.jsx(Q,{type:"monotone",dataKey:"rate",stroke:"#1890ff",strokeWidth:2,dot:{fill:"#1890ff",strokeWidth:0,r:3},activeDot:{r:5,stroke:"#1890ff",strokeWidth:2}})]})})]}),e.jsxs("div",{className:t.chartCard,children:[e.jsx("h3",{className:t.chartTitle,children:"Regional Pipeline Distribution"}),e.jsx(n,{width:"100%",height:300,children:e.jsxs(T,{children:[e.jsx(R,{data:C,cx:"50%",cy:"50%",outerRadius:100,dataKey:"total",label:({region:a,total:s})=>`${a}: ${s}`,children:C.map((a,s)=>e.jsx(I,{fill:["#1890ff","#52c41a","#faad14","#f5222d","#722ed1"][s%5]},`cell-${s}`))}),e.jsx(c,{formatter:(a,s,r)=>[`${a} pipelines (${r.payload.healthPercentage}% healthy)`,r.payload.region],contentStyle:{backgroundColor:"#252526",border:"1px solid #333",borderRadius:"6px"}})]})})]}),e.jsxs("div",{className:t.chartCard,children:[e.jsx("h3",{className:t.chartTitle,children:"Top Failing Pipelines"}),e.jsxs("div",{className:t.failingPipelinesTable,children:[e.jsxs("div",{className:t.tableHeader,children:[e.jsx("span",{children:"Pipeline"}),e.jsx("span",{children:"Team"}),e.jsx("span",{children:"Status"}),e.jsx("span",{children:"Failure Rate"}),e.jsx("span",{children:"SLA"})]}),G.map(a=>e.jsxs("div",{className:t.tableRow,children:[e.jsxs("div",{className:t.pipelineName,children:[e.jsx("span",{className:t.name,children:a.name}),e.jsx("span",{className:t.source,children:a.source})]}),e.jsx("span",{className:t.team,children:a.ownerTeam}),e.jsx("span",{className:`${t.status} ${t[a.status]}`,children:a.status}),e.jsxs("span",{className:t.failureRate,children:[a.failureRate.toFixed(1),"%"]}),e.jsxs("span",{className:t.sla,children:[a.slaRequirement,"m"]})]},a.id))]})]})]})]})});ea.displayName="Overview";export{ea as default};
//# sourceMappingURL=Overview-DJlTkTqq.js.map
