import{m as O,a as E,j as e}from"./index-CBMC5bpf.js";import{r as i,a as c,P as U,b as q,C as S,T as o,B as T,c as _,X as f,Y as j,d as p,L as X,e as Y}from"./charts-BdICjjZY.js";import{R,a as J,b as Q,T as Z,A as I}from"./icons-CZRcmTJT.js";import"./vendor-Csw2ODfV.js";import"./router-CzMViovD.js";const ee="_overview_16gox_1",ae="_loadingContainer_16gox_7",se="_loadingIcon_16gox_16",te="_spin_16gox_1",re="_header_16gox_27",le="_headerContent_16gox_31",ie="_title_16gox_37",ne="_subtitle_16gox_44",ce="_refreshInfo_16gox_50",oe="_refreshIcon_16gox_58",de="_refreshText_16gox_63",he="_metricsHeader_16gox_68",me="_metricCard_16gox_75",xe="_metricHeader_16gox_89",ge="_metricIcon_16gox_95",ue="_healthy_16gox_102",_e="_warning_16gox_106",fe="_metricTitle_16gox_110",je="_metricValue_16gox_116",pe="_metricSubtext_16gox_123",ve="_metricBreakdown_16gox_128",Ne="_statusBadge_16gox_135",ye="_dashboardGrid_16gox_145",be="_chartCard_16gox_164",Ce="_chartTitle_16gox_178",we="_chartSubtitle_16gox_185",Se="_chartLegend_16gox_193",Te="_legendItem_16gox_201",Re="_legendColor_16gox_209",Ie="_failingPipelinesTable_16gox_216",ke="_tableHeader_16gox_220",Pe="_tableRow_16gox_231",He="_pipelineName_16gox_244",Le="_name_16gox_250",Ae="_source_16gox_256",De="_status_16gox_135",Me="_failed_16gox_280",Fe="_processing_16gox_285",Be="_failureRate_16gox_290",$e="_lastRun_16gox_296",ze="_team_16gox_301",Ke="_sla_16gox_307",Ve="_recentAlertsCard_16gox_313",We="_alertsList_16gox_320",Ge="_alertItem_16gox_326",Oe="_critical_16gox_337",Ee="_high_16gox_341",Ue="_medium_16gox_345",qe="_low_16gox_349",Xe="_alertInfo_16gox_353",Ye="_alertMessage_16gox_359",Je="_alertTime_16gox_364",Qe="_alertSeverity_16gox_369",s={overview:ee,loadingContainer:ae,loadingIcon:se,spin:te,header:re,headerContent:le,title:ie,subtitle:ne,refreshInfo:ce,refreshIcon:oe,refreshText:de,metricsHeader:he,metricCard:me,metricHeader:xe,metricIcon:ge,healthy:ue,warning:_e,metricTitle:fe,metricValue:je,metricSubtext:pe,metricBreakdown:ve,statusBadge:Ne,dashboardGrid:ye,chartCard:be,chartTitle:Ce,chartSubtitle:we,chartLegend:Se,legendItem:Te,legendColor:Re,failingPipelinesTable:Ie,tableHeader:ke,tableRow:Pe,pipelineName:He,name:Le,source:Ae,status:De,failed:Me,processing:Fe,failureRate:Be,lastRun:$e,team:ze,sla:Ke,recentAlertsCard:Ve,alertsList:We,alertItem:Ge,critical:Oe,high:Ee,medium:Ue,low:qe,alertInfo:Xe,alertMessage:Ye,alertTime:Je,alertSeverity:Qe},Ze=i.memo(()=>{const[l]=i.useState(O),[d]=i.useState(E),[k,P]=i.useState(1247),[H,L]=i.useState(!0),[A,D]=i.useState(new Date),[M]=i.useState(()=>{const a=[],t=new Date;for(let r=23;r>=0;r--){const n=new Date(t.getTime()-r*60*60*1e3);a.push({time:n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),rate:Math.floor(Math.random()*500)+800})}return a});i.useEffect(()=>{L(!1);const a=setInterval(()=>{P(t=>{const r=(Math.random()-.5)*100,n=Math.max(800,Math.min(1500,t+r));return Math.floor(n)}),D(new Date)},5e3);return()=>clearInterval(a)},[]);const F=i.useMemo(()=>({totalPipelines:l.length,healthyPipelines:l.filter(a=>a.status==="healthy").length,warningPipelines:l.filter(a=>a.status==="warning").length,failedPipelines:l.filter(a=>a.status==="failed").length,processingPipelines:l.filter(a=>a.status==="processing").length}),[l]),{totalPipelines:v,healthyPipelines:h,warningPipelines:m,failedPipelines:N,processingPipelines:x}=F,B=d.filter(a=>!a.resolved).length,$=d.filter(a=>!a.resolved&&a.severity==="critical").length,z=d.filter(a=>!a.resolved&&(a.severity==="high"||a.severity==="medium")).length,y=Math.round((h*100+m*70+x*85)/v),g=[{name:"Healthy",value:h,color:"#52c41a"},{name:"Warning",value:m,color:"#faad14"},{name:"Failed",value:N,color:"#f5222d"},{name:"Processing",value:x,color:"#1890ff"}],K=l.filter(a=>a.status==="failed"||a.status==="warning").sort((a,t)=>t.failureRate-a.failureRate).slice(0,5),V=l.reduce((a,t)=>{const r=t.ownerTeam||"Unknown";return a[r]||(a[r]={total:0,healthy:0,failed:0,warning:0,processing:0,avgFailureRate:0,totalFailureRate:0}),a[r].total++,a[r][t.status]++,a[r].totalFailureRate+=t.failureRate,a},{}),u=Object.entries(V).map(([a,t])=>{const r=Math.round(t.healthy/t.total*100),n=Math.round(t.totalFailureRate/t.total*100)/100;return{team:a.length>15?a.substring(0,15)+"...":a,fullTeam:a,healthPercentage:r,avgFailureRate:n,total:t.total,healthy:t.healthy,failed:t.failed,warning:t.warning,processing:t.processing}}).filter(a=>a.total>=3).sort((a,t)=>t.healthPercentage-a.healthPercentage).slice(0,8),W=l.reduce((a,t)=>{const r=t.dataClassification||"Unknown";return a[r]||(a[r]={total:0,healthy:0,failed:0}),a[r].total++,t.status==="healthy"&&a[r].healthy++,t.status==="failed"&&a[r].failed++,a},{}),G=Object.entries(W).map(([a,t])=>({name:a,total:t.total,healthy:t.healthy,failed:t.failed,healthPercentage:Math.round(t.healthy/t.total*100)})),b=l.filter(a=>{const t=a.slaRequirement||60,r=new Date(a.lastRun);return(new Date().getTime()-r.getTime())/(1e3*60)>t&&a.status!=="processing"}),C=Math.round((l.length-b.length)/l.length*100),w=a=>a>=90?"#52c41a":a>=75?"#faad14":a>=60?"#ff7a45":"#f5222d";return H?e.jsx("div",{className:s.overview,children:e.jsxs("div",{className:s.loadingContainer,children:[e.jsx(R,{className:s.loadingIcon}),e.jsx("span",{children:"Loading dashboard..."})]})}):e.jsxs("div",{className:s.overview,children:[e.jsx("div",{className:s.header,children:e.jsxs("div",{className:s.headerContent,children:[e.jsxs("div",{children:[e.jsx("h1",{className:s.title,children:"Threat Intelligence Pipeline Dashboard"}),e.jsx("p",{className:s.subtitle,children:"Real-time monitoring and analytics"})]}),e.jsxs("div",{className:s.refreshInfo,children:[e.jsx(R,{className:s.refreshIcon}),e.jsxs("span",{className:s.refreshText,children:["Last updated: ",A.toLocaleTimeString()]})]})]})}),e.jsxs("div",{className:s.metricsHeader,children:[e.jsxs("div",{className:s.metricCard,children:[e.jsxs("div",{className:s.metricHeader,children:[e.jsx(J,{className:s.metricIcon}),e.jsx("span",{className:s.metricTitle,children:"Total Pipelines"})]}),e.jsx("div",{className:s.metricValue,children:v}),e.jsxs("div",{className:s.metricBreakdown,children:[e.jsxs("span",{className:s.statusBadge,style:{backgroundColor:"#52c41a"},children:[h," Healthy"]}),e.jsxs("span",{className:s.statusBadge,style:{backgroundColor:"#faad14"},children:[m," Warning"]}),e.jsxs("span",{className:s.statusBadge,style:{backgroundColor:"#f5222d"},children:[N," Failed"]}),e.jsxs("span",{className:s.statusBadge,style:{backgroundColor:"#1890ff"},children:[x," Processing"]})]})]}),e.jsxs("div",{className:s.metricCard,children:[e.jsxs("div",{className:s.metricHeader,children:[e.jsx(Q,{className:s.metricIcon}),e.jsx("span",{className:s.metricTitle,children:"Ingestion Rate"})]}),e.jsx("div",{className:s.metricValue,children:k.toLocaleString()}),e.jsx("div",{className:s.metricSubtext,children:"files/hour"})]}),e.jsxs("div",{className:s.metricCard,children:[e.jsxs("div",{className:s.metricHeader,children:[e.jsx(Z,{className:`${s.metricIcon} ${s.warning}`}),e.jsx("span",{className:s.metricTitle,children:"Active Alerts"})]}),e.jsx("div",{className:s.metricValue,children:B}),e.jsxs("div",{className:s.metricSubtext,children:[$," critical, ",z," warnings"]})]}),e.jsxs("div",{className:s.metricCard,children:[e.jsxs("div",{className:s.metricHeader,children:[e.jsx(I,{className:s.metricIcon}),e.jsx("span",{className:s.metricTitle,children:"System Health"})]}),e.jsxs("div",{className:s.metricValue,style:{color:w(y)},children:[y,"%"]}),e.jsx("div",{className:s.metricSubtext,children:"Overall system health"})]}),e.jsxs("div",{className:s.metricCard,children:[e.jsxs("div",{className:s.metricHeader,children:[e.jsx(I,{className:s.metricIcon}),e.jsx("span",{className:s.metricTitle,children:"SLA Compliance"})]}),e.jsxs("div",{className:s.metricValue,style:{color:w(C)},children:[C,"%"]}),e.jsxs("div",{className:s.metricSubtext,children:[b.length," SLA breaches"]})]})]}),e.jsxs("div",{className:s.dashboardGrid,children:[e.jsxs("div",{className:s.chartCard,children:[e.jsx("h3",{className:s.chartTitle,children:"Pipeline Status Distribution"}),e.jsx(c,{width:"100%",height:300,children:e.jsxs(U,{children:[e.jsx(q,{data:g,cx:"50%",cy:"50%",innerRadius:80,outerRadius:120,paddingAngle:2,dataKey:"value",children:g.map((a,t)=>e.jsx(S,{fill:a.color},`cell-${t}`))}),e.jsx(o,{formatter:(a,t)=>[`${a} pipelines`,t],contentStyle:{backgroundColor:"#252526",border:"1px solid #333",borderRadius:"6px"}})]})}),e.jsx("div",{className:s.chartLegend,children:g.map((a,t)=>e.jsxs("div",{className:s.legendItem,children:[e.jsx("div",{className:s.legendColor,style:{backgroundColor:a.color}}),e.jsxs("span",{children:[a.name,": ",a.value]})]},t))})]}),e.jsxs("div",{className:s.chartCard,children:[e.jsxs("h3",{className:s.chartTitle,children:["Team Health Performance",e.jsx("span",{className:s.chartSubtitle,children:"Health Score by Team (min. 3 pipelines)"})]}),e.jsx(c,{width:"100%",height:320,children:e.jsxs(T,{data:u,layout:"horizontal",margin:{top:5,right:30,left:120,bottom:5},children:[e.jsx(_,{strokeDasharray:"3 3",stroke:"#333"}),e.jsx(f,{type:"number",tick:{fill:"#ccc",fontSize:12},domain:[0,100],tickFormatter:a=>`${a}%`}),e.jsx(j,{type:"category",dataKey:"team",tick:{fill:"#ccc",fontSize:10},width:115}),e.jsx(o,{formatter:(a,t)=>t==="healthPercentage"?[`${a}%`,"Health Score"]:[a,t],labelFormatter:a=>{const t=u.find(r=>r.team===a);return t?`Team: ${t.fullTeam}`:`Team: ${a}`},contentStyle:{backgroundColor:"#252526",border:"1px solid #333",borderRadius:"6px"},content:({active:a,payload:t})=>{if(a&&t&&t[0]){const r=t[0].payload;return e.jsxs("div",{style:{backgroundColor:"#252526",border:"1px solid #333",borderRadius:"6px",padding:"8px"},children:[e.jsx("p",{style:{color:"#fff",margin:0,fontWeight:"bold"},children:r.fullTeam}),e.jsxs("p",{style:{color:"#52c41a",margin:"4px 0"},children:["Health Score: ",r.healthPercentage,"%"]}),e.jsxs("p",{style:{color:"#ccc",margin:"2px 0",fontSize:"12px"},children:["Total Pipelines: ",r.total]}),e.jsxs("p",{style:{color:"#52c41a",margin:"2px 0",fontSize:"12px"},children:["Healthy: ",r.healthy]}),e.jsxs("p",{style:{color:"#faad14",margin:"2px 0",fontSize:"12px"},children:["Warning: ",r.warning]}),e.jsxs("p",{style:{color:"#f5222d",margin:"2px 0",fontSize:"12px"},children:["Failed: ",r.failed]}),e.jsxs("p",{style:{color:"#1890ff",margin:"2px 0",fontSize:"12px"},children:["Processing: ",r.processing]})]})}return null}}),e.jsx(p,{dataKey:"healthPercentage",radius:[0,4,4,0],children:u.map((a,t)=>e.jsx(S,{fill:a.healthPercentage>=90?"#52c41a":a.healthPercentage>=75?"#faad14":a.healthPercentage>=60?"#ff7a45":"#f5222d"},`cell-${t}`))})]})}),e.jsxs("div",{className:s.teamHealthLegend,children:[e.jsxs("div",{className:s.legendItem,children:[e.jsx("div",{className:s.legendColor,style:{backgroundColor:"#52c41a"}}),e.jsx("span",{children:"Excellent (90%+)"})]}),e.jsxs("div",{className:s.legendItem,children:[e.jsx("div",{className:s.legendColor,style:{backgroundColor:"#faad14"}}),e.jsx("span",{children:"Good (75-89%)"})]}),e.jsxs("div",{className:s.legendItem,children:[e.jsx("div",{className:s.legendColor,style:{backgroundColor:"#ff7a45"}}),e.jsx("span",{children:"Fair (60-74%)"})]}),e.jsxs("div",{className:s.legendItem,children:[e.jsx("div",{className:s.legendColor,style:{backgroundColor:"#f5222d"}}),e.jsx("span",{children:"Poor (<60%)"})]})]})]}),e.jsxs("div",{className:s.chartCard,children:[e.jsx("h3",{className:s.chartTitle,children:"Data Classification Status"}),e.jsx(c,{width:"100%",height:300,children:e.jsxs(T,{data:G,children:[e.jsx(_,{strokeDasharray:"3 3",stroke:"#333"}),e.jsx(f,{dataKey:"name",tick:{fill:"#ccc",fontSize:11},angle:-45,textAnchor:"end",height:80}),e.jsx(j,{tick:{fill:"#ccc"}}),e.jsx(o,{formatter:(a,t)=>t==="healthy"?[`${a} pipelines`,"Healthy"]:t==="failed"?[`${a} pipelines`,"Failed"]:[a,t],contentStyle:{backgroundColor:"#252526",border:"1px solid #333",borderRadius:"6px"}}),e.jsx(p,{dataKey:"healthy",stackId:"a",fill:"#52c41a"}),e.jsx(p,{dataKey:"failed",stackId:"a",fill:"#f5222d"})]})})]}),e.jsxs("div",{className:s.chartCard,children:[e.jsx("h3",{className:s.chartTitle,children:"Ingestion Rate (Last 24 Hours)"}),e.jsx(c,{width:"100%",height:300,children:e.jsxs(X,{data:M,children:[e.jsx(_,{strokeDasharray:"3 3",stroke:"#333"}),e.jsx(f,{dataKey:"time",tick:{fill:"#ccc",fontSize:11},interval:2}),e.jsx(j,{tick:{fill:"#ccc"},domain:["dataMin - 50","dataMax + 50"]}),e.jsx(o,{labelFormatter:a=>`Time: ${a}`,formatter:a=>[`${a} files/hour`,"Ingestion Rate"],contentStyle:{backgroundColor:"#252526",border:"1px solid #333",borderRadius:"6px"}}),e.jsx(Y,{type:"monotone",dataKey:"rate",stroke:"#1890ff",strokeWidth:2,dot:{fill:"#1890ff",strokeWidth:0,r:3},activeDot:{r:5,stroke:"#1890ff",strokeWidth:2}})]})})]}),e.jsxs("div",{className:s.chartCard,children:[e.jsx("h3",{className:s.chartTitle,children:"Top Failing Pipelines"}),e.jsxs("div",{className:s.failingPipelinesTable,children:[e.jsxs("div",{className:s.tableHeader,children:[e.jsx("span",{children:"Pipeline"}),e.jsx("span",{children:"Team"}),e.jsx("span",{children:"Status"}),e.jsx("span",{children:"Failure Rate"}),e.jsx("span",{children:"SLA"})]}),K.map(a=>e.jsxs("div",{className:s.tableRow,children:[e.jsxs("div",{className:s.pipelineName,children:[e.jsx("span",{className:s.name,children:a.name}),e.jsx("span",{className:s.source,children:a.source})]}),e.jsx("span",{className:s.team,children:a.ownerTeam}),e.jsx("span",{className:`${s.status} ${s[a.status]}`,children:a.status}),e.jsxs("span",{className:s.failureRate,children:[a.failureRate.toFixed(1),"%"]}),e.jsxs("span",{className:s.sla,children:[a.slaRequirement,"m"]})]},a.id))]})]})]})]})});Ze.displayName="Overview";export{Ze as default};
//# sourceMappingURL=Overview-Cq3RefIO.js.map
