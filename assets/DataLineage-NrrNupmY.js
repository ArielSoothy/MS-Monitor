import{j as e,m as K}from"./index-HKzES0-U.js";import{r as w}from"./charts-C5h2vIoi.js";import{l as ct,A as q,E as X,p as nt,q as pt,U as Y,r as at,m as E,s as it,o as rt,k as Z,T as W,Z as lt,e as xt,h as _t,C as ot,D as T,G as gt,t as ft}from"./icons-C30ICxKa.js";import{H as jt}from"./HowItWorksModal-oKW2DKg_.js";import{I as k,g as l}from"./tooltipContent-BsFA_Dvu.js";import"./vendor-Csw2ODfV.js";import"./router-D-wRvbVe.js";const yt="_modalOverlay_1k7nf_2",vt="_modal_1k7nf_2",kt="_modalHeader_1k7nf_29",Nt="_modalTitle_1k7nf_38",wt="_pipelineName_1k7nf_45",Ct="_closeButton_1k7nf_52",St="_quickActions_1k7nf_68",It="_actionButton_1k7nf_77",bt="_tabNav_1k7nf_102",Tt="_tab_1k7nf_102",Dt="_activeTab_1k7nf_128",Lt="_errorBadge_1k7nf_134",At="_modalContent_1k7nf_144",Pt="_tabContent_1k7nf_150",Mt="_currentError_1k7nf_155",zt="_errorHeader_1k7nf_163",Bt="_errorInfo_1k7nf_170",$t="_errorIcon_1k7nf_176",Ht="_errorTitle_1k7nf_182",Et="_errorMeta_1k7nf_190",Gt="_errorCode_1k7nf_196",Rt="_errorTime_1k7nf_202",Ot="_severityBadge_1k7nf_207",Vt="_stackTrace_1k7nf_217",Wt="_stackHeader_1k7nf_221",qt="_copyButton_1k7nf_234",Ft="_stackContent_1k7nf_252",Ut="_suggestedActions_1k7nf_266",Qt="_actionsList_1k7nf_276",Kt="_actionItem_1k7nf_282",Xt="_actionIcon_1k7nf_291",Yt="_context_1k7nf_298",Zt="_contextGrid_1k7nf_308",Jt="_contextItem_1k7nf_314",es="_contextKey_1k7nf_324",ts="_contextValue_1k7nf_331",ss="_noError_1k7nf_339",ns="_noErrorIcon_1k7nf_345",as="_errorHistory_1k7nf_357",is="_historyList_1k7nf_367",rs="_historyItem_1k7nf_373",os="_historyIcon_1k7nf_388",cs="_historyContent_1k7nf_393",ls="_historyMessage_1k7nf_397",ds="_historyMeta_1k7nf_403",ms="_historySeverity_1k7nf_410",hs="_logsSection_1k7nf_420",us="_logsList_1k7nf_426",ps="_logItem_1k7nf_432",xs="_logHeader_1k7nf_439",_s="_logSystem_1k7nf_446",gs="_logButton_1k7nf_455",fs="_logMeta_1k7nf_473",js="_queryTemplate_1k7nf_482",ys="_queryHeader_1k7nf_486",vs="_queryCode_1k7nf_499",ks="_metricsSection_1k7nf_512",Ns="_metricsPlaceholder_1k7nf_518",ws="_metricsInfo_1k7nf_537",Cs="_grafanaButton_1k7nf_543",Ss="_impactSection_1k7nf_564",Is="_impactOverview_1k7nf_570",bs="_impactLevel_1k7nf_577",Ts="_impactBadge_1k7nf_582",Ds="_impactGrid_1k7nf_592",Ls="_impactCard_1k7nf_598",As="_affectedList_1k7nf_611",Ps="_affectedItem_1k7nf_617",Ms="_impactMetric_1k7nf_630",zs="_noImpact_1k7nf_636",Bs="_runbooksSection_1k7nf_654",$s="_runbooksList_1k7nf_660",Hs="_runbookItem_1k7nf_667",Es="_runbookHeader_1k7nf_674",Gs="_runbookMeta_1k7nf_687",Rs="_runbookDescription_1k7nf_695",Os="_runbookButton_1k7nf_701",Vs="_oncallInfo_1k7nf_720",Ws="_oncallDetails_1k7nf_731",a={modalOverlay:yt,modal:vt,modalHeader:kt,modalTitle:Nt,pipelineName:wt,closeButton:Ct,quickActions:St,actionButton:It,tabNav:bt,tab:Tt,activeTab:Dt,errorBadge:Lt,modalContent:At,tabContent:Pt,currentError:Mt,errorHeader:zt,errorInfo:Bt,errorIcon:$t,errorTitle:Ht,errorMeta:Et,errorCode:Gt,errorTime:Rt,severityBadge:Ot,stackTrace:Vt,stackHeader:Wt,copyButton:qt,stackContent:Ft,suggestedActions:Ut,actionsList:Qt,actionItem:Kt,actionIcon:Xt,context:Yt,contextGrid:Zt,contextItem:Jt,contextKey:es,contextValue:ts,noError:ss,noErrorIcon:ns,errorHistory:as,historyList:is,historyItem:rs,historyIcon:os,historyContent:cs,historyMessage:ls,historyMeta:ds,historySeverity:ms,logsSection:hs,logsList:us,logItem:ps,logHeader:xs,logSystem:_s,logButton:gs,logMeta:fs,queryTemplate:js,queryHeader:ys,queryCode:vs,metricsSection:ks,metricsPlaceholder:Ns,metricsInfo:ws,grafanaButton:Cs,impactSection:Ss,impactOverview:Is,impactLevel:bs,impactBadge:Ts,impactGrid:Ds,impactCard:Ls,affectedList:As,affectedItem:Ps,impactMetric:Ms,noImpact:zs,runbooksSection:Bs,runbooksList:$s,runbookItem:Hs,runbookHeader:Es,runbookMeta:Gs,runbookDescription:Rs,runbookButton:Os,oncallInfo:Vs,oncallDetails:Ws},qs=({isOpen:$,onClose:G,pipelineName:f,currentError:x,errorHistory:i,logReferences:D,metricsHistory:z,impactAnalysis:C,runbooks:L,oncallTeam:B,slackChannel:H,teamsChannel:A,dashboardUrl:R,grafanaUrl:P,healthCheckUrl:O})=>{const[_,F]=w.useState("error"),[S,M]=w.useState(null);if(!$)return null;const V=async(o,j)=>{try{await navigator.clipboard.writeText(o),M(j),setTimeout(()=>M(null),2e3)}catch(U){console.error("Failed to copy:",U)}},I=o=>{switch(o){case"connection":return e.jsx(lt,{className:a.errorIcon});case"data_quality":return e.jsx(nt,{className:a.errorIcon});case"timeout":return e.jsx(Z,{className:a.errorIcon});case"authentication":return e.jsx(Y,{className:a.errorIcon});default:return e.jsx(W,{className:a.errorIcon})}},b=o=>{switch(o){case"critical":return"#ef4444";case"high":return"#f97316";case"medium":return"#eab308";case"low":return"#22c55e";default:return"#6b7280"}};return e.jsx("div",{className:a.modalOverlay,onClick:G,children:e.jsxs("div",{className:a.modal,onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:a.modalHeader,children:[e.jsxs("div",{children:[e.jsx("h2",{className:a.modalTitle,children:"Pipeline Error Details"}),e.jsx("p",{className:a.pipelineName,children:f})]}),e.jsx("button",{className:a.closeButton,onClick:G,children:e.jsx(ct,{size:24})})]}),e.jsxs("div",{className:a.quickActions,children:[e.jsxs("button",{className:a.actionButton,onClick:()=>window.open(O,"_blank"),disabled:!O,children:[e.jsx(q,{size:16}),"Health Check"]}),e.jsxs("button",{className:a.actionButton,onClick:()=>window.open(R,"_blank"),disabled:!R,children:[e.jsx(X,{size:16}),"Dashboard"]}),e.jsxs("button",{className:a.actionButton,onClick:()=>window.open(P,"_blank"),disabled:!P,children:[e.jsx(nt,{size:16}),"Metrics"]}),H&&e.jsxs("button",{className:a.actionButton,onClick:()=>window.open(`slack://channel?team=T123&id=${H}`,"_blank"),children:[e.jsx(pt,{size:16}),"Slack"]}),A&&e.jsxs("button",{className:a.actionButton,onClick:()=>window.open(A,"_blank"),children:[e.jsx(Y,{size:16}),"Teams"]})]}),e.jsx("div",{className:a.tabNav,children:["error","logs","metrics","impact","runbooks"].map(o=>e.jsxs("button",{className:`${a.tab} ${_===o?a.activeTab:""}`,onClick:()=>F(o),children:[o.charAt(0).toUpperCase()+o.slice(1),o==="error"&&x&&e.jsx("span",{className:a.errorBadge,style:{backgroundColor:b(x.severity)},children:x.severity})]},o))}),e.jsxs("div",{className:a.modalContent,children:[_==="error"&&e.jsxs("div",{className:a.tabContent,children:[x?e.jsxs("div",{className:a.currentError,children:[e.jsxs("div",{className:a.errorHeader,children:[e.jsxs("div",{className:a.errorInfo,children:[I(x.errorType),e.jsxs("div",{children:[e.jsx("h3",{className:a.errorTitle,children:x.errorMessage}),e.jsxs("div",{className:a.errorMeta,children:[e.jsxs("span",{className:a.errorCode,children:["Error Code: ",x.errorCode]}),e.jsx("span",{className:a.errorTime,children:new Date(x.timestamp).toLocaleString()})]})]})]}),e.jsx("span",{className:a.severityBadge,style:{backgroundColor:b(x.severity)},children:x.severity})]}),x.stackTrace&&e.jsxs("div",{className:a.stackTrace,children:[e.jsxs("div",{className:a.stackHeader,children:[e.jsx("h4",{children:"Stack Trace"}),e.jsxs("button",{className:a.copyButton,onClick:()=>V(x.stackTrace,"Stack Trace"),children:[e.jsx(at,{size:14}),S==="Stack Trace"?"Copied!":"Copy"]})]}),e.jsx("pre",{className:a.stackContent,children:x.stackTrace})]}),e.jsxs("div",{className:a.suggestedActions,children:[e.jsx("h4",{children:"Suggested Actions"}),e.jsx("ul",{className:a.actionsList,children:x.suggestedActions.map((o,j)=>e.jsxs("li",{className:a.actionItem,children:[e.jsx(E,{size:16,className:a.actionIcon}),o]},j))})]}),x.context&&Object.keys(x.context).length>0&&e.jsxs("div",{className:a.context,children:[e.jsx("h4",{children:"Error Context"}),e.jsx("div",{className:a.contextGrid,children:Object.entries(x.context).map(([o,j])=>e.jsxs("div",{className:a.contextItem,children:[e.jsxs("span",{className:a.contextKey,children:[o,":"]}),e.jsx("span",{className:a.contextValue,children:String(j)})]},o))})]})]}):e.jsxs("div",{className:a.noError,children:[e.jsx(E,{size:48,className:a.noErrorIcon}),e.jsx("h3",{children:"No Current Errors"}),e.jsx("p",{children:"This pipeline is currently running without any detected errors."})]}),i.length>0&&e.jsxs("div",{className:a.errorHistory,children:[e.jsx("h4",{children:"Recent Error History"}),e.jsx("div",{className:a.historyList,children:i.slice(0,5).map((o,j)=>e.jsxs("div",{className:a.historyItem,children:[e.jsx("div",{className:a.historyIcon,children:I(o.errorType)}),e.jsxs("div",{className:a.historyContent,children:[e.jsx("div",{className:a.historyMessage,children:o.errorMessage}),e.jsxs("div",{className:a.historyMeta,children:[e.jsx("span",{children:o.errorCode}),e.jsx("span",{children:new Date(o.timestamp).toLocaleString()})]})]}),e.jsx("span",{className:a.historySeverity,style:{backgroundColor:b(o.severity)},children:o.severity})]},j))})]})]}),_==="logs"&&e.jsx("div",{className:a.tabContent,children:e.jsxs("div",{className:a.logsSection,children:[e.jsx("h3",{children:"Log References"}),e.jsx("div",{className:a.logsList,children:D.map((o,j)=>e.jsxs("div",{className:a.logItem,children:[e.jsxs("div",{className:a.logHeader,children:[e.jsxs("div",{className:a.logSystem,children:[e.jsx(it,{size:16}),o.logSystem.toUpperCase()]}),e.jsxs("button",{className:a.logButton,onClick:()=>window.open(o.logUrl,"_blank"),children:[e.jsx(X,{size:14}),"Open Logs"]})]}),e.jsxs("div",{className:a.logMeta,children:[e.jsxs("span",{children:["Correlation ID: ",o.correlationId]}),e.jsxs("span",{children:["Time Range: ",new Date(o.timeRange.start).toLocaleString()," -",new Date(o.timeRange.end).toLocaleString()]})]}),o.queryTemplate&&e.jsxs("div",{className:a.queryTemplate,children:[e.jsxs("div",{className:a.queryHeader,children:[e.jsx("span",{children:"Query Template:"}),e.jsxs("button",{className:a.copyButton,onClick:()=>V(o.queryTemplate,"Query"),children:[e.jsx(at,{size:12}),S==="Query"?"Copied!":"Copy"]})]}),e.jsx("code",{className:a.queryCode,children:o.queryTemplate})]})]},j))})]})}),_==="metrics"&&e.jsx("div",{className:a.tabContent,children:e.jsxs("div",{className:a.metricsSection,children:[e.jsx("h3",{children:"Performance Metrics History"}),e.jsxs("div",{className:a.metricsPlaceholder,children:[e.jsx(q,{size:48}),e.jsx("p",{children:"Interactive metrics charts would be displayed here"}),e.jsx("p",{children:"Showing trends for: Records/sec, Processing Time, Error Rate, Data Quality"}),z.length>0&&e.jsxs("p",{className:a.metricsInfo,children:[z.length," historical data points available"]}),P&&e.jsxs("button",{className:a.grafanaButton,onClick:()=>window.open(P,"_blank"),children:[e.jsx(X,{size:16}),"View in Grafana"]})]})]})}),_==="impact"&&e.jsx("div",{className:a.tabContent,children:C?e.jsxs("div",{className:a.impactSection,children:[e.jsxs("div",{className:a.impactOverview,children:[e.jsx("h3",{children:"Impact Analysis"}),e.jsx("div",{className:a.impactLevel,children:e.jsxs("span",{className:a.impactBadge,style:{backgroundColor:b(C.businessImpactLevel)},children:[C.businessImpactLevel.toUpperCase()," IMPACT"]})})]}),e.jsxs("div",{className:a.impactGrid,children:[e.jsxs("div",{className:a.impactCard,children:[e.jsx("h4",{children:"Affected Downstream Pipelines"}),e.jsx("div",{className:a.affectedList,children:C.affectedDownstreamPipelines.map((o,j)=>e.jsxs("div",{className:a.affectedItem,children:[e.jsx(rt,{size:14}),o]},j))})]}),e.jsxs("div",{className:a.impactCard,children:[e.jsx("h4",{children:"Affected Destinations"}),e.jsx("div",{className:a.affectedList,children:C.affectedDestinations.map((o,j)=>e.jsxs("div",{className:a.affectedItem,children:[e.jsx(rt,{size:14}),o]},j))})]}),e.jsxs("div",{className:a.impactCard,children:[e.jsx("h4",{children:"Estimated Data Loss"}),e.jsxs("div",{className:a.impactMetric,children:[C.estimatedDataLoss.toLocaleString()," records"]})]}),e.jsxs("div",{className:a.impactCard,children:[e.jsx("h4",{children:"Recovery Time Estimate"}),e.jsxs("div",{className:a.impactMetric,children:[C.recoveryTimeEstimate," minutes"]})]})]})]}):e.jsxs("div",{className:a.noImpact,children:[e.jsx(E,{size:48}),e.jsx("h3",{children:"No Current Impact"}),e.jsx("p",{children:"This pipeline failure is not currently impacting downstream systems."})]})}),_==="runbooks"&&e.jsx("div",{className:a.tabContent,children:e.jsxs("div",{className:a.runbooksSection,children:[e.jsx("h3",{children:"Resolution Runbooks"}),e.jsx("div",{className:a.runbooksList,children:L.map((o,j)=>e.jsxs("div",{className:a.runbookItem,children:[e.jsxs("div",{className:a.runbookHeader,children:[e.jsx("h4",{children:o.title}),e.jsxs("div",{className:a.runbookMeta,children:[e.jsx(Z,{size:14}),"~",o.estimatedResolutionTime," min"]})]}),e.jsx("p",{className:a.runbookDescription,children:o.description}),e.jsxs("button",{className:a.runbookButton,onClick:()=>window.open(o.url,"_blank"),children:[e.jsx(it,{size:16}),"Open Runbook"]})]},j))}),e.jsxs("div",{className:a.oncallInfo,children:[e.jsx("h4",{children:"On-Call Team"}),e.jsxs("div",{className:a.oncallDetails,children:[e.jsx(Y,{size:16}),e.jsx("span",{children:B})]})]})]})})]})]})})},Fs="_dataLineage_w3enn_2",Us="_header_w3enn_9",Qs="_headerContent_w3enn_13",Ks="_titleSection_w3enn_19",Xs="_title_w3enn_19",Ys="_infoButton_w3enn_37",Zs="_subtitle_w3enn_57",Js="_mainContent_w3enn_64",en="_controls_w3enn_70",tn="_searchContainer_w3enn_82",sn="_searchIcon_w3enn_89",nn="_searchInput_w3enn_99",an="_filterSelect_w3enn_120",rn="_clearButton_w3enn_137",on="_filterIndicator_w3enn_153",cn="_clearFilterButton_w3enn_166",ln="_contentGrid_w3enn_181",dn="_visualizationPanel_w3enn_188",mn="_legend_w3enn_197",hn="_legendItem_w3enn_209",un="_legendDot_w3enn_218",pn="_source_w3enn_225",xn="_ingestion_w3enn_229",_n="_transformation_w3enn_233",gn="_enrichment_w3enn_237",fn="_destination_w3enn_241",jn="_lineageContainer_w3enn_245",yn="_lineageSvg_w3enn_253",vn="_sectionLabel_w3enn_260",kn="_nodeGroup_w3enn_267",Nn="_nodeRect_w3enn_272",wn="_selectedNode_w3enn_284",Cn="_nodeText_w3enn_290",Sn="_nodeSubtext_w3enn_295",In="_connectionLine_w3enn_300",bn="_flowDot_w3enn_304",Tn="_tooltip_w3enn_309",Dn="_sidePanel_w3enn_315",Ln="_sidePanelHeader_w3enn_332",An="_sidePanelTitle_w3enn_338",Pn="_statusBadge_w3enn_345",Mn="_statusHealthy_w3enn_354",zn="_statusWarning_w3enn_358",Bn="_statusFailed_w3enn_362",$n="_statusProcessing_w3enn_366",Hn="_sidePanelContent_w3enn_371",En="_detailSection_w3enn_380",Gn="_detailTitle_w3enn_386",Rn="_detailDescription_w3enn_395",On="_metricGrid_w3enn_402",Vn="_metric_w3enn_402",Wn="_metricValue_w3enn_423",qn="_metricLabel_w3enn_430",Fn="_connectionsList_w3enn_437",Un="_connectionItem_w3enn_443",Qn="_connectionDot_w3enn_459",Kn="_connectionName_w3enn_466",Xn="_connectionType_w3enn_473",Yn="_activityItem_w3enn_482",Zn="_activityIcon_w3enn_492",Jn="_activityText_w3enn_497",ea="_activityTime_w3enn_503",ta="_summaryGrid_w3enn_509",sa="_summaryCard_w3enn_516",na="_summaryIcon_w3enn_533",aa="_summaryContent_w3enn_544",ia="_summaryValue_w3enn_548",ra="_summaryLabel_w3enn_556",oa="_errorBadge_w3enn_631",ca="_techDetails_w3enn_697",la="_techItem_w3enn_703",da="_tagList_w3enn_721",ma="_protocolTag_w3enn_728",ha="_serviceTag_w3enn_728",ua="_apiTag_w3enn_728",pa="_networkTag_w3enn_728",xa="_alertRule_w3enn_728",_a="_alertList_w3enn_766",ga="_errorDetails_w3enn_805",fa="_errorHeader_w3enn_813",ja="_errorIcon_w3enn_820",ya="_errorMessage_w3enn_826",va="_errorMeta_w3enn_833",ka="_errorCode_w3enn_839",Na="_errorTime_w3enn_849",wa="_suggestedActions_w3enn_854",Ca="_viewFullErrorButton_w3enn_878",Sa="_monitoringLinks_w3enn_907",Ia="_logLink_w3enn_914",ba="_communicationLinks_w3enn_935",Ta="_commLink_w3enn_944",s={dataLineage:Fs,header:Us,headerContent:Qs,titleSection:Ks,title:Xs,infoButton:Ys,subtitle:Zs,mainContent:Js,controls:en,searchContainer:tn,searchIcon:sn,searchInput:nn,filterSelect:an,clearButton:rn,filterIndicator:on,clearFilterButton:cn,contentGrid:ln,visualizationPanel:dn,legend:mn,legendItem:hn,legendDot:un,source:pn,ingestion:xn,transformation:_n,enrichment:gn,destination:fn,lineageContainer:jn,lineageSvg:yn,sectionLabel:vn,nodeGroup:kn,nodeRect:Nn,selectedNode:wn,nodeText:Cn,nodeSubtext:Sn,connectionLine:In,flowDot:bn,tooltip:Tn,sidePanel:Dn,sidePanelHeader:Ln,sidePanelTitle:An,statusBadge:Pn,statusHealthy:Mn,statusWarning:zn,statusFailed:Bn,statusProcessing:$n,sidePanelContent:Hn,detailSection:En,detailTitle:Gn,detailDescription:Rn,metricGrid:On,metric:Vn,metricValue:Wn,metricLabel:qn,connectionsList:Fn,connectionItem:Un,connectionDot:Qn,connectionName:Kn,connectionType:Xn,activityItem:Yn,activityIcon:Zn,activityText:Jn,activityTime:ea,summaryGrid:ta,summaryCard:sa,summaryIcon:na,summaryContent:aa,summaryValue:ia,summaryLabel:ra,errorBadge:oa,techDetails:ca,techItem:la,tagList:da,protocolTag:ma,serviceTag:ha,apiTag:ua,networkTag:pa,alertRule:xa,alertList:_a,errorDetails:ga,errorHeader:fa,errorIcon:ja,errorMessage:ya,errorMeta:va,errorCode:ka,errorTime:Na,suggestedActions:wa,viewFullErrorButton:Ca,monitoringLinks:Sa,logLink:Ia,communicationLinks:ba,commLink:Ta},Da=w.memo(()=>{var ee,te,se,ne,ae,ie,re,oe,ce,le,de,me,he,ue,pe,xe,_e,ge,fe,je,ye,ve,ke,Ne,we,Ce,Se,Ie,be,Te,De,Le,Ae,Pe,Me,ze,Be,$e,He,Ee,Ge,Re,Oe,Ve,We,qe,Fe,Ue,Qe,Ke,Xe,Ye,Ze,Je,et,tt,st;const[$,G]=w.useState(""),[f,x]=w.useState("all"),[i,D]=w.useState(null),[z,C]=w.useState(null),[L,B]=w.useState([]),[H,A]=w.useState(!1),[R,P]=w.useState(!1),O=w.useRef(null),_=t=>{let r=0;for(let c=0;c<t.length;c++){const g=t.charCodeAt(c);r=(r<<5)-r+g,r=r&r}return Math.abs(r)/2147483647},F=()=>{const t=[],r=[],c=["LinkedIn","Twitter","Office365","AzureAD","GitHub","ThreatIntel","Exchange","Teams","SharePoint","PowerBI"];return c.forEach((n,p)=>{var y;const u=_(`${n}-status`),h=["healthy","warning","failed"],m=h[Math.floor(u*h.length)],d=K.filter(Q=>Q.source===n),v=d.length>0?d[0]:null;t.push({id:`source-${n}`,name:n,type:"source",source:n,x:50,y:80+p*80,status:m,recordsPerSecond:Math.floor(_(`${n}-records`)*1e3)+100,avgProcessingTime:Math.floor(_(`${n}-time`)*500)+50,connections:[],description:`Data ingestion from ${n} platform`,lastUpdate:new Date(Date.now()-_(`${n}-update`)*36e5).toISOString(),dataQuality:Math.floor(_(`${n}-quality`)*20)+80,pipelineData:v,hasErrors:m==="failed"||m==="warning",errorCount:((y=v==null?void 0:v.errorHistory)==null?void 0:y.length)||(m==="failed"?3:m==="warning"?1:0),technology:n==="Office365"||n==="Exchange"||n==="Teams"||n==="SharePoint"?"Microsoft Graph API":n==="AzureAD"?"Azure Active Directory Logs":n==="LinkedIn"||n==="Twitter"?"Azure Event Hubs":n==="GitHub"?"GitHub REST API â†’ Azure Logic Apps":n==="ThreatIntel"?"Microsoft Defender for Threat Intelligence API":"Azure Event Hubs",resourceGroup:"rg-mstic-prod-eastus2",subscriptionId:"mstic-prod-subscription",region:"East US 2",throughputUnits:["LinkedIn","Twitter"].includes(n)?20:10,partitionCount:["LinkedIn","Twitter"].includes(n)?32:16,retentionDays:7,protocols:n==="Office365"||n==="AzureAD"?["HTTPS","OAuth 2.0"]:n==="GitHub"?["HTTPS","Webhook"]:["HTTPS","AMQP 1.0","Kafka"],authentication:n==="Office365"||n==="AzureAD"?"Managed Identity + Application Registration":n==="GitHub"?"GitHub App + Personal Access Token":"Managed Identity + Shared Access Key",monitoring:{applicationInsights:"ai-mstic-ingestion-prod",logAnalyticsWorkspace:"law-mstic-prod-eastus2",kustoCluster:"msticdata.eastus2.kusto.windows.net",alertRules:[`${n}_ingestion_failure`,`${n}_throughput_low`,`${n}_latency_high`]},dependencies:{keyVault:"kv-mstic-secrets-prod",serviceAccounts:[`sa-${n.toLowerCase()}-ingestion`],externalApis:n==="Office365"?["graph.microsoft.com"]:n==="GitHub"?["api.github.com"]:n==="LinkedIn"?["api.linkedin.com"]:n==="Twitter"?["api.twitter.com"]:[],networkConnections:["Virtual Network Gateway","Private Endpoints","Service Endpoints"]}})}),[{type:"ingestion",x:350},{type:"transformation",x:650},{type:"enrichment",x:950}].forEach(({type:n,x:p})=>{const u={};K.forEach(d=>{u[d.source]||(u[d.source]=[]),u[d.source].push(d)});const h=[];c.forEach(d=>{const v=u[d]||[];if(v.length>0){const y=Math.floor(_(`${n}-${d}`)*v.length);h.push(v[y])}});const m=h.map((d,v)=>{var y;return{id:`${n}-${d.id}`,name:`${n.charAt(0).toUpperCase()+n.slice(1)} - ${d.name.split(" ").slice(0,3).join(" ")}`,type:n,source:d.source,x:p,y:80+v*80,status:d.status,recordsPerSecond:Math.floor(d.recordsProcessed/60),avgProcessingTime:d.avgProcessingTime,connections:[],description:`${n} pipeline: ${d.name}`,lastUpdate:d.lastRun.toISOString(),dataQuality:Math.floor(_(`${d.id}-quality`)*15)+85,actualPipeline:d,pipelineData:d,hasErrors:d.status==="failed"||d.status==="warning",errorCount:((y=d.errorHistory)==null?void 0:y.length)||0,technology:n==="ingestion"?"Azure Data Factory":n==="transformation"?"Azure Synapse Analytics (Spark Pools)":"Azure Databricks + Azure Functions",resourceGroup:`rg-mstic-${n}-prod-eastus2`,subscriptionId:"mstic-prod-subscription",region:"East US 2",computeType:n==="ingestion"?"Integration Runtime (Auto-resolve)":n==="transformation"?"Spark Pool (Medium: 8-32 nodes)":"Databricks Cluster (Standard_DS3_v2)",partitionCount:n==="transformation"?64:32,retentionDays:30,protocols:n==="ingestion"?["HTTPS","ODBC","JDBC"]:n==="transformation"?["Spark SQL","Delta Lake"]:["Python","Scala","Delta Lake","MLflow"],authentication:"Managed Identity + Azure Key Vault",monitoring:{applicationInsights:`ai-mstic-${n}-prod`,logAnalyticsWorkspace:"law-mstic-prod-eastus2",kustoCluster:"msticdata.eastus2.kusto.windows.net",alertRules:[`${n}_pipeline_failure`,`${n}_processing_delay`,`${n}_resource_exhaustion`]},dependencies:{keyVault:"kv-mstic-secrets-prod",serviceAccounts:[`sa-${n}-${d.source.toLowerCase()}`],externalApis:n==="enrichment"?["threatintelligence.microsoft.com","virusshare.com"]:[],networkConnections:["Azure Virtual Network","Private Link","Managed Virtual Network"]}}});t.push(...m)}),[{name:"MSTIC Data Lake",types:["storage","archive"],priority:1},{name:"Threat Intelligence DB",types:["threat","intel"],priority:1},{name:"Security Analytics Store",types:["analytics","ml"],priority:2},{name:"Alert System",types:["realtime","alerts"],priority:1},{name:"ML Training Data",types:["ml","training"],priority:3},{name:"Compliance Archive",types:["compliance","audit"],priority:2},{name:"Real-time Dashboard",types:["realtime","dashboard"],priority:1},{name:"API Gateway",types:["api","external"],priority:2}].forEach((n,p)=>{const u=_(`${n.name}-status`),h=["healthy","warning"],m=h[Math.floor(u*h.length)];t.push({id:`dest-${n.name}`,name:n.name,type:"destination",x:1250,y:80+p*80,status:m,recordsPerSecond:Math.floor(_(`${n.name}-records`)*500)+50,avgProcessingTime:Math.floor(_(`${n.name}-time`)*100)+20,connections:[],description:`Data destination: ${n.name}`,lastUpdate:new Date(Date.now()-_(`${n.name}-update`)*18e5).toISOString(),dataQuality:Math.floor(_(`${n.name}-quality`)*10)+90,destinationTypes:n.types,priority:n.priority,technology:n.name.includes("Data Lake")?"Azure Data Lake Storage Gen2 (ADLS)":n.name.includes("DB")||n.name.includes("Database")?"Azure SQL Database (Premium)":n.name.includes("Analytics")?"Azure Synapse Analytics (SQL Pool)":n.name.includes("Alert")?"Azure Logic Apps + Service Bus":n.name.includes("ML")?"Azure Machine Learning Studio":n.name.includes("Compliance")?"Azure Purview + Archive Storage":n.name.includes("Dashboard")?"Power BI Premium + Azure SignalR":"Azure API Management + Application Gateway",resourceGroup:"rg-mstic-storage-prod-eastus2",subscriptionId:"mstic-prod-subscription",region:"East US 2",storageType:n.name.includes("Data Lake")?"Hot (Standard LRS) + Cool Archive":n.name.includes("Analytics")?"Premium SSD + Columnstore Index":n.name.includes("ML")?"Standard SSD + Blob Storage":n.name.includes("Compliance")?"Archive Storage (GRS)":"Standard Storage (ZRS)",partitionCount:n.name.includes("Data Lake")?128:n.name.includes("Analytics")?256:n.name.includes("Alert")?64:32,retentionDays:n.name.includes("Compliance")?2555:n.name.includes("Archive")?365:n.name.includes("ML")?180:90,protocols:n.name.includes("Data Lake")?["HTTPS","REST API","ABFS"]:n.name.includes("DB")?["TDS","HTTPS","ODBC"]:n.name.includes("Alert")?["HTTPS","AMQP","Service Bus"]:n.name.includes("API")?["HTTPS","OAuth 2.0","OpenAPI"]:["HTTPS","WebSocket","REST API"],authentication:n.name.includes("Data Lake")?"Managed Identity + ACLs + RBAC":n.name.includes("DB")?"Managed Identity + SQL Authentication":n.name.includes("ML")?"Service Principal + Workspace MSI":"Managed Identity + Key Vault",monitoring:{applicationInsights:"ai-mstic-destinations-prod",logAnalyticsWorkspace:"law-mstic-prod-eastus2",kustoCluster:"msticdata.eastus2.kusto.windows.net",alertRules:[`${n.name.replace(/\s+/g,"_").toLowerCase()}_capacity`,`${n.name.replace(/\s+/g,"_").toLowerCase()}_latency`,`${n.name.replace(/\s+/g,"_").toLowerCase()}_availability`]},dependencies:{keyVault:"kv-mstic-secrets-prod",serviceAccounts:[`sa-${n.name.replace(/\s+/g,"-").toLowerCase()}`],externalApis:n.name.includes("API")?["partner-apis.microsoft.com"]:[],networkConnections:["Private Endpoints","VNet Integration","Service Endpoints"]}})}),t.forEach(n=>{if(n.type==="source")t.filter(u=>u.type==="ingestion"&&u.source===n.source).forEach(u=>{const h=`${n.id}-${u.id}`,m=_(`${h}-volume`),d=["low","medium","high"],v=d[Math.floor(m*d.length)];r.push({id:h,from:n.id,to:u.id,volume:v,health:n.status==="failed"?"error":n.status==="warning"?"warning":"healthy",animated:n.status!=="failed"}),n.connections.push(u.id),u.connections.push(n.id)});else if(n.type==="ingestion"){const p=t.find(u=>u.type==="source"&&u.source===n.source);(p==null?void 0:p.status)!=="failed"&&t.filter(h=>h.type==="transformation"&&h.source===n.source).slice(0,2).forEach(h=>{const m=`${n.id}-${h.id}`,d=_(`${m}-volume`),v=["medium","high"],y=v[Math.floor(d*v.length)];r.push({id:m,from:n.id,to:h.id,volume:y,health:n.status==="failed"?"error":n.status==="warning"?"warning":"healthy",animated:n.status!=="failed"}),n.connections.push(h.id),h.connections.push(n.id)})}else if(n.type==="transformation"){const p=t.find(h=>h.type==="ingestion"&&h.source===n.source),u=t.find(h=>h.type==="source"&&h.source===n.source);(u==null?void 0:u.status)!=="failed"&&(p==null?void 0:p.status)!=="failed"&&t.filter(m=>m.type==="enrichment"&&m.source===n.source).slice(0,2).forEach(m=>{const d=`${n.id}-${m.id}`;r.push({id:d,from:n.id,to:m.id,volume:"high",health:n.status==="failed"?"error":n.status==="warning"?"warning":"healthy",animated:n.status!=="failed"}),n.connections.push(m.id),m.connections.push(n.id)})}else if(n.type==="enrichment"){const p=t.find(m=>m.type==="source"&&m.source===n.source),u=t.find(m=>m.type==="ingestion"&&m.source===n.source),h=t.find(m=>m.type==="transformation"&&m.source===n.source);if((p==null?void 0:p.status)!=="failed"&&(u==null?void 0:u.status)!=="failed"&&(h==null?void 0:h.status)!=="failed"){const d={LinkedIn:["Threat Intelligence DB","MSTIC Data Lake","ML Training Data"],Twitter:["Real-time Dashboard","Alert System","Security Analytics Store"],Office365:["Compliance Archive","Security Analytics Store","Alert System"],AzureAD:["Security Analytics Store","Alert System","Threat Intelligence DB"],GitHub:["Threat Intelligence DB","Security Analytics Store","API Gateway"],ThreatIntel:["Alert System","Threat Intelligence DB","Real-time Dashboard"],Exchange:["Compliance Archive","Security Analytics Store","Alert System"],Teams:["Compliance Archive","Real-time Dashboard","Security Analytics Store"],SharePoint:["Compliance Archive","MSTIC Data Lake","Security Analytics Store"],PowerBI:["Real-time Dashboard","Security Analytics Store","API Gateway"]}[n.source]||["MSTIC Data Lake","Security Analytics Store","Alert System"];t.filter(y=>y.type==="destination"&&d.includes(y.name)).forEach(y=>{const Q=`${n.id}-${y.id}`;r.push({id:Q,from:n.id,to:y.id,volume:"high",health:n.status==="failed"?"error":n.status==="warning"?"warning":"healthy",animated:n.status!=="failed"}),n.connections.push(y.id),y.connections.push(n.id)})}}}),{nodes:t,connections:r}},{nodes:S,connections:M}=w.useMemo(()=>{const t=F(),r=t.nodes.filter(c=>c.hasErrors);return console.log("Generated nodes:",{total:t.nodes.length,withErrors:r.length,errorNodes:r.map(c=>({id:c.id,name:c.name,status:c.status,errorCount:c.errorCount}))}),t},[]),V=w.useMemo(()=>f==="all"?M:M.filter(t=>{const r=S.find(g=>g.id===t.from),c=S.find(g=>g.id===t.to);return(r==null?void 0:r.source)===f||(c==null?void 0:c.source)===f?!0:(c==null?void 0:c.type)==="destination"?M.filter(N=>{var n;return N.to===c.id&&((n=S.find(p=>p.id===N.from))==null?void 0:n.type)==="enrichment"}).some(N=>{const n=S.find(p=>p.id===N.from);return(n==null?void 0:n.source)===f}):!1}),[S,M,f]),I=S,b=V;w.useEffect(()=>{B([]),D(null)},[f]);const o=I.filter(t=>t.name.toLowerCase().includes($.toLowerCase())||t.source&&t.source.toLowerCase().includes($.toLowerCase())),j=t=>{const r=new Set,c=[],g=N=>{if(r.has(N))return;r.add(N),c.push(N);const n=I.find(p=>p.id===N);n&&n.connections.forEach(p=>{r.has(p)||g(p)})};g(t),B(c)},U=t=>{D(t),t.type==="source"&&t.source?(x(t.source),B([])):j(t.id)},dt=t=>{console.log("Node double-clicked:",{id:t.id,name:t.name,status:t.status,hasErrors:t.hasErrors,errorCount:t.errorCount,hasPipelineData:!!t.pipelineData,pipelineDataKeys:t.pipelineData?Object.keys(t.pipelineData):[]}),(t.status==="failed"||t.status==="warning")&&t.pipelineData?(console.log("Opening error modal for node:",t.name),D(t),A(!0)):console.log("Not opening modal - conditions not met")},J=t=>{if(L.length>0&&!L.includes(t.id))return"#444";if(f!=="all"){if(t.type==="source"&&t.source===f)return"#0078d4";if(t.type==="source"&&t.source!==f)return"#333";if(t.type!=="source"&&t.type!=="destination")if(t.source===f)switch(t.type){case"ingestion":return"#52c41a";case"transformation":return"#faad14";case"enrichment":return"#8b5cf6";default:return"#888"}else return"#333";if(t.type==="destination")return b.some(c=>c.to===t.id)?"#ef4444":"#333"}switch(t.type){case"source":return"#0078d4";case"ingestion":return"#52c41a";case"transformation":return"#faad14";case"enrichment":return"#8b5cf6";case"destination":return"#ef4444";default:return"#888"}},mt=t=>{const r=L.includes(t.from)&&L.includes(t.to);return{strokeWidth:t.volume==="high"?"3":t.volume==="medium"?"2":"1",stroke:t.health==="error"?"#ef4444":t.health==="warning"?"#faad14":"#52c41a",opacity:L.length>0?r?"1":"0.2":"0.8",strokeDasharray:t.volume==="low"?"5,5":"none",markerEnd:t.health==="error"?"url(#arrowhead-error)":t.health==="warning"?"url(#arrowhead-warning)":"url(#arrowhead-healthy)"}},ht=t=>{switch(t){case"healthy":return e.jsx(E,{size:16,className:s.statusHealthy});case"warning":return e.jsx(W,{size:16,className:s.statusWarning});case"failed":return e.jsx(ct,{size:16,className:s.statusFailed});case"processing":return e.jsx(q,{size:16,className:s.statusProcessing});default:return null}},ut=[...new Set(K.map(t=>t.source))];return e.jsxs("div",{className:s.dataLineage,children:[e.jsx("div",{className:s.header,children:e.jsx("div",{className:s.headerContent,children:e.jsxs("div",{className:s.titleSection,children:[e.jsxs("h1",{className:s.title,children:["Interactive Data Lineage",e.jsx("button",{className:s.infoButton,onClick:()=>P(!0),title:"How does this system work?",children:e.jsx(xt,{size:18})})]}),e.jsx("p",{className:s.subtitle,children:"Visualize and explore data flow through your threat intelligence pipelines"})]})})}),e.jsxs("div",{className:s.mainContent,children:[e.jsxs("div",{className:s.controls,children:[e.jsxs("div",{className:s.searchContainer,children:[e.jsx(_t,{className:s.searchIcon}),e.jsx("input",{type:"text",placeholder:"Search nodes and pipelines...",value:$,onChange:t=>G(t.target.value),className:s.searchInput})]}),e.jsxs("select",{value:f,onChange:t=>x(t.target.value),className:s.filterSelect,children:[e.jsx("option",{value:"all",children:"All Sources"}),ut.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx("button",{className:s.clearButton,onClick:()=>{D(null),B([]),x("all")},children:"Clear Selection"}),e.jsx("button",{className:s.clearButton,onClick:()=>{const t=S.find(r=>r.hasErrors&&r.pipelineData);t?(console.log("Test: Opening modal for",t.name),D(t),A(!0)):console.log("Test: No error nodes found")},style:{background:"#dc3545"},children:"Test Error Modal"})]}),f!=="all"&&e.jsxs("div",{className:s.filterIndicator,children:[e.jsxs("span",{children:["Showing data flow for: ",e.jsx("strong",{children:f})]}),e.jsx("button",{className:s.clearFilterButton,onClick:()=>x("all"),title:"Show all sources",children:"Ã—"})]}),e.jsxs("div",{className:s.contentGrid,children:[e.jsxs("div",{className:s.visualizationPanel,children:[e.jsxs("div",{className:s.legend,children:[e.jsxs("div",{className:s.legendItem,children:[e.jsx("div",{className:`${s.legendDot} ${s.source}`}),e.jsx("span",{children:"Data Sources"})]}),e.jsxs("div",{className:s.legendItem,children:[e.jsx("div",{className:`${s.legendDot} ${s.ingestion}`}),e.jsx("span",{children:"Ingestion"})]}),e.jsxs("div",{className:s.legendItem,children:[e.jsx("div",{className:`${s.legendDot} ${s.transformation}`}),e.jsx("span",{children:"Transformation"})]}),e.jsxs("div",{className:s.legendItem,children:[e.jsx("div",{className:`${s.legendDot} ${s.enrichment}`}),e.jsx("span",{children:"Enrichment"})]}),e.jsxs("div",{className:s.legendItem,children:[e.jsx("div",{className:`${s.legendDot} ${s.destination}`}),e.jsx("span",{children:"Destinations"})]})]}),e.jsx("div",{className:s.lineageContainer,children:e.jsxs("svg",{ref:O,className:s.lineageSvg,viewBox:"0 0 1600 900",preserveAspectRatio:"xMidYMid meet",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"flowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(82, 196, 26, 0.1)"}),e.jsx("stop",{offset:"50%",stopColor:"rgba(82, 196, 26, 0.8)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(82, 196, 26, 0.1)"}),e.jsx("animateTransform",{attributeName:"gradientTransform",attributeType:"XML",type:"translate",values:"-100 0; 200 0; -100 0",dur:"3s",repeatCount:"indefinite"})]}),e.jsx("marker",{id:"arrowhead-healthy",markerWidth:"6",markerHeight:"4",refX:"5",refY:"2",orient:"auto",children:e.jsx("polygon",{points:"0 0, 6 2, 0 4",fill:"#52c41a"})}),e.jsx("marker",{id:"arrowhead-warning",markerWidth:"6",markerHeight:"4",refX:"5",refY:"2",orient:"auto",children:e.jsx("polygon",{points:"0 0, 6 2, 0 4",fill:"#faad14"})}),e.jsx("marker",{id:"arrowhead-error",markerWidth:"6",markerHeight:"4",refX:"5",refY:"2",orient:"auto",children:e.jsx("polygon",{points:"0 0, 6 2, 0 4",fill:"#ef4444"})}),e.jsxs("filter",{id:"glow",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("text",{x:"120",y:"50",className:s.sectionLabel,children:"Data Sources"}),e.jsx("text",{x:"420",y:"50",className:s.sectionLabel,children:"Ingestion"}),e.jsx("text",{x:"720",y:"50",className:s.sectionLabel,children:"Transformation"}),e.jsx("text",{x:"1020",y:"50",className:s.sectionLabel,children:"Enrichment"}),e.jsx("text",{x:"1320",y:"50",className:s.sectionLabel,children:"Destinations"}),b.filter(t=>{const r=o.find(g=>g.id===t.from),c=o.find(g=>g.id===t.to);return r&&c}).map(t=>{const r=o.find(N=>N.id===t.from),c=o.find(N=>N.id===t.to),g=mt(t);return e.jsxs("g",{children:[e.jsx("line",{x1:r.x+180,y1:r.y+22,x2:c.x-20,y2:c.y+22,stroke:g.stroke,strokeWidth:g.strokeWidth,opacity:g.opacity,strokeDasharray:g.strokeDasharray,markerEnd:g.markerEnd,className:s.connectionLine}),t.animated&&e.jsx("circle",{r:"3",fill:g.stroke,className:s.flowDot,children:e.jsx("animateMotion",{dur:"3s",repeatCount:"indefinite",path:`M${r.x+180},${r.y+22} L${c.x-20},${c.y+22}`})})]},t.id)}),o.map(t=>{const r=t.type==="source"&&f!=="all"&&t.source===f;return e.jsxs("g",{className:s.nodeGroup,onClick:()=>U(t),onDoubleClick:()=>dt(t),onMouseEnter:()=>C(t.id),onMouseLeave:()=>C(null),children:[e.jsx("rect",{x:t.x,y:t.y,width:"180",height:"45",fill:J(t),rx:"6",className:`${s.nodeRect} ${(i==null?void 0:i.id)===t.id?s.selectedNode:""}`,filter:(i==null?void 0:i.id)===t.id||r?"url(#glow)":"none",stroke:r?"#ffffff":"transparent",strokeWidth:r?"2":"0"}),e.jsx("text",{x:t.x+90,y:t.y+18,textAnchor:"middle",fill:"white",fontSize:"11",fontWeight:"600",className:s.nodeText,children:t.name.length>20?`${t.name.substring(0,17)}...`:t.name}),e.jsx("text",{x:t.x+90,y:t.y+30,textAnchor:"middle",fill:"#0078d4",fontSize:"8",fontWeight:"500",children:t.technology.length>30?t.technology.split(" ")[0]+(t.technology.includes("Azure")?" "+t.technology.split(" ")[1]:""):t.technology}),e.jsxs("text",{x:t.x+90,y:t.y+40,textAnchor:"middle",fill:"rgba(255,255,255,0.8)",fontSize:"9",className:s.nodeSubtext,children:[t.recordsPerSecond,"/s"]}),e.jsx("circle",{cx:t.x+160,cy:t.y+12,r:"5",fill:t.status==="healthy"?"#52c41a":t.status==="warning"?"#faad14":t.status==="failed"?"#ef4444":"#1890ff"}),t.hasErrors&&t.errorCount&&t.errorCount>0&&e.jsxs("g",{children:[e.jsx("circle",{cx:t.x+170,cy:t.y+35,r:"12",fill:"#ef4444",stroke:"#ffffff",strokeWidth:"2"}),e.jsx("text",{x:t.x+170,y:t.y+40,textAnchor:"middle",fill:"white",fontSize:"11",fontWeight:"700",children:t.errorCount>9?"9+":t.errorCount})]}),t.hasErrors&&e.jsx("rect",{x:t.x-3,y:t.y-3,width:"186",height:"51",fill:"none",stroke:t.status==="failed"?"#ef4444":"#faad14",strokeWidth:"3",rx:"8",className:s.errorBorder}),t.hasErrors&&z===t.id&&e.jsxs("g",{children:[e.jsx("rect",{x:t.x+20,y:t.y+55,width:"140",height:"20",fill:"rgba(0, 0, 0, 0.8)",rx:"4"}),e.jsx("text",{x:t.x+90,y:t.y+68,textAnchor:"middle",fill:"#faad14",fontSize:"10",fontWeight:"600",children:"Double-click for error details"})]})]},t.id)}),z&&o.map(t=>{if(z!==t.id)return null;const r=t.x>1e3?t.x-210:t.x+190,c=t.y-10;return e.jsxs("g",{className:s.tooltip,children:[e.jsx("rect",{x:r,y:c,width:"220",height:"85",fill:"rgba(0,0,0,0.95)",rx:"6",stroke:"#555",strokeWidth:"1"}),e.jsx("text",{x:r+10,y:c+15,fill:"white",fontSize:"11",fontWeight:"600",children:t.name}),e.jsx("text",{x:r+10,y:c+28,fill:"#0078d4",fontSize:"9",fontWeight:"500",children:t.technology}),e.jsxs("text",{x:r+10,y:c+40,fill:"#ccc",fontSize:"9",children:["Records/sec: ",t.recordsPerSecond]}),e.jsxs("text",{x:r+10,y:c+52,fill:"#ccc",fontSize:"9",children:["Avg Time: ",t.avgProcessingTime,"ms"]}),e.jsxs("text",{x:r+10,y:c+64,fill:"#ccc",fontSize:"9",children:["Quality: ",t.dataQuality,"% | RG: ",t.resourceGroup.split("-").slice(-2).join("-")]}),e.jsx("text",{x:r+10,y:c+76,fill:"#52c41a",fontSize:"8",children:"Click for detailed tech specs â†’"})]},`tooltip-${t.id}`)})]})})]}),i&&e.jsxs("div",{className:s.sidePanel,children:[e.jsxs("div",{className:s.sidePanelHeader,children:[e.jsx("h3",{className:s.sidePanelTitle,children:i.name}),e.jsxs("div",{className:s.statusBadge,children:[ht(i.status),e.jsx("span",{children:i.status})]})]}),e.jsxs("div",{className:s.sidePanelContent,children:[e.jsxs("div",{className:s.detailSection,children:[e.jsx("h4",{className:s.detailTitle,children:"Overview"}),e.jsx("p",{className:s.detailDescription,children:i.description}),e.jsxs("div",{className:s.metricGrid,children:[e.jsxs("div",{className:s.metric,children:[e.jsx(q,{size:16}),e.jsxs("div",{children:[e.jsxs("div",{className:s.metricValue,children:[i.recordsPerSecond,"/s"]}),e.jsxs("div",{className:s.metricLabel,children:["Records per second",e.jsx(k,{content:((ee=l("recordsPerSecond"))==null?void 0:ee.content)||"Current throughput rate",title:(te=l("recordsPerSecond"))==null?void 0:te.title,detailedContent:(se=l("recordsPerSecond"))==null?void 0:se.detailedContent,size:"small"})]})]})]}),e.jsxs("div",{className:s.metric,children:[e.jsx(Z,{size:16}),e.jsxs("div",{children:[e.jsxs("div",{className:s.metricValue,children:[i.avgProcessingTime,"ms"]}),e.jsxs("div",{className:s.metricLabel,children:["Avg processing time",e.jsx(k,{content:((ne=l("avgProcessingTime"))==null?void 0:ne.content)||"Mean processing time per record",title:(ae=l("avgProcessingTime"))==null?void 0:ae.title,detailedContent:(ie=l("avgProcessingTime"))==null?void 0:ie.detailedContent,size:"small"})]})]})]}),e.jsxs("div",{className:s.metric,children:[e.jsx(ot,{size:16}),e.jsxs("div",{children:[e.jsxs("div",{className:s.metricValue,children:[i.dataQuality,"%"]}),e.jsxs("div",{className:s.metricLabel,children:["Data quality",e.jsx(k,{content:((re=l("dataQuality"))==null?void 0:re.content)||"Data completeness and accuracy score",title:(oe=l("dataQuality"))==null?void 0:oe.title,detailedContent:(ce=l("dataQuality"))==null?void 0:ce.detailedContent,size:"small"})]})]})]}),e.jsxs("div",{className:s.metric,children:[e.jsx(lt,{size:16}),e.jsxs("div",{children:[e.jsx("div",{className:s.metricValue,children:i.connections.length}),e.jsxs("div",{className:s.metricLabel,children:["Connections",e.jsx(k,{content:((le=l("connections"))==null?void 0:le.content)||"Number of connected pipeline components",title:(de=l("connections"))==null?void 0:de.title,detailedContent:(me=l("connections"))==null?void 0:me.detailedContent,size:"small"})]})]})]})]})]}),e.jsxs("div",{className:s.detailSection,children:[e.jsx("h4",{className:s.detailTitle,children:"Connected Pipelines"}),e.jsx("div",{className:s.connectionsList,children:i.connections.slice(0,5).map(t=>{const r=I.find(c=>c.id===t);return r?e.jsxs("div",{className:s.connectionItem,children:[e.jsx("div",{className:s.connectionDot,style:{backgroundColor:J(r)}}),e.jsx("span",{className:s.connectionName,children:r.name}),e.jsx("span",{className:s.connectionType,children:r.type})]},t):null})})]}),e.jsxs("div",{className:s.detailSection,children:[e.jsx("h4",{className:s.detailTitle,children:"Recent Activity"}),e.jsxs("div",{className:s.activityItem,children:[e.jsx("div",{className:s.activityIcon,children:e.jsx(E,{size:14})}),e.jsxs("div",{children:[e.jsx("div",{className:s.activityText,children:"Last updated"}),e.jsx("div",{className:s.activityTime,children:new Date(i.lastUpdate).toLocaleString()})]})]})]}),e.jsxs("div",{className:s.detailSection,children:[e.jsx("h4",{className:s.detailTitle,children:"ðŸ—ï¸ Microsoft Technology Stack"}),e.jsxs("div",{className:s.techDetails,children:[e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"Service:"})," ",i.technology,i.technology.includes("Event Hub")&&e.jsx(k,{content:((he=l("eventHubs"))==null?void 0:he.content)||"Real-time data streaming platform",title:(ue=l("eventHubs"))==null?void 0:ue.title,detailedContent:(pe=l("eventHubs"))==null?void 0:pe.detailedContent,size:"small"}),i.technology.includes("Data Factory")&&e.jsx(k,{content:((xe=l("azureDataFactory"))==null?void 0:xe.content)||"Cloud-based data integration service",title:(_e=l("azureDataFactory"))==null?void 0:_e.title,detailedContent:(ge=l("azureDataFactory"))==null?void 0:ge.detailedContent,size:"small"}),i.technology.includes("Stream Analytics")&&e.jsx(k,{content:((fe=l("streamAnalytics"))==null?void 0:fe.content)||"Real-time analytics service",title:(je=l("streamAnalytics"))==null?void 0:je.title,detailedContent:(ye=l("streamAnalytics"))==null?void 0:ye.detailedContent,size:"small"}),i.technology.includes("Cosmos")&&e.jsx(k,{content:((ve=l("cosmosDB"))==null?void 0:ve.content)||"Globally distributed database service",title:(ke=l("cosmosDB"))==null?void 0:ke.title,detailedContent:(Ne=l("cosmosDB"))==null?void 0:Ne.detailedContent,size:"small"}),i.technology.includes("Data Lake")&&e.jsx(k,{content:((we=l("dataLake"))==null?void 0:we.content)||"Scalable data storage for big data",title:(Ce=l("dataLake"))==null?void 0:Ce.title,detailedContent:(Se=l("dataLake"))==null?void 0:Se.detailedContent,size:"small"})]}),e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"Resource Group:"})," ",i.resourceGroup]}),e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"Region:"})," ",i.region]}),i.computeType&&e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"Compute:"})," ",i.computeType]}),i.storageType&&e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"Storage:"})," ",i.storageType]}),i.throughputUnits&&e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"Throughput Units:"})," ",i.throughputUnits]}),e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"Partitions:"})," ",i.partitionCount]}),e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"Retention:"})," ",i.retentionDays," days"]})]})]}),e.jsxs("div",{className:s.detailSection,children:[e.jsx("h4",{className:s.detailTitle,children:"ðŸ” Protocols & Security"}),e.jsxs("div",{className:s.techDetails,children:[e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"Protocols:"}),e.jsx(k,{content:"Communication protocols used for data transfer and API access",title:"Communication Protocols",detailedContent:"Includes HTTPS for secure web communication, AMQP for messaging, and Kafka for streaming protocols.",size:"small"}),e.jsx("div",{className:s.tagList,children:(Ie=i.protocols)==null?void 0:Ie.map((t,r)=>e.jsx("span",{className:s.protocolTag,children:t},r))})]}),e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"Authentication:"})," ",i.authentication,e.jsx(k,{content:((be=l("managedIdentity"))==null?void 0:be.content)||"Azure's secure authentication solution",title:(Te=l("managedIdentity"))==null?void 0:Te.title,detailedContent:(De=l("managedIdentity"))==null?void 0:De.detailedContent,size:"small"})]})]})]}),e.jsxs("div",{className:s.detailSection,children:[e.jsx("h4",{className:s.detailTitle,children:"ðŸ“Š Monitoring & Observability"}),e.jsxs("div",{className:s.techDetails,children:[e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"Application Insights:"})," ",(Le=i.monitoring)==null?void 0:Le.applicationInsights,e.jsx(k,{content:((Ae=l("applicationInsights"))==null?void 0:Ae.content)||"Application performance monitoring service",title:(Pe=l("applicationInsights"))==null?void 0:Pe.title,detailedContent:(Me=l("applicationInsights"))==null?void 0:Me.detailedContent,size:"small"})]}),e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"Log Analytics:"})," ",(ze=i.monitoring)==null?void 0:ze.logAnalyticsWorkspace,e.jsx(k,{content:((Be=l("logAnalytics"))==null?void 0:Be.content)||"Centralized logging service",title:($e=l("logAnalytics"))==null?void 0:$e.title,detailedContent:(He=l("logAnalytics"))==null?void 0:He.detailedContent,size:"small"})]}),e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"Kusto Cluster:"})," ",(Ee=i.monitoring)==null?void 0:Ee.kustoCluster,e.jsx(k,{content:((Ge=l("kusto"))==null?void 0:Ge.content)||"Fast data exploration service",title:(Re=l("kusto"))==null?void 0:Re.title,detailedContent:(Oe=l("kusto"))==null?void 0:Oe.detailedContent,size:"small"})]}),e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"Alert Rules:"}),e.jsx(k,{content:"Automated monitoring rules that trigger notifications based on system conditions",title:"Alert Rules",detailedContent:"Include performance thresholds, error rate monitoring, resource utilization alerts, and custom business logic triggers.",size:"small"}),e.jsx("div",{className:s.alertList,children:(We=(Ve=i.monitoring)==null?void 0:Ve.alertRules)==null?void 0:We.map((t,r)=>e.jsx("span",{className:s.alertRule,children:t},r))})]})]})]}),e.jsxs("div",{className:s.detailSection,children:[e.jsx("h4",{className:s.detailTitle,children:"ðŸ”— Dependencies & External APIs"}),e.jsxs("div",{className:s.techDetails,children:[e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"Key Vault:"})," ",(qe=i.dependencies)==null?void 0:qe.keyVault]}),e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"Service Accounts:"}),e.jsx("div",{className:s.tagList,children:(Ue=(Fe=i.dependencies)==null?void 0:Fe.serviceAccounts)==null?void 0:Ue.map((t,r)=>e.jsx("span",{className:s.serviceTag,children:t},r))})]}),((Qe=i.dependencies)==null?void 0:Qe.externalApis)&&i.dependencies.externalApis.length>0&&e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"External APIs:"}),e.jsx("div",{className:s.tagList,children:i.dependencies.externalApis.map((t,r)=>e.jsx("span",{className:s.apiTag,children:t},r))})]}),e.jsxs("div",{className:s.techItem,children:[e.jsx("strong",{children:"Network:"}),e.jsx("div",{className:s.tagList,children:(Xe=(Ke=i.dependencies)==null?void 0:Ke.networkConnections)==null?void 0:Xe.map((t,r)=>e.jsx("span",{className:s.networkTag,children:t},r))})]})]})]}),(i.hasErrors||i.status==="failed"||i.status==="warning")&&e.jsxs("div",{className:s.detailSection,children:[e.jsxs("h4",{className:s.detailTitle,children:["ðŸš¨ Error Information & Diagnostics",i.errorCount&&i.errorCount>0&&e.jsxs("span",{className:s.errorBadge,children:[i.errorCount," errors"]})]}),((Ye=i.pipelineData)==null?void 0:Ye.currentError)&&e.jsxs("div",{className:s.errorDetails,children:[e.jsxs("div",{className:s.errorHeader,children:[e.jsx(W,{size:16,className:s.errorIcon}),e.jsxs("div",{children:[e.jsx("div",{className:s.errorMessage,children:i.pipelineData.currentError.errorMessage}),e.jsxs("div",{className:s.errorMeta,children:[e.jsx("span",{className:s.errorCode,children:i.pipelineData.currentError.errorCode}),e.jsx("span",{className:s.errorTime,children:new Date(i.pipelineData.currentError.timestamp).toLocaleString()})]})]})]}),i.pipelineData.currentError.suggestedActions&&e.jsxs("div",{className:s.suggestedActions,children:[e.jsx("strong",{children:"Quick Actions:"}),e.jsx("ul",{children:i.pipelineData.currentError.suggestedActions.slice(0,3).map((t,r)=>e.jsx("li",{children:t},r))})]}),e.jsxs("button",{className:s.viewFullErrorButton,onClick:()=>A(!0),children:[e.jsx(W,{size:14}),"View Complete Error Details"]})]})]}),e.jsxs("div",{className:s.detailSection,children:[e.jsx("h4",{className:s.detailTitle,children:"ðŸ“Š Logs & Monitoring"}),e.jsx("div",{className:s.monitoringLinks,children:((Je=(Ze=i.pipelineData)==null?void 0:Ze.logReferences)==null?void 0:Je.slice(0,3).map((t,r)=>e.jsxs("button",{className:s.logLink,onClick:()=>window.open(t.logUrl,"_blank"),children:[e.jsx(T,{size:14}),t.logSystem.toUpperCase()," Logs"]},r)))||e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:s.logLink,onClick:()=>{var t;return window.open(`https://portal.azure.com/#@microsoft.onmicrosoft.com/resource/subscriptions/${i.subscriptionId}/resourceGroups/${i.resourceGroup}/providers/Microsoft.Insights/components/${(t=i.monitoring)==null?void 0:t.applicationInsights}/logs`,"_blank")},children:[e.jsx(T,{size:14}),"Application Insights"]}),e.jsxs("button",{className:s.logLink,onClick:()=>{var t;return window.open(`https://portal.azure.com/#@microsoft.onmicrosoft.com/resource/subscriptions/${i.subscriptionId}/resourceGroups/${i.resourceGroup}/providers/Microsoft.OperationalInsights/workspaces/${(t=i.monitoring)==null?void 0:t.logAnalyticsWorkspace}`,"_blank")},children:[e.jsx(T,{size:14}),"Log Analytics"]}),e.jsxs("button",{className:s.logLink,onClick:()=>{var t;return window.open(`https://${(t=i.monitoring)==null?void 0:t.kustoCluster}.kusto.windows.net`,"_blank")},children:[e.jsx(T,{size:14}),"Kusto Explorer"]})]})}),e.jsxs("div",{className:s.communicationLinks,children:[((et=i.pipelineData)==null?void 0:et.slackChannel)&&e.jsxs("button",{className:s.commLink,onClick:()=>window.open(`slack://channel?team=T123&id=${i.pipelineData.slackChannel}`,"_blank"),children:[e.jsx(T,{size:14}),"Slack: #",i.pipelineData.slackChannel]}),((tt=i.pipelineData)==null?void 0:tt.teamsChannel)&&e.jsxs("button",{className:s.commLink,onClick:()=>window.open(i.pipelineData.teamsChannel,"_blank"),children:[e.jsx(T,{size:14}),"Teams Channel"]}),((st=i.pipelineData)==null?void 0:st.grafanaUrl)&&e.jsxs("button",{className:s.commLink,onClick:()=>window.open(i.pipelineData.grafanaUrl,"_blank"),children:[e.jsx(ot,{size:14}),"Grafana Dashboard"]})]})]})]})]})]})]}),e.jsxs("div",{className:s.summaryGrid,children:[e.jsxs("div",{className:s.summaryCard,children:[e.jsx("div",{className:s.summaryIcon,children:e.jsx(T,{size:24})}),e.jsxs("div",{className:s.summaryContent,children:[e.jsx("div",{className:s.summaryValue,children:I.filter(t=>t.type==="source").length}),e.jsx("div",{className:s.summaryLabel,children:"Data Sources"})]})]}),e.jsxs("div",{className:s.summaryCard,children:[e.jsx("div",{className:s.summaryIcon,children:e.jsx(gt,{size:24})}),e.jsxs("div",{className:s.summaryContent,children:[e.jsx("div",{className:s.summaryValue,children:I.filter(t=>["ingestion","transformation","enrichment"].includes(t.type)).length}),e.jsx("div",{className:s.summaryLabel,children:"Processing Pipelines"})]})]}),e.jsxs("div",{className:s.summaryCard,children:[e.jsx("div",{className:s.summaryIcon,children:e.jsx(ft,{size:24})}),e.jsxs("div",{className:s.summaryContent,children:[e.jsx("div",{className:s.summaryValue,children:b.length}),e.jsx("div",{className:s.summaryLabel,children:"Data Flows"})]})]}),e.jsxs("div",{className:s.summaryCard,children:[e.jsx("div",{className:s.summaryIcon,children:e.jsx(T,{size:24})}),e.jsxs("div",{className:s.summaryContent,children:[e.jsx("div",{className:s.summaryValue,children:I.filter(t=>t.type==="destination").length}),e.jsx("div",{className:s.summaryLabel,children:"Destinations"})]})]})]}),H&&i&&i.pipelineData&&e.jsx(qs,{isOpen:H,onClose:()=>A(!1),pipelineName:i.pipelineData.name,currentError:i.pipelineData.currentError,errorHistory:i.pipelineData.errorHistory||[],logReferences:i.pipelineData.logReferences||[],metricsHistory:i.pipelineData.metricsHistory||[],impactAnalysis:i.pipelineData.impactAnalysis,runbooks:i.pipelineData.runbooks||[],oncallTeam:i.pipelineData.oncallTeam||"MSTIC Data Engineering",slackChannel:i.pipelineData.slackChannel,teamsChannel:i.pipelineData.teamsChannel,dashboardUrl:i.pipelineData.dashboardUrl,grafanaUrl:i.pipelineData.grafanaUrl,healthCheckUrl:i.pipelineData.healthCheckUrl}),e.jsx(jt,{isOpen:R,onClose:()=>P(!1),section:"dataLineage"})]})});Da.displayName="DataLineage";export{Da as default};
//# sourceMappingURL=DataLineage-NrrNupmY.js.map
