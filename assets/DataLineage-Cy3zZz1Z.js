import{j as e,m as ie}from"./index-CXwfwQ1z.js";import{r as j}from"./charts-DwVu4C-4.js";import{n as as,A as W,E as ee,t as Ke,u as ce,v as U,s as re,o as se,w as ps,x as gs,y as _s,i as ns,d as fs,S as de,m as Q,C as me,r as oe,q as le,T as F,Z as is,h as Je,j as xs,D as Xe,z as Ye,G as Ze,H as es,X as ys,B as js,J as vs,b as ss}from"./icons-CRfBaCPX.js";import{H as Ns}from"./HowItWorksModal-DA6aht44.js";import{C as Ss}from"./ChallengesModal-CXJL8IDH.js";import"./vendor-Csw2ODfV.js";import"./router-Uvrq3glh.js";const bs="_modalOverlay_f9ny3_2",Cs="_modal_f9ny3_2",Is="_modalHeader_f9ny3_29",Ls="_modalTitle_f9ny3_38",ks="_pipelineName_f9ny3_45",Ts="_operationsSection_f9ny3_53",ws="_contactSection_f9ny3_73",As="_contactGrid_f9ny3_80",Ms="_contactCard_f9ny3_86",Ps="_teamInfo_f9ny3_102",zs="_teamName_f9ny3_108",Ds="_contactMethods_f9ny3_114",Es="_contactButton_f9ny3_119",$s="_escalationPath_f9ny3_137",Bs="_escalationLevel_f9ny3_143",Hs="_escalationOrder_f9ny3_150",Rs="_escalationRole_f9ny3_163",Gs="_keyContacts_f9ny3_168",qs="_contactPerson_f9ny3_174",Os="_contactName_f9ny3_181",Vs="_contactRole_f9ny3_187",Us="_contactDetails_f9ny3_193",Fs="_contactEmail_f9ny3_199",Ws="_contactPhone_f9ny3_200",Qs="_contactSlack_f9ny3_201",Ks="_slaSection_f9ny3_210",Js="_slaGrid_f9ny3_217",Xs="_slaCard_f9ny3_223",Ys="_slaLabel_f9ny3_231",Zs="_slaValue_f9ny3_240",et="_slaTarget_f9ny3_247",st="_techSection_f9ny3_253",tt="_techGrid_f9ny3_260",at="_techCard_f9ny3_266",nt="_techLabel_f9ny3_273",it="_techValue_f9ny3_282",ct="_configSection_f9ny3_290",rt="_configGrid_f9ny3_297",ot="_configCard_f9ny3_303",lt="_configLabel_f9ny3_310",dt="_configValue_f9ny3_319",mt="_complianceList_f9ny3_338",ut="_complianceBadge_f9ny3_344",ht="_perfSection_f9ny3_356",pt="_perfGrid_f9ny3_363",gt="_perfCard_f9ny3_369",_t="_perfLabel_f9ny3_377",ft="_perfValue_f9ny3_386",xt="_troubleshootSection_f9ny3_393",yt="_troubleshootGrid_f9ny3_400",jt="_troubleshootCard_f9ny3_406",vt="_issuesList_f9ny3_420",Nt="_issueItem_f9ny3_429",St="_endpointsList_f9ny3_438",bt="_endpointButton_f9ny3_444",Ct="_queriesList_f9ny3_462",It="_queryItem_f9ny3_468",Lt="_queryHeader_f9ny3_475",kt="_queryCode_f9ny3_484",Tt="_closeButton_f9ny3_495",wt="_quickActions_f9ny3_511",At="_actionButton_f9ny3_520",Mt="_tabNav_f9ny3_545",Pt="_tab_f9ny3_545",zt="_activeTab_f9ny3_571",Dt="_errorBadge_f9ny3_577",Et="_modalContent_f9ny3_587",$t="_tabContent_f9ny3_593",Bt="_currentError_f9ny3_598",Ht="_errorHeader_f9ny3_606",Rt="_errorInfo_f9ny3_613",Gt="_errorIcon_f9ny3_619",qt="_errorTitle_f9ny3_625",Ot="_errorMeta_f9ny3_633",Vt="_errorCode_f9ny3_639",Ut="_errorTime_f9ny3_645",Ft="_severityBadge_f9ny3_650",Wt="_stackTrace_f9ny3_660",Qt="_stackHeader_f9ny3_664",Kt="_copyButton_f9ny3_677",Jt="_stackContent_f9ny3_695",Xt="_suggestedActions_f9ny3_709",Yt="_actionsList_f9ny3_719",Zt="_actionItem_f9ny3_725",ea="_actionIcon_f9ny3_734",sa="_context_f9ny3_741",ta="_contextGrid_f9ny3_751",aa="_contextItem_f9ny3_757",na="_contextKey_f9ny3_767",ia="_contextValue_f9ny3_774",ca="_noError_f9ny3_782",ra="_noErrorIcon_f9ny3_788",oa="_errorHistory_f9ny3_800",la="_historyList_f9ny3_810",da="_historyItem_f9ny3_816",ma="_historyIcon_f9ny3_831",ua="_historyContent_f9ny3_836",ha="_historyMessage_f9ny3_840",pa="_historyMeta_f9ny3_846",ga="_historySeverity_f9ny3_853",_a="_logsSection_f9ny3_863",fa="_logsList_f9ny3_869",xa="_logItem_f9ny3_875",ya="_logHeader_f9ny3_882",ja="_logSystem_f9ny3_889",va="_logButton_f9ny3_898",Na="_logMeta_f9ny3_916",Sa="_queryTemplate_f9ny3_925",ba="_metricsSection_f9ny3_955",Ca="_metricsPlaceholder_f9ny3_961",Ia="_metricsInfo_f9ny3_980",La="_grafanaButton_f9ny3_986",ka="_impactSection_f9ny3_1007",Ta="_impactOverview_f9ny3_1013",wa="_impactLevel_f9ny3_1020",Aa="_impactBadge_f9ny3_1025",Ma="_impactGrid_f9ny3_1035",Pa="_impactCard_f9ny3_1041",za="_affectedList_f9ny3_1054",Da="_affectedItem_f9ny3_1060",Ea="_impactMetric_f9ny3_1073",$a="_noImpact_f9ny3_1079",Ba="_runbooksSection_f9ny3_1097",Ha="_runbooksList_f9ny3_1103",Ra="_runbookItem_f9ny3_1110",Ga="_runbookHeader_f9ny3_1117",qa="_runbookMeta_f9ny3_1130",Oa="_runbookDescription_f9ny3_1138",Va="_runbookButton_f9ny3_1144",Ua="_oncallInfo_f9ny3_1163",Fa="_oncallDetails_f9ny3_1174",n={modalOverlay:bs,modal:Cs,modalHeader:Is,modalTitle:Ls,pipelineName:ks,operationsSection:Ts,contactSection:ws,contactGrid:As,contactCard:Ms,teamInfo:Ps,teamName:zs,contactMethods:Ds,contactButton:Es,escalationPath:$s,escalationLevel:Bs,escalationOrder:Hs,escalationRole:Rs,keyContacts:Gs,contactPerson:qs,contactName:Os,contactRole:Vs,contactDetails:Us,contactEmail:Fs,contactPhone:Ws,contactSlack:Qs,slaSection:Ks,slaGrid:Js,slaCard:Xs,slaLabel:Ys,slaValue:Zs,slaTarget:et,techSection:st,techGrid:tt,techCard:at,techLabel:nt,techValue:it,configSection:ct,configGrid:rt,configCard:ot,configLabel:lt,configValue:dt,"criticality-critical":"_criticality-critical_f9ny3_328","criticality-high":"_criticality-high_f9ny3_329","criticality-medium":"_criticality-medium_f9ny3_330","criticality-low":"_criticality-low_f9ny3_331","classification-restricted":"_classification-restricted_f9ny3_333","classification-confidential":"_classification-confidential_f9ny3_334","classification-internal":"_classification-internal_f9ny3_335","classification-public":"_classification-public_f9ny3_336",complianceList:mt,complianceBadge:ut,perfSection:ht,perfGrid:pt,perfCard:gt,perfLabel:_t,perfValue:ft,troubleshootSection:xt,troubleshootGrid:yt,troubleshootCard:jt,issuesList:vt,issueItem:Nt,endpointsList:St,endpointButton:bt,queriesList:Ct,queryItem:It,queryHeader:Lt,queryCode:kt,closeButton:Tt,quickActions:wt,actionButton:At,tabNav:Mt,tab:Pt,activeTab:zt,errorBadge:Dt,modalContent:Et,tabContent:$t,currentError:Bt,errorHeader:Ht,errorInfo:Rt,errorIcon:Gt,errorTitle:qt,errorMeta:Ot,errorCode:Vt,errorTime:Ut,severityBadge:Ft,stackTrace:Wt,stackHeader:Qt,copyButton:Kt,stackContent:Jt,suggestedActions:Xt,actionsList:Yt,actionItem:Zt,actionIcon:ea,context:sa,contextGrid:ta,contextItem:aa,contextKey:na,contextValue:ia,noError:ca,noErrorIcon:ra,errorHistory:oa,historyList:la,historyItem:da,historyIcon:ma,historyContent:ua,historyMessage:ha,historyMeta:pa,historySeverity:ga,logsSection:_a,logsList:fa,logItem:xa,logHeader:ya,logSystem:ja,logButton:va,logMeta:Na,queryTemplate:Sa,metricsSection:ba,metricsPlaceholder:Ca,metricsInfo:Ia,grafanaButton:La,impactSection:ka,impactOverview:Ta,impactLevel:wa,impactBadge:Aa,impactGrid:Ma,impactCard:Pa,affectedList:za,affectedItem:Da,impactMetric:Ea,noImpact:$a,runbooksSection:Ba,runbooksList:Ha,runbookItem:Ra,runbookHeader:Ga,runbookMeta:qa,runbookDescription:Oa,runbookButton:Va,oncallInfo:Ua,oncallDetails:Fa},ts=({isOpen:q,onClose:K,pipelineName:N,currentError:x,errorHistory:i,logReferences:P,metricsHistory:$,impactAnalysis:T,runbooks:z,oncallTeam:D,slackChannel:w,teamsChannel:A,dashboardUrl:J,grafanaUrl:E,healthCheckUrl:X,operationalData:m})=>{var l,Y;const[L,B]=j.useState("error"),[k,H]=j.useState(null);if(!q)return null;const M=async(o,h)=>{try{await navigator.clipboard.writeText(o),H(h),setTimeout(()=>H(null),2e3)}catch(te){console.error("Failed to copy:",te)}},O=o=>{switch(o){case"connection":return e.jsx(is,{className:n.errorIcon});case"data_quality":return e.jsx(Ke,{className:n.errorIcon});case"timeout":return e.jsx(Q,{className:n.errorIcon});case"authentication":return e.jsx(U,{className:n.errorIcon});default:return e.jsx(F,{className:n.errorIcon})}},R=o=>{switch(o){case"critical":return"#ef4444";case"high":return"#f97316";case"medium":return"#eab308";case"low":return"#22c55e";default:return"#6b7280"}};return e.jsx("div",{className:n.modalOverlay,onClick:K,children:e.jsxs("div",{className:n.modal,onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:n.modalHeader,children:[e.jsxs("div",{children:[e.jsx("h2",{className:n.modalTitle,children:"Pipeline Error Details"}),e.jsx("p",{className:n.pipelineName,children:N})]}),e.jsx("button",{className:n.closeButton,onClick:K,children:e.jsx(as,{size:24})})]}),e.jsxs("div",{className:n.quickActions,children:[e.jsxs("button",{className:n.actionButton,onClick:()=>window.open(X,"_blank"),disabled:!X,children:[e.jsx(W,{size:16}),"Health Check"]}),e.jsxs("button",{className:n.actionButton,onClick:()=>window.open(J,"_blank"),disabled:!J,children:[e.jsx(ee,{size:16}),"Dashboard"]}),e.jsxs("button",{className:n.actionButton,onClick:()=>window.open(E,"_blank"),disabled:!E,children:[e.jsx(Ke,{size:16}),"Metrics"]}),w&&e.jsxs("button",{className:n.actionButton,onClick:()=>window.open(`slack://channel?team=T123&id=${w}`,"_blank"),children:[e.jsx(ce,{size:16}),"Slack"]}),A&&e.jsxs("button",{className:n.actionButton,onClick:()=>window.open(A,"_blank"),children:[e.jsx(U,{size:16}),"Teams"]})]}),e.jsx("div",{className:n.tabNav,children:["error","operations","logs","metrics","impact","runbooks"].map(o=>e.jsxs("button",{className:`${n.tab} ${L===o?n.activeTab:""}`,onClick:()=>B(o),children:[o==="operations"?"Operations":o.charAt(0).toUpperCase()+o.slice(1),o==="error"&&x&&e.jsx("span",{className:n.errorBadge,style:{backgroundColor:R(x.severity)},children:x.severity})]},o))}),e.jsxs("div",{className:n.modalContent,children:[L==="error"&&e.jsxs("div",{className:n.tabContent,children:[x?e.jsxs("div",{className:n.currentError,children:[e.jsxs("div",{className:n.errorHeader,children:[e.jsxs("div",{className:n.errorInfo,children:[O(x.errorType),e.jsxs("div",{children:[e.jsx("h3",{className:n.errorTitle,children:x.errorMessage}),e.jsxs("div",{className:n.errorMeta,children:[e.jsxs("span",{className:n.errorCode,children:["Error Code: ",x.errorCode]}),e.jsx("span",{className:n.errorTime,children:new Date(x.timestamp).toLocaleString()})]})]})]}),e.jsx("span",{className:n.severityBadge,style:{backgroundColor:R(x.severity)},children:x.severity})]}),x.stackTrace&&e.jsxs("div",{className:n.stackTrace,children:[e.jsxs("div",{className:n.stackHeader,children:[e.jsx("h4",{children:"Stack Trace"}),e.jsxs("button",{className:n.copyButton,onClick:()=>M(x.stackTrace,"Stack Trace"),children:[e.jsx(re,{size:14}),k==="Stack Trace"?"Copied!":"Copy"]})]}),e.jsx("pre",{className:n.stackContent,children:x.stackTrace})]}),e.jsxs("div",{className:n.suggestedActions,children:[e.jsx("h4",{children:"Suggested Actions"}),e.jsx("ul",{className:n.actionsList,children:x.suggestedActions.map((o,h)=>e.jsxs("li",{className:n.actionItem,children:[e.jsx(se,{size:16,className:n.actionIcon}),o]},h))})]}),x.context&&Object.keys(x.context).length>0&&e.jsxs("div",{className:n.context,children:[e.jsx("h4",{children:"Error Context"}),e.jsx("div",{className:n.contextGrid,children:Object.entries(x.context).map(([o,h])=>e.jsxs("div",{className:n.contextItem,children:[e.jsxs("span",{className:n.contextKey,children:[o,":"]}),e.jsx("span",{className:n.contextValue,children:String(h)})]},o))})]})]}):e.jsxs("div",{className:n.noError,children:[e.jsx(se,{size:48,className:n.noErrorIcon}),e.jsx("h3",{children:"No Current Errors"}),e.jsx("p",{children:"This pipeline is currently running without any detected errors."})]}),i.length>0&&e.jsxs("div",{className:n.errorHistory,children:[e.jsx("h4",{children:"Recent Error History"}),e.jsx("div",{className:n.historyList,children:i.slice(0,5).map((o,h)=>e.jsxs("div",{className:n.historyItem,children:[e.jsx("div",{className:n.historyIcon,children:O(o.errorType)}),e.jsxs("div",{className:n.historyContent,children:[e.jsx("div",{className:n.historyMessage,children:o.errorMessage}),e.jsxs("div",{className:n.historyMeta,children:[e.jsx("span",{children:o.errorCode}),e.jsx("span",{children:new Date(o.timestamp).toLocaleString()})]})]}),e.jsx("span",{className:n.historySeverity,style:{backgroundColor:R(o.severity)},children:o.severity})]},h))})]})]}),L==="operations"&&e.jsx("div",{className:n.tabContent,children:e.jsxs("div",{className:n.operationsSection,children:[e.jsxs("div",{className:n.contactSection,children:[e.jsxs("h3",{children:[e.jsx(U,{size:20}),"Contact Information"]}),e.jsxs("div",{className:n.contactGrid,children:[e.jsxs("div",{className:n.contactCard,children:[e.jsx("h4",{children:"Primary Team"}),e.jsxs("div",{className:n.teamInfo,children:[e.jsx("span",{className:n.teamName,children:((l=m==null?void 0:m.operationalInfo)==null?void 0:l.owner)||D}),e.jsxs("div",{className:n.contactMethods,children:[w&&e.jsxs("button",{className:n.contactButton,onClick:()=>window.open(`slack://channel?team=T123&id=${w}`,"_blank"),children:[e.jsx(ce,{size:14}),"#",w]}),A&&e.jsxs("button",{className:n.contactButton,onClick:()=>window.open(A,"_blank"),children:[e.jsx(U,{size:14}),"Teams Channel"]})]})]})]}),e.jsxs("div",{className:n.contactCard,children:[e.jsx("h4",{children:"Escalation Path"}),e.jsx("div",{className:n.escalationPath,children:(((Y=m==null?void 0:m.operationalInfo)==null?void 0:Y.escalationPath)||["On-call Engineer","Senior Engineer","Team Lead","Principal Engineer"]).map((o,h)=>e.jsxs("div",{className:n.escalationLevel,children:[e.jsx("span",{className:n.escalationOrder,children:h+1}),e.jsx("span",{className:n.escalationRole,children:o})]},h))})]}),(m==null?void 0:m.contactInfo)&&e.jsxs("div",{className:n.contactCard,children:[e.jsx("h4",{children:"Key Contacts"}),e.jsx("div",{className:n.keyContacts,children:m.contactInfo.escalationContacts.slice(0,3).map((o,h)=>e.jsxs("div",{className:n.contactPerson,children:[e.jsx("div",{className:n.contactName,children:o.name}),e.jsx("div",{className:n.contactRole,children:o.role}),e.jsxs("div",{className:n.contactDetails,children:[e.jsxs("span",{className:n.contactEmail,children:[e.jsx(ps,{size:12}),o.email]}),o.phone&&e.jsxs("span",{className:n.contactPhone,children:[e.jsx(gs,{size:12}),o.phone]}),o.slackHandle&&e.jsxs("span",{className:n.contactSlack,children:[e.jsx(ce,{size:12}),"@",o.slackHandle]})]})]},h))})]})]})]}),(m==null?void 0:m.slaMetrics)&&e.jsxs("div",{className:n.slaSection,children:[e.jsxs("h3",{children:[e.jsx(_s,{size:20}),"SLA Metrics"]}),e.jsxs("div",{className:n.slaGrid,children:[e.jsxs("div",{className:n.slaCard,children:[e.jsx("div",{className:n.slaLabel,children:"Current Uptime"}),e.jsxs("div",{className:n.slaValue,children:[m.slaMetrics.uptime.toFixed(2),"%"]}),e.jsxs("div",{className:n.slaTarget,children:["Target: ",m.slaMetrics.targetUptime,"%"]})]}),e.jsxs("div",{className:n.slaCard,children:[e.jsx("div",{className:n.slaLabel,children:"MTTR"}),e.jsxs("div",{className:n.slaValue,children:[m.slaMetrics.mttr," min"]}),e.jsx("div",{className:n.slaTarget,children:"Mean Time To Recovery"})]}),e.jsxs("div",{className:n.slaCard,children:[e.jsx("div",{className:n.slaLabel,children:"MTBF"}),e.jsxs("div",{className:n.slaValue,children:[m.slaMetrics.mtbf," hrs"]}),e.jsx("div",{className:n.slaTarget,children:"Mean Time Between Failures"})]})]})]}),(m==null?void 0:m.technology)&&e.jsxs("div",{className:n.techSection,children:[e.jsxs("h3",{children:[e.jsx(ns,{size:20}),"Technology Stack"]}),e.jsxs("div",{className:n.techGrid,children:[e.jsxs("div",{className:n.techCard,children:[e.jsx("div",{className:n.techLabel,children:"Service"}),e.jsx("div",{className:n.techValue,children:m.technology.stack})]}),e.jsxs("div",{className:n.techCard,children:[e.jsx("div",{className:n.techLabel,children:"Resource Group"}),e.jsx("div",{className:n.techValue,children:m.technology.resourceGroup})]}),e.jsxs("div",{className:n.techCard,children:[e.jsx("div",{className:n.techLabel,children:"Region"}),e.jsx("div",{className:n.techValue,children:m.technology.region})]}),e.jsxs("div",{className:n.techCard,children:[e.jsx("div",{className:n.techLabel,children:"Subscription"}),e.jsx("div",{className:n.techValue,children:m.technology.subscriptionId})]})]})]}),(m==null?void 0:m.operationalInfo)&&e.jsxs("div",{className:n.configSection,children:[e.jsxs("h3",{children:[e.jsx(fs,{size:20}),"Operational Configuration"]}),e.jsxs("div",{className:n.configGrid,children:[e.jsxs("div",{className:n.configCard,children:[e.jsx("div",{className:n.configLabel,children:"Criticality Level"}),e.jsx("div",{className:`${n.configValue} ${n[`criticality-${m.operationalInfo.criticalityLevel}`]}`,children:m.operationalInfo.criticalityLevel.toUpperCase()})]}),e.jsxs("div",{className:n.configCard,children:[e.jsx("div",{className:n.configLabel,children:"Data Classification"}),e.jsxs("div",{className:`${n.configValue} ${n[`classification-${m.operationalInfo.dataClassification}`]}`,children:[e.jsx(de,{size:14}),m.operationalInfo.dataClassification.toUpperCase()]})]}),e.jsxs("div",{className:n.configCard,children:[e.jsx("div",{className:n.configLabel,children:"Maintenance Window"}),e.jsxs("div",{className:n.configValue,children:[e.jsx(Q,{size:14}),m.operationalInfo.maintenanceWindow]})]}),e.jsxs("div",{className:n.configCard,children:[e.jsx("div",{className:n.configLabel,children:"Compliance"}),e.jsx("div",{className:n.complianceList,children:m.operationalInfo.complianceRequirements.map((o,h)=>e.jsx("span",{className:n.complianceBadge,children:o},h))})]})]})]}),(m==null?void 0:m.performanceMetrics)&&e.jsxs("div",{className:n.perfSection,children:[e.jsxs("h3",{children:[e.jsx(me,{size:20}),"Real-time Performance"]}),e.jsxs("div",{className:n.perfGrid,children:[e.jsxs("div",{className:n.perfCard,children:[e.jsx("div",{className:n.perfLabel,children:"Average Latency"}),e.jsxs("div",{className:n.perfValue,children:[m.performanceMetrics.avgLatency,"ms"]})]}),e.jsxs("div",{className:n.perfCard,children:[e.jsx("div",{className:n.perfLabel,children:"P95 Latency"}),e.jsxs("div",{className:n.perfValue,children:[m.performanceMetrics.p95Latency,"ms"]})]}),e.jsxs("div",{className:n.perfCard,children:[e.jsx("div",{className:n.perfLabel,children:"Error Rate"}),e.jsxs("div",{className:n.perfValue,children:[m.performanceMetrics.errorRate.toFixed(2),"%"]})]}),e.jsxs("div",{className:n.perfCard,children:[e.jsx("div",{className:n.perfLabel,children:"Throughput"}),e.jsxs("div",{className:n.perfValue,children:[m.performanceMetrics.throughputMbps," MB/s"]})]}),e.jsxs("div",{className:n.perfCard,children:[e.jsx("div",{className:n.perfLabel,children:"CPU Usage"}),e.jsxs("div",{className:n.perfValue,children:[m.performanceMetrics.cpuUtilization.toFixed(1),"%"]})]}),e.jsxs("div",{className:n.perfCard,children:[e.jsx("div",{className:n.perfLabel,children:"Memory Usage"}),e.jsxs("div",{className:n.perfValue,children:[m.performanceMetrics.memoryUtilization.toFixed(1),"%"]})]})]})]}),(m==null?void 0:m.troubleshooting)&&e.jsxs("div",{className:n.troubleshootSection,children:[e.jsxs("h3",{children:[e.jsx(oe,{size:20}),"Troubleshooting Resources"]}),e.jsxs("div",{className:n.troubleshootGrid,children:[e.jsxs("div",{className:n.troubleshootCard,children:[e.jsx("h4",{children:"Common Issues"}),e.jsx("ul",{className:n.issuesList,children:m.troubleshooting.commonIssues.map((o,h)=>e.jsxs("li",{className:n.issueItem,children:[e.jsx(le,{size:14}),o]},h))})]}),e.jsxs("div",{className:n.troubleshootCard,children:[e.jsx("h4",{children:"Health Check Endpoints"}),e.jsx("div",{className:n.endpointsList,children:m.troubleshooting.healthCheckEndpoints.map((o,h)=>e.jsxs("button",{className:n.endpointButton,onClick:()=>window.open(o,"_blank"),children:[e.jsx(W,{size:14}),"Health Check ",h+1,e.jsx(ee,{size:12})]},h))})]}),e.jsxs("div",{className:n.troubleshootCard,children:[e.jsx("h4",{children:"Diagnostic Queries"}),e.jsx("div",{className:n.queriesList,children:m.troubleshooting.logQuerySamples.slice(0,2).map((o,h)=>e.jsxs("div",{className:n.queryItem,children:[e.jsxs("div",{className:n.queryHeader,children:[e.jsxs("span",{children:["Query ",h+1]}),e.jsxs("button",{className:n.copyButton,onClick:()=>M(o,`Query ${h+1}`),children:[e.jsx(re,{size:12}),k===`Query ${h+1}`?"Copied!":"Copy"]})]}),e.jsx("code",{className:n.queryCode,children:o})]},h))})]})]})]})]})}),L==="logs"&&e.jsx("div",{className:n.tabContent,children:e.jsxs("div",{className:n.logsSection,children:[e.jsx("h3",{children:"Log References"}),e.jsx("div",{className:n.logsList,children:P.map((o,h)=>e.jsxs("div",{className:n.logItem,children:[e.jsxs("div",{className:n.logHeader,children:[e.jsxs("div",{className:n.logSystem,children:[e.jsx(oe,{size:16}),o.logSystem.toUpperCase()]}),e.jsxs("button",{className:n.logButton,onClick:()=>window.open(o.logUrl,"_blank"),children:[e.jsx(ee,{size:14}),"Open Logs"]})]}),e.jsxs("div",{className:n.logMeta,children:[e.jsxs("span",{children:["Correlation ID: ",o.correlationId]}),e.jsxs("span",{children:["Time Range: ",new Date(o.timeRange.start).toLocaleString()," -",new Date(o.timeRange.end).toLocaleString()]})]}),o.queryTemplate&&e.jsxs("div",{className:n.queryTemplate,children:[e.jsxs("div",{className:n.queryHeader,children:[e.jsx("span",{children:"Query Template:"}),e.jsxs("button",{className:n.copyButton,onClick:()=>M(o.queryTemplate,"Query"),children:[e.jsx(re,{size:12}),k==="Query"?"Copied!":"Copy"]})]}),e.jsx("code",{className:n.queryCode,children:o.queryTemplate})]})]},h))})]})}),L==="metrics"&&e.jsx("div",{className:n.tabContent,children:e.jsxs("div",{className:n.metricsSection,children:[e.jsx("h3",{children:"Performance Metrics History"}),e.jsxs("div",{className:n.metricsPlaceholder,children:[e.jsx(W,{size:48}),e.jsx("p",{children:"Interactive metrics charts would be displayed here"}),e.jsx("p",{children:"Showing trends for: Records/sec, Processing Time, Error Rate, Data Quality"}),$.length>0&&e.jsxs("p",{className:n.metricsInfo,children:[$.length," historical data points available"]}),E&&e.jsxs("button",{className:n.grafanaButton,onClick:()=>window.open(E,"_blank"),children:[e.jsx(ee,{size:16}),"View in Grafana"]})]})]})}),L==="impact"&&e.jsx("div",{className:n.tabContent,children:T?e.jsxs("div",{className:n.impactSection,children:[e.jsxs("div",{className:n.impactOverview,children:[e.jsx("h3",{children:"Impact Analysis"}),e.jsx("div",{className:n.impactLevel,children:e.jsxs("span",{className:n.impactBadge,style:{backgroundColor:R(T.businessImpactLevel)},children:[T.businessImpactLevel.toUpperCase()," IMPACT"]})})]}),e.jsxs("div",{className:n.impactGrid,children:[e.jsxs("div",{className:n.impactCard,children:[e.jsx("h4",{children:"Affected Downstream Pipelines"}),e.jsx("div",{className:n.affectedList,children:T.affectedDownstreamPipelines.map((o,h)=>e.jsxs("div",{className:n.affectedItem,children:[e.jsx(le,{size:14}),o]},h))})]}),e.jsxs("div",{className:n.impactCard,children:[e.jsx("h4",{children:"Affected Destinations"}),e.jsx("div",{className:n.affectedList,children:T.affectedDestinations.map((o,h)=>e.jsxs("div",{className:n.affectedItem,children:[e.jsx(le,{size:14}),o]},h))})]}),e.jsxs("div",{className:n.impactCard,children:[e.jsx("h4",{children:"Estimated Data Loss"}),e.jsxs("div",{className:n.impactMetric,children:[T.estimatedDataLoss.toLocaleString()," records"]})]}),e.jsxs("div",{className:n.impactCard,children:[e.jsx("h4",{children:"Recovery Time Estimate"}),e.jsxs("div",{className:n.impactMetric,children:[T.recoveryTimeEstimate," minutes"]})]})]})]}):e.jsxs("div",{className:n.noImpact,children:[e.jsx(se,{size:48}),e.jsx("h3",{children:"No Current Impact"}),e.jsx("p",{children:"This pipeline failure is not currently impacting downstream systems."})]})}),L==="runbooks"&&e.jsx("div",{className:n.tabContent,children:e.jsxs("div",{className:n.runbooksSection,children:[e.jsx("h3",{children:"Resolution Runbooks"}),e.jsx("div",{className:n.runbooksList,children:z.map((o,h)=>e.jsxs("div",{className:n.runbookItem,children:[e.jsxs("div",{className:n.runbookHeader,children:[e.jsx("h4",{children:o.title}),e.jsxs("div",{className:n.runbookMeta,children:[e.jsx(Q,{size:14}),"~",o.estimatedResolutionTime," min"]})]}),e.jsx("p",{className:n.runbookDescription,children:o.description}),e.jsxs("button",{className:n.runbookButton,onClick:()=>window.open(o.url,"_blank"),children:[e.jsx(oe,{size:16}),"Open Runbook"]})]},h))}),e.jsxs("div",{className:n.oncallInfo,children:[e.jsx("h4",{children:"On-Call Team"}),e.jsxs("div",{className:n.oncallDetails,children:[e.jsx(U,{size:16}),e.jsx("span",{children:D})]})]})]})})]})]})})},Wa="_dataLineage_g30cd_2",Qa="_header_g30cd_9",Ka="_headerContent_g30cd_13",Ja="_titleSection_g30cd_19",Xa="_title_g30cd_19",Ya="_infoButton_g30cd_37",Za="_subtitle_g30cd_57",en="_mainContent_g30cd_64",sn="_controls_g30cd_70",tn="_searchContainer_g30cd_82",an="_searchIcon_g30cd_89",nn="_searchInput_g30cd_99",cn="_filterSelect_g30cd_120",rn="_clearButton_g30cd_137",on="_active_g30cd_156",ln="_buttonIcon_g30cd_162",dn="_toggleButton_g30cd_167",mn="_filterIndicator_g30cd_197",un="_clearFilterButton_g30cd_210",hn="_contentGrid_g30cd_225",pn="_visualizationPanel_g30cd_232",gn="_legend_g30cd_241",_n="_legendItem_g30cd_253",fn="_legendDot_g30cd_262",xn="_source_g30cd_269",yn="_ingestion_g30cd_273",jn="_transformation_g30cd_277",vn="_enrichment_g30cd_281",Nn="_destination_g30cd_285",Sn="_legendSeparator_g30cd_290",bn="_legendProcessingBadge_g30cd_298",Cn="_streaming_g30cd_310",In="_microBatch_g30cd_316",Ln="_batch_g30cd_322",kn="_hybrid_g30cd_328",Tn="_lineageContainer_g30cd_334",wn="_lineageSvg_g30cd_342",An="_sectionLabel_g30cd_349",Mn="_nodeGroup_g30cd_356",Pn="_nodeRect_g30cd_361",zn="_selectedNode_g30cd_373",Dn="_nodeText_g30cd_379",En="_nodeSubtext_g30cd_384",$n="_connectionLine_g30cd_389",Bn="_flowDot_g30cd_393",Hn="_glow_g30cd_1",Rn="_tooltip_g30cd_398",Gn="_nodePopup_g30cd_404",qn="_popupSlideIn_g30cd_1",On="_nodePopupExpanded_g30cd_420",Vn="_popupHeader_g30cd_438",Un="_popupTitle_g30cd_447",Fn="_popupActions_g30cd_457",Wn="_popupButton_g30cd_463",Qn="_expandButtonContainer_g30cd_481",Kn="_expandButton_g30cd_481",Jn="_popupContent_g30cd_507",Xn="_quickInfo_g30cd_511",Yn="_quickInfoItem_g30cd_518",Zn="_quickInfoLabel_g30cd_524",ei="_quickInfoValue_g30cd_532",si="_statusBadge_g30cd_541",ti="_statusHealthy_g30cd_550",ai="_statusWarning_g30cd_556",ni="_statusFailed_g30cd_562",ii="_statusProcessing_g30cd_568",ci="_processingModeBadge_g30cd_575",ri="_expandedContent_g30cd_628",oi="_expandedSection_g30cd_635",li="_expandedSectionTitle_g30cd_642",di="_expandedSectionContent_g30cd_652",mi="_detailItem_g30cd_658",ui="_detailLabel_g30cd_665",hi="_detailValue_g30cd_669",pi="_tagList_g30cd_674",gi="_tag_g30cd_674",_i="_popupOverlay_g30cd_690",fi="_metricGrid_g30cd_701",xi="_metricItem_g30cd_708",yi="_metricValue_g30cd_716",ji="_metricLabel_g30cd_723",vi="_sidePanel_g30cd_757",Ni="_summaryGrid_g30cd_790",Si="_errorBadge_g30cd_800",bi="_warning_g30cd_818",Ci="_nodeWithErrors_g30cd_822",Ii="_clickHint_g30cd_832",Li="_errorNode_g30cd_853",ki="_warningNode_g30cd_859",Ti="_techDetails_g30cd_866",wi="_techItem_g30cd_872",Ai="_protocolTag_g30cd_897",Mi="_serviceTag_g30cd_897",Pi="_apiTag_g30cd_897",zi="_networkTag_g30cd_897",Di="_alertRule_g30cd_897",Ei="_alertList_g30cd_935",$i="_troubleshootingActions_g30cd_942",Bi="_actionButton_g30cd_948",Hi="_errorDetails_g30cd_974",Ri="_errorHeader_g30cd_982",Gi="_errorIcon_g30cd_989",qi="_errorMessage_g30cd_995",Oi="_errorMeta_g30cd_1002",Vi="_errorCode_g30cd_1008",Ui="_errorTime_g30cd_1018",Fi="_suggestedActions_g30cd_1023",Wi="_viewFullErrorButton_g30cd_1047",Qi="_monitoringLinks_g30cd_1076",Ki="_logLink_g30cd_1083",Ji="_communicationLinks_g30cd_1104",Xi="_commLink_g30cd_1113",Yi="_detailTitle_g30cd_1135",Zi="_pulse_g30cd_1",ec="_linkList_g30cd_1153",sc="_link_g30cd_1153",tc="_codeSnippets_g30cd_1175",ac="_codeSnippet_g30cd_1175",nc="_summaryCard_g30cd_1208",ic="_summaryIcon_g30cd_1244",cc="_summaryContent_g30cd_1282",rc="_summaryValue_g30cd_1289",oc="_summaryLabel_g30cd_1301",lc="_alertBadge_g30cd_1322",dc="_alertBadgeText_g30cd_1327",t={dataLineage:Wa,header:Qa,headerContent:Ka,titleSection:Ja,title:Xa,infoButton:Ya,subtitle:Za,mainContent:en,controls:sn,searchContainer:tn,searchIcon:an,searchInput:nn,filterSelect:cn,clearButton:rn,active:on,buttonIcon:ln,toggleButton:dn,filterIndicator:mn,clearFilterButton:un,contentGrid:hn,visualizationPanel:pn,legend:gn,legendItem:_n,legendDot:fn,source:xn,ingestion:yn,transformation:jn,enrichment:vn,destination:Nn,legendSeparator:Sn,legendProcessingBadge:bn,streaming:Cn,microBatch:In,batch:Ln,hybrid:kn,lineageContainer:Tn,lineageSvg:wn,sectionLabel:An,nodeGroup:Mn,nodeRect:Pn,selectedNode:zn,nodeText:Dn,nodeSubtext:En,connectionLine:$n,flowDot:Bn,glow:Hn,tooltip:Rn,nodePopup:Gn,popupSlideIn:qn,nodePopupExpanded:On,popupHeader:Vn,popupTitle:Un,popupActions:Fn,popupButton:Wn,expandButtonContainer:Qn,expandButton:Kn,popupContent:Jn,quickInfo:Xn,quickInfoItem:Yn,quickInfoLabel:Zn,quickInfoValue:ei,statusBadge:si,statusHealthy:ti,statusWarning:ai,statusFailed:ni,statusProcessing:ii,processingModeBadge:ci,expandedContent:ri,expandedSection:oi,expandedSectionTitle:li,expandedSectionContent:di,detailItem:mi,detailLabel:ui,detailValue:hi,tagList:pi,tag:gi,popupOverlay:_i,metricGrid:fi,metricItem:xi,metricValue:yi,metricLabel:ji,sidePanel:vi,summaryGrid:Ni,errorBadge:Si,warning:bi,nodeWithErrors:Ci,clickHint:Ii,errorNode:Li,warningNode:ki,techDetails:Ti,techItem:wi,protocolTag:Ai,serviceTag:Mi,apiTag:Pi,networkTag:zi,alertRule:Di,alertList:Ei,troubleshootingActions:$i,actionButton:Bi,errorDetails:Hi,errorHeader:Ri,errorIcon:Gi,errorMessage:qi,errorMeta:Oi,errorCode:Vi,errorTime:Ui,suggestedActions:Fi,viewFullErrorButton:Wi,monitoringLinks:Qi,logLink:Ki,communicationLinks:Ji,commLink:Xi,detailTitle:Yi,pulse:Zi,linkList:ec,link:sc,codeSnippets:tc,codeSnippet:ac,summaryCard:nc,summaryIcon:ic,summaryContent:cc,summaryValue:rc,summaryLabel:oc,alertBadge:lc,"pulse-alert":"_pulse-alert_g30cd_1",alertBadgeText:dc,"flow-dash":"_flow-dash_g30cd_1"},mc=j.memo(()=>{var ue,he,pe,ge,_e,fe,xe,ye,je,ve,Ne,Se,be,Ce,Ie,Le,ke,Te,we,Ae,Me,Pe,ze,De,Ee,$e,Be,He,Re,Ge,qe,Oe,Ve,Ue,Fe,We,Qe;const[q,K]=j.useState(""),[N,x]=j.useState("all"),[i,P]=j.useState(null),[$,T]=j.useState(null),[z,D]=j.useState([]),[w,A]=j.useState(!1),[J,E]=j.useState(!1),[X,m]=j.useState(!1),[L,B]=j.useState(!1),[k,H]=j.useState({x:0,y:0}),[M,O]=j.useState(!1),R=j.useRef(null),l=a=>{let r=0;for(let d=0;d<a.length;d++){const u=a.charCodeAt(d);r=(r<<5)-r+u,r=r&r}return Math.abs(r)/2147483647},Y=()=>{const a=[],r=[],d=["LinkedIn","Twitter","Office365","AzureAD","GitHub","ThreatIntel","Exchange","Teams","SharePoint","PowerBI"];d.forEach((s,v)=>{var S;const f=l(`${s}-status`),_=["healthy","warning","failed"],p=_[Math.floor(f*_.length)],c=ie.filter(ne=>ne.source===s),b=c.length>0?c[0]:null;a.push({id:`source-${s}`,name:s,type:"source",source:s,x:50,y:80+v*70,status:p,recordsPerSecond:Math.floor(l(`${s}-records`)*1e3)+100,avgProcessingTime:Math.floor(l(`${s}-time`)*500)+50,connections:[],description:`Data ingestion from ${s} platform`,lastUpdate:new Date(Date.now()-l(`${s}-update`)*36e5).toISOString(),dataQuality:Math.floor(l(`${s}-quality`)*20)+80,pipelineData:b,hasErrors:p==="failed"||p==="warning",errorCount:((S=b==null?void 0:b.errorHistory)==null?void 0:S.length)||(p==="failed"?3:p==="warning"?1:0),technology:s==="Office365"||s==="Exchange"||s==="Teams"||s==="SharePoint"?"Microsoft Graph API":s==="AzureAD"?"Azure Active Directory Logs":s==="LinkedIn"||s==="Twitter"?"Azure Event Hubs":s==="GitHub"?"GitHub REST API â†’ Azure Logic Apps":s==="ThreatIntel"?"Microsoft Defender for Threat Intelligence API":"Azure Event Hubs",resourceGroup:"rg-mstic-prod-eastus2",subscriptionId:"mstic-prod-subscription",region:"East US 2",throughputUnits:["LinkedIn","Twitter"].includes(s)?20:10,partitionCount:["LinkedIn","Twitter"].includes(s)?32:16,retentionDays:7,protocols:s==="Office365"||s==="AzureAD"?["HTTPS","OAuth 2.0"]:s==="GitHub"?["HTTPS","Webhook"]:["HTTPS","AMQP 1.0","Kafka"],authentication:s==="Office365"||s==="AzureAD"?"Managed Identity + Application Registration":s==="GitHub"?"GitHub App + Personal Access Token":"Managed Identity + Shared Access Key",monitoring:{applicationInsights:"ai-mstic-ingestion-prod",logAnalyticsWorkspace:"law-mstic-prod-eastus2",kustoCluster:"msticdata.eastus2.kusto.windows.net",alertRules:[`${s}_ingestion_failure`,`${s}_throughput_low`,`${s}_latency_high`]},dependencies:{keyVault:"kv-mstic-secrets-prod",serviceAccounts:[`sa-${s.toLowerCase()}-ingestion`],externalApis:s==="Office365"?["graph.microsoft.com"]:s==="GitHub"?["api.github.com"]:s==="LinkedIn"?["api.linkedin.com"]:s==="Twitter"?["api.twitter.com"]:[],networkConnections:["Virtual Network Gateway","Private Endpoints","Service Endpoints"]},slaMetrics:{uptime:Math.max(95,100-l(`${s}-uptime`)*5),targetUptime:99.9,mttr:Math.floor(l(`${s}-mttr`)*30)+5,mtbf:Math.floor(l(`${s}-mtbf`)*168)+24},operationalInfo:{owner:s==="Office365"||s==="AzureAD"?"MSTIC Identity Team":s==="GitHub"||s==="LinkedIn"?"MSTIC External Feeds Team":"MSTIC Data Ingestion Team",escalationPath:["On-call Engineer","Team Lead","Principal Engineer","Engineering Manager"],maintenanceWindow:"Sundays 02:00-04:00 UTC",criticalityLevel:["Office365","AzureAD","ThreatIntel"].includes(s)?"critical":["LinkedIn","Twitter"].includes(s)?"high":"medium",dataClassification:["Office365","AzureAD"].includes(s)?"confidential":"internal",complianceRequirements:["Office365","AzureAD"].includes(s)?["GDPR","SOX","ISO 27001","FedRAMP"]:["GDPR","ISO 27001"]},performanceMetrics:{avgLatency:Math.floor(l(`${s}-latency`)*200)+50,p95Latency:Math.floor(l(`${s}-p95`)*500)+100,errorRate:Math.round(l(`${s}-errors`)*2*100)/100,throughputMbps:Math.floor(l(`${s}-throughput`)*100)+10,cpuUtilization:Math.floor(l(`${s}-cpu`)*30)+20,memoryUtilization:Math.floor(l(`${s}-memory`)*40)+30},troubleshooting:{commonIssues:[`${s} API rate limiting`,"Authentication token expiration","Network connectivity issues","Data format validation errors"],runbookUrls:[`https://mstic.wiki/runbooks/${s.toLowerCase()}-ingestion`,`https://mstic.wiki/troubleshooting/${s.toLowerCase()}-common-issues`],logQuerySamples:[`${s}Ingestion_CL | where TimeGenerated > ago(1h) | where Level == "Error"`,`${s}Metrics_CL | summarize avg(RecordsPerSecond) by bin(TimeGenerated, 5m)`],healthCheckEndpoints:[`https://mstic-monitoring.azurewebsites.net/health/${s.toLowerCase()}`,`https://mstic-api.azurewebsites.net/status/${s.toLowerCase()}`]},processingMode:["LinkedIn","Twitter","ThreatIntel"].includes(s)?"streaming":"batch",dataMovementTool:s==="Office365"||s==="Exchange"||s==="Teams"||s==="SharePoint"?"Microsoft Graph API + Azure Logic Apps":s==="AzureAD"?"Azure AD Logs API + Event Grid":s==="LinkedIn"||s==="Twitter"?"REST API + Azure Event Hubs":s==="GitHub"?"GitHub Webhooks + Azure Logic Apps":"REST API + Azure Functions",batchFrequency:["Office365","AzureAD","Exchange","Teams","SharePoint"].includes(s)?"Every 15 minutes":"N/A (Streaming)",streamingLatency:["LinkedIn","Twitter","ThreatIntel"].includes(s)?"< 10 seconds":"N/A (Batch)",dataFormat:s==="Office365"||s==="Exchange"||s==="Teams"?["JSON","XML"]:s==="AzureAD"?["JSON","CSV"]:["JSON","Avro"],compressionType:["LinkedIn","Twitter"].includes(s)?"LZ4":"GZIP"})}),[{type:"ingestion",x:350},{type:"transformation",x:650},{type:"enrichment",x:950}].forEach(({type:s,x:v})=>{const f={};ie.forEach(c=>{f[c.source]||(f[c.source]=[]),f[c.source].push(c)});const _=[];d.forEach(c=>{const b=f[c]||[];if(b.length>0){const S=Math.floor(l(`${s}-${c}`)*b.length);_.push(b[S])}});const p=_.map((c,b)=>{var S;return{id:`${s}-${c.id}`,name:`${s.charAt(0).toUpperCase()+s.slice(1)} - ${c.name.split(" ").slice(0,3).join(" ")}`,type:s,source:c.source,x:v,y:80+b*70,status:c.status,recordsPerSecond:Math.floor(c.recordsProcessed/60),avgProcessingTime:c.avgProcessingTime,connections:[],description:`${s} pipeline: ${c.name}`,lastUpdate:c.lastRun.toISOString(),dataQuality:Math.floor(l(`${c.id}-quality`)*15)+85,actualPipeline:c,pipelineData:c,hasErrors:c.status==="failed"||c.status==="warning",errorCount:((S=c.errorHistory)==null?void 0:S.length)||0,technology:s==="ingestion"?c.source==="LinkedIn"||c.source==="Twitter"?"Azure Event Hubs + Stream Analytics":c.source==="Office365"||c.source==="AzureAD"?"Azure Data Factory (Copy Activity)":c.source==="GitHub"?"Azure Logic Apps + Azure Functions":"Azure Data Factory + Event Grid":s==="transformation"?c.source==="LinkedIn"||c.source==="Twitter"?"Azure Stream Analytics + Databricks Streaming":c.source==="Office365"||c.source==="Exchange"?"Azure Synapse Analytics (SQL Pool)":c.source==="ThreatIntel"?"Azure Functions + Cosmos DB Change Feed":"Azure Data Factory (Mapping Data Flows)":c.source==="LinkedIn"||c.source==="Twitter"?"Azure Functions (Real-time) + SignalR":c.source==="Office365"||c.source==="AzureAD"?"Azure Cognitive Services + ML Studio":"Azure Databricks (ML Runtime) + MLflow",resourceGroup:`rg-mstic-${s}-prod-eastus2`,subscriptionId:"mstic-prod-subscription",region:"East US 2",computeType:s==="ingestion"?c.source==="LinkedIn"||c.source==="Twitter"?"Event Hubs (20 TUs) + Auto-scale Runtime":c.source==="Office365"||c.source==="AzureAD"?"Integration Runtime (Self-hosted)":"Azure-SSIS Integration Runtime":s==="transformation"?c.source==="LinkedIn"||c.source==="Twitter"?"Stream Analytics (120 SUs) + Databricks (8-node cluster)":c.source==="Office365"||c.source==="Exchange"?"Synapse SQL Pool (DW500c)":"Data Factory Mapping Data Flow (16-core)":c.source==="LinkedIn"||c.source==="Twitter"?"Consumption Plan Functions + SignalR (Standard)":"Databricks ML Runtime (Standard_DS4_v2)",partitionCount:s==="transformation"?64:32,retentionDays:30,protocols:s==="ingestion"?["HTTPS","ODBC","JDBC"]:s==="transformation"?["Spark SQL","Delta Lake"]:["Python","Scala","Delta Lake","MLflow"],authentication:"Managed Identity + Azure Key Vault",monitoring:{applicationInsights:`ai-mstic-${s}-prod`,logAnalyticsWorkspace:"law-mstic-prod-eastus2",kustoCluster:"msticdata.eastus2.kusto.windows.net",alertRules:[`${s}_pipeline_failure`,`${s}_processing_delay`,`${s}_resource_exhaustion`]},dependencies:{keyVault:"kv-mstic-secrets-prod",serviceAccounts:[`sa-${s}-${c.source.toLowerCase()}`],externalApis:s==="enrichment"?["threatintelligence.microsoft.com","virusshare.com"]:[],networkConnections:["Azure Virtual Network","Private Link","Managed Virtual Network"]},processingMode:s==="ingestion"?c.source==="LinkedIn"||c.source==="Twitter"?"streaming":c.source==="Office365"||c.source==="AzureAD"?"batch":"hybrid":s==="transformation"?c.source==="LinkedIn"||c.source==="Twitter"?"micro-batch":c.source==="Office365"||c.source==="Exchange"?"batch":"hybrid":"streaming",dataMovementTool:s==="ingestion"?c.source==="LinkedIn"||c.source==="Twitter"?"Azure Event Hubs + Stream Analytics":c.source==="Office365"||c.source==="AzureAD"?"Azure Data Factory Copy Activity":"Azure Logic Apps + HTTP Connector":s==="transformation"?c.source==="LinkedIn"||c.source==="Twitter"?"Databricks Auto Loader + Delta Live Tables":c.source==="Office365"||c.source==="Exchange"?"Synapse Pipelines + PolyBase":"Azure Data Factory Mapping Data Flows":"Azure Functions + Service Bus",batchFrequency:s==="ingestion"&&["Office365","AzureAD","Exchange","Teams"].includes(c.source)?"Every 15 minutes":s==="transformation"&&["Office365","Exchange","SharePoint"].includes(c.source)?"Hourly (00:15, 01:15, etc.)":"N/A (Streaming)",streamingLatency:["LinkedIn","Twitter","ThreatIntel"].includes(c.source)?s==="ingestion"?"< 30 seconds":s==="transformation"?"< 2 minutes":"< 5 seconds":"N/A (Batch)",dataFormat:s==="ingestion"?c.source==="LinkedIn"||c.source==="Twitter"?["JSON","Avro"]:c.source==="Office365"||c.source==="AzureAD"?["JSON","CSV"]:["JSON","XML"]:s==="transformation"?c.source==="LinkedIn"||c.source==="Twitter"?["Parquet","Delta"]:["Parquet","ORC","Delta"]:["JSON","Parquet"],compressionType:s==="ingestion"?"Snappy":s==="transformation"?"GZIP":"LZ4",slaMetrics:{uptime:Math.max(95,100-l(`${c.id}-uptime`)*5),targetUptime:s==="ingestion"?99.95:99.9,mttr:Math.floor(l(`${c.id}-mttr`)*20)+10,mtbf:Math.floor(l(`${c.id}-mtbf`)*120)+48},operationalInfo:{owner:s==="ingestion"?"MSTIC Data Ingestion Team":s==="transformation"?"MSTIC Data Platform Team":"MSTIC ML Engineering Team",escalationPath:["On-call Engineer","Senior Engineer","Team Lead","Principal Engineer"],maintenanceWindow:s==="transformation"?"Saturdays 01:00-03:00 UTC":"Sundays 03:00-05:00 UTC",criticalityLevel:s==="ingestion"?"high":s==="transformation"?"critical":"medium",dataClassification:"internal",complianceRequirements:["GDPR","ISO 27001","SOC 2"]},performanceMetrics:{avgLatency:s==="ingestion"?Math.floor(l(`${c.id}-lat1`)*100)+20:s==="transformation"?Math.floor(l(`${c.id}-lat2`)*300)+100:Math.floor(l(`${c.id}-lat3`)*500)+200,p95Latency:s==="ingestion"?Math.floor(l(`${c.id}-p95-1`)*200)+50:s==="transformation"?Math.floor(l(`${c.id}-p95-2`)*600)+200:Math.floor(l(`${c.id}-p95-3`)*1e3)+500,errorRate:Math.round(l(`${c.id}-errors`)*1.5*100)/100,throughputMbps:Math.floor(l(`${c.id}-throughput`)*200)+50,cpuUtilization:Math.floor(l(`${c.id}-cpu`)*40)+30,memoryUtilization:Math.floor(l(`${c.id}-memory`)*50)+25},troubleshooting:{commonIssues:[`${s} pipeline timeout issues`,"Resource scaling limitations","Data schema validation errors","Memory pressure during peak loads"],runbookUrls:[`https://mstic.wiki/runbooks/${s}-pipeline-troubleshooting`,`https://mstic.wiki/scaling/${s}-performance-tuning`],logQuerySamples:[`${s.charAt(0).toUpperCase()+s.slice(1)}Pipeline_CL | where TimeGenerated > ago(1h) | where Level == "Error"`,`${s.charAt(0).toUpperCase()+s.slice(1)}Metrics_CL | summarize avg(ProcessingTimeMs) by bin(TimeGenerated, 5m)`],healthCheckEndpoints:[`https://mstic-monitoring.azurewebsites.net/health/${s}`,`https://mstic-${s}.azurewebsites.net/status`]}}});a.push(...p)});const g=[{name:"MSTIC Data Lake",types:["storage","archive"],priority:1},{name:"Threat Intelligence DB",types:["threat","intel"],priority:1},{name:"Security Analytics Store",types:["analytics","ml"],priority:2},{name:"Alert System",types:["realtime","alerts"],priority:1},{name:"ML Training Data",types:["ml","training"],priority:3},{name:"Compliance Archive",types:["compliance","audit"],priority:2},{name:"Real-time Dashboard",types:["realtime","dashboard"],priority:1},{name:"API Gateway",types:["api","external"],priority:2},{name:"Kusto Analytics Engine",types:["kusto","analytics"],priority:1}],C={id:"parquet-staging-pipeline",name:"Parquet Field Extraction Staging",type:"transformation",x:500,y:780,status:"healthy",recordsPerSecond:2340,avgProcessingTime:450,connections:[],description:"Staging table for selective JSON field extraction from high-volume Parquet ingestion",lastUpdate:new Date().toISOString(),dataQuality:98,technology:"Azure Data Factory + Delta Lake + Kusto",resourceGroup:"rg-mstic-staging-prod-eastus2",subscriptionId:"mstic-prod-subscription",region:"East US 2",computeType:"Azure Data Factory Integration Runtime",partitionCount:64,retentionDays:7,protocols:["HTTPS","Delta Lake","KQL"],authentication:"Managed Identity + Service Principal",monitoring:{applicationInsights:"ai-mstic-staging-prod",logAnalyticsWorkspace:"law-mstic-prod-eastus2",kustoCluster:"msticdata.eastus2.kusto.windows.net",alertRules:["parquet_staging_failure","parquet_field_extraction_delay","staging_table_capacity"]},dependencies:{keyVault:"kv-mstic-secrets-prod",serviceAccounts:["sa-parquet-staging"],externalApis:[],networkConnections:["Private Link to Kusto","ADLS Private Endpoint"]},processingMode:"batch",dataMovementTool:"Azure Data Factory + Delta Lake Engine",batchFrequency:"Triggered by file arrival (Event Grid)",streamingLatency:"N/A (Batch Processing)",dataFormat:["Parquet","JSON","Delta"],compressionType:"Snappy (Parquet native)",slaMetrics:{uptime:99.8,targetUptime:99.9,mttr:12,mtbf:168},operationalInfo:{owner:"MSTIC Data Platform Team",escalationPath:["On-call Engineer","Senior Data Engineer","Principal Engineer"],maintenanceWindow:"Saturdays 02:00-04:00 UTC",criticalityLevel:"high",dataClassification:"internal",complianceRequirements:["GDPR","ISO 27001"]},performanceMetrics:{avgLatency:450,p95Latency:850,errorRate:.8,throughputMbps:320,cpuUtilization:45,memoryUtilization:60},troubleshooting:{commonIssues:["JSON field extraction timeout","Parquet schema evolution issues","Kusto ingestion capacity limits","Delta Lake table optimization needed"],runbookUrls:["https://mstic.wiki/runbooks/parquet-staging-troubleshooting","https://mstic.wiki/kusto/field-extraction-optimization"],logQuerySamples:['ParquetStagingPipeline_CL | where TimeGenerated > ago(1h) | where Level == "Error"',"ParquetFieldExtraction_CL | summarize avg(ProcessingTimeMs) by bin(TimeGenerated, 5m)"],healthCheckEndpoints:["https://mstic-monitoring.azurewebsites.net/health/parquet-staging","https://mstic-staging.azurewebsites.net/status/field-extraction"]},scenarioDetails:{problem:"Extract specific JSON fields from thousands of Parquet files per hour",solution:"Staging table with conditional ingestion trigger",sourceFormat:"Parquet files (Azure Data Lake)",targetSystem:"Azure Data Explorer (Kusto)",volumePerHour:"~3,000 files",fieldFilter:"user_activity.threat_indicators",triggerCondition:"IF field_exists AND field_not_null"},stagingDetails:{tableName:"threat_indicators_staging",partitionStrategy:"BY (date_hour, source_system)",retentionPolicy:"7 days (staging only)",compressionRatio:"85%",indexStrategy:"Clustered on timestamp, source_ip"}};g.forEach((s,v)=>{const f=l(`${s.name}-status`),_=["healthy","warning"],p=_[Math.floor(f*_.length)];a.push({id:`dest-${s.name}`,name:s.name,type:"destination",x:1250,y:80+v*70,status:p,recordsPerSecond:Math.floor(l(`${s.name}-records`)*500)+50,avgProcessingTime:Math.floor(l(`${s.name}-time`)*100)+20,connections:[],description:`Data destination: ${s.name}`,lastUpdate:new Date(Date.now()-l(`${s.name}-update`)*18e5).toISOString(),dataQuality:Math.floor(l(`${s.name}-quality`)*10)+90,destinationTypes:s.types,priority:s.priority,technology:s.name.includes("Data Lake")?"Azure Data Lake Storage Gen2 (ADLS)":s.name.includes("DB")||s.name.includes("Database")?"Azure SQL Database (Premium)":s.name.includes("Analytics")?"Azure Synapse Analytics (SQL Pool)":s.name.includes("Alert")?"Azure Logic Apps + Service Bus":s.name.includes("ML")?"Azure Machine Learning Studio":s.name.includes("Compliance")?"Azure Purview + Archive Storage":s.name.includes("Dashboard")?"Power BI Premium + Azure SignalR":"Azure API Management + Application Gateway",resourceGroup:"rg-mstic-storage-prod-eastus2",subscriptionId:"mstic-prod-subscription",region:"East US 2",storageType:s.name.includes("Data Lake")?"Hot (Standard LRS) + Cool Archive":s.name.includes("Analytics")?"Premium SSD + Columnstore Index":s.name.includes("ML")?"Standard SSD + Blob Storage":s.name.includes("Compliance")?"Archive Storage (GRS)":"Standard Storage (ZRS)",partitionCount:s.name.includes("Data Lake")?128:s.name.includes("Analytics")?256:s.name.includes("Alert")?64:32,retentionDays:s.name.includes("Compliance")?2555:s.name.includes("Archive")?365:s.name.includes("ML")?180:90,protocols:s.name.includes("Data Lake")?["HTTPS","REST API","ABFS"]:s.name.includes("DB")?["TDS","HTTPS","ODBC"]:s.name.includes("Alert")?["HTTPS","AMQP","Service Bus"]:s.name.includes("API")?["HTTPS","OAuth 2.0","OpenAPI"]:["HTTPS","WebSocket","REST API"],authentication:s.name.includes("Data Lake")?"Managed Identity + ACLs + RBAC":s.name.includes("DB")?"Managed Identity + SQL Authentication":s.name.includes("ML")?"Service Principal + Workspace MSI":"Managed Identity + Key Vault",monitoring:{applicationInsights:"ai-mstic-destinations-prod",logAnalyticsWorkspace:"law-mstic-prod-eastus2",kustoCluster:"msticdata.eastus2.kusto.windows.net",alertRules:[`${s.name.replace(/\s+/g,"_").toLowerCase()}_capacity`,`${s.name.replace(/\s+/g,"_").toLowerCase()}_latency`,`${s.name.replace(/\s+/g,"_").toLowerCase()}_availability`]},dependencies:{keyVault:"kv-mstic-secrets-prod",serviceAccounts:[`sa-${s.name.replace(/\s+/g,"-").toLowerCase()}`],externalApis:s.name.includes("API")?["partner-apis.microsoft.com"]:[],networkConnections:["Private Endpoints","VNet Integration","Service Endpoints"]},slaMetrics:{uptime:Math.max(98,100-l(`${s.name}-uptime`)*2),targetUptime:s.name.includes("Data Lake")||s.name.includes("Alert")?99.99:99.9,mttr:Math.floor(l(`${s.name}-mttr`)*15)+5,mtbf:Math.floor(l(`${s.name}-mtbf`)*200)+100},operationalInfo:{owner:s.name.includes("Data Lake")||s.name.includes("Analytics")?"MSTIC Data Platform Team":s.name.includes("Alert")||s.name.includes("Dashboard")?"MSTIC Operations Team":s.name.includes("ML")?"MSTIC ML Engineering Team":s.name.includes("Compliance")?"MSTIC Compliance Team":"MSTIC Infrastructure Team",escalationPath:["On-call Engineer","Senior Engineer","Team Lead","Engineering Manager"],maintenanceWindow:s.name.includes("Alert")?"None (24/7 Operations)":"Sundays 01:00-03:00 UTC",criticalityLevel:s.name.includes("Alert")||s.name.includes("Data Lake")?"critical":s.name.includes("Dashboard")||s.name.includes("Analytics")?"high":"medium",dataClassification:s.name.includes("Compliance")?"confidential":"internal",complianceRequirements:s.name.includes("Compliance")?["GDPR","SOX","ISO 27001","FedRAMP","HIPAA"]:["GDPR","ISO 27001","SOC 2"]},performanceMetrics:{avgLatency:s.name.includes("Data Lake")?Math.floor(l(`${s.name}-lat1`)*50)+10:s.name.includes("Alert")?Math.floor(l(`${s.name}-lat2`)*100)+50:s.name.includes("Analytics")?Math.floor(l(`${s.name}-lat3`)*200)+100:Math.floor(l(`${s.name}-lat4`)*150)+75,p95Latency:s.name.includes("Data Lake")?Math.floor(l(`${s.name}-p95-1`)*100)+25:s.name.includes("Alert")?Math.floor(l(`${s.name}-p95-2`)*200)+100:s.name.includes("Analytics")?Math.floor(l(`${s.name}-p95-3`)*500)+250:Math.floor(l(`${s.name}-p95-4`)*300)+150,errorRate:Math.round(l(`${s.name}-errors`)*1*100)/100,throughputMbps:s.name.includes("Data Lake")?Math.floor(l(`${s.name}-through1`)*500)+100:s.name.includes("Analytics")?Math.floor(l(`${s.name}-through2`)*300)+50:Math.floor(l(`${s.name}-through3`)*200)+25,cpuUtilization:Math.floor(l(`${s.name}-cpu`)*25)+15,memoryUtilization:Math.floor(l(`${s.name}-memory`)*35)+20},troubleshooting:{commonIssues:[`${s.name} capacity management`,"Query performance optimization","Connection pool exhaustion","Storage tier optimization"],runbookUrls:[`https://mstic.wiki/runbooks/${s.name.replace(/\s+/g,"-").toLowerCase()}-maintenance`,`https://mstic.wiki/troubleshooting/${s.name.replace(/\s+/g,"-").toLowerCase()}-performance`],logQuerySamples:[`${s.name.replace(/\s+/g,"")}Logs_CL | where TimeGenerated > ago(1h) | where Level == "Error"`,`${s.name.replace(/\s+/g,"")}Metrics_CL | summarize avg(ResponseTimeMs) by bin(TimeGenerated, 5m)`],healthCheckEndpoints:[`https://mstic-monitoring.azurewebsites.net/health/${s.name.replace(/\s+/g,"-").toLowerCase()}`,`https://mstic-storage.azurewebsites.net/status/${s.name.replace(/\s+/g,"-").toLowerCase()}`]},processingMode:s.name.includes("Real-time")||s.name.includes("Alert")?"streaming":"batch",dataMovementTool:s.name.includes("Data Lake")?"PolyBase + COPY INTO (T-SQL)":s.name.includes("Analytics")?"Azure Synapse Pipelines + SQL Pools":s.name.includes("Alert")?"Azure Logic Apps + Service Bus":s.name.includes("ML")?"Azure ML Pipelines + AutoML":s.name.includes("API")?"Azure API Management + Application Gateway":"Azure Data Factory + REST API",batchFrequency:s.name.includes("Real-time")||s.name.includes("Alert")?"N/A (Streaming)":s.name.includes("Compliance")?"Daily at 02:00 UTC":"Hourly (00:30, 01:30, etc.)",streamingLatency:s.name.includes("Real-time")||s.name.includes("Alert")?"< 5 seconds":"N/A (Batch)",dataFormat:s.name.includes("Data Lake")?["Parquet","Delta","JSON"]:s.name.includes("Analytics")?["Parquet","ORC","Columnstore"]:s.name.includes("ML")?["Parquet","CSV","JSON"]:["JSON","Avro"],compressionType:s.name.includes("Data Lake")?"Snappy":s.name.includes("Analytics")?"GZIP":"LZ4"})}),a.push(C),a.push({id:"parquet-source-adls",name:"Azure Data Lake (Parquet)",type:"source",source:"AzureAD",x:50,y:780,status:"healthy",recordsPerSecond:4500,avgProcessingTime:120,connections:[],description:"High-volume Parquet file ingestion from ADLS Gen2",lastUpdate:new Date().toISOString(),dataQuality:96,technology:"Azure Data Lake Storage Gen2",resourceGroup:"rg-mstic-datalake-prod-eastus2",subscriptionId:"mstic-prod-subscription",region:"East US 2",throughputUnits:50,partitionCount:128,retentionDays:30,protocols:["HTTPS","ABFS","REST API"],authentication:"Managed Identity + ACLs",monitoring:{applicationInsights:"ai-mstic-datalake-prod",logAnalyticsWorkspace:"law-mstic-prod-eastus2",kustoCluster:"msticdata.eastus2.kusto.windows.net",alertRules:["parquet_ingestion_failure","parquet_throughput_low","parquet_storage_capacity"]},dependencies:{keyVault:"kv-mstic-secrets-prod",serviceAccounts:["sa-adls-parquet-reader"],externalApis:[],networkConnections:["Private Endpoints","VNet Integration"]},slaMetrics:{uptime:99.95,targetUptime:99.99,mttr:5,mtbf:720},operationalInfo:{owner:"MSTIC Data Platform Team",escalationPath:["On-call Engineer","Storage Lead","Principal Engineer","Engineering Manager"],maintenanceWindow:"Sundays 01:00-02:00 UTC",criticalityLevel:"critical",dataClassification:"internal",complianceRequirements:["GDPR","ISO 27001","SOC 2"]},performanceMetrics:{avgLatency:45,p95Latency:120,errorRate:.05,throughputMbps:850,cpuUtilization:15,memoryUtilization:25},troubleshooting:{commonIssues:["Parquet file format validation errors","Storage tier access delays","Network connectivity to ADLS","Authentication token expiration"],runbookUrls:["https://mstic.wiki/runbooks/adls-parquet-troubleshooting","https://mstic.wiki/storage/adls-performance-optimization"],logQuerySamples:['ADLSParquetIngestion_CL | where TimeGenerated > ago(1h) | where Level == "Error"',"ADLSMetrics_CL | summarize avg(ThroughputMbps) by bin(TimeGenerated, 5m)"],healthCheckEndpoints:["https://mstic-monitoring.azurewebsites.net/health/adls-parquet","https://mstic-datalake.azurewebsites.net/status/parquet-ingestion"]},actualPipeline:null,hasErrors:!1,errorCount:0,processingMode:"batch",dataMovementTool:"ADLS Gen2 REST API + Azure Storage Explorer",batchFrequency:"Continuous (new files every 2-3 minutes)",streamingLatency:"N/A (File-based ingestion)",dataFormat:["Parquet","JSON","Avro"],compressionType:"Snappy (default for Parquet)"}),a.forEach(s=>{if(s.type==="source")a.filter(f=>f.type==="ingestion"&&f.source===s.source).forEach(f=>{const _=`${s.id}-${f.id}`,p=l(`${_}-volume`),c=["low","medium","high"],b=c[Math.floor(p*c.length)];r.push({id:_,from:s.id,to:f.id,volume:b,health:s.status==="failed"?"error":s.status==="warning"?"warning":"healthy",animated:s.status!=="failed"}),s.connections.push(f.id),f.connections.push(s.id)});else if(s.type==="ingestion"){const v=a.find(f=>f.type==="source"&&f.source===s.source);(v==null?void 0:v.status)!=="failed"&&a.filter(_=>_.type==="transformation"&&_.source===s.source).slice(0,2).forEach(_=>{const p=`${s.id}-${_.id}`,c=l(`${p}-volume`),b=["medium","high"],S=b[Math.floor(c*b.length)];r.push({id:p,from:s.id,to:_.id,volume:S,health:s.status==="failed"?"error":s.status==="warning"?"warning":"healthy",animated:s.status!=="failed"}),s.connections.push(_.id),_.connections.push(s.id)})}else if(s.type==="transformation"){const v=a.find(_=>_.type==="ingestion"&&_.source===s.source),f=a.find(_=>_.type==="source"&&_.source===s.source);(f==null?void 0:f.status)!=="failed"&&(v==null?void 0:v.status)!=="failed"&&a.filter(p=>p.type==="enrichment"&&p.source===s.source).slice(0,2).forEach(p=>{const c=`${s.id}-${p.id}`;r.push({id:c,from:s.id,to:p.id,volume:"high",health:s.status==="failed"?"error":s.status==="warning"?"warning":"healthy",animated:s.status!=="failed"}),s.connections.push(p.id),p.connections.push(s.id)})}else if(s.type==="enrichment"){const v=a.find(p=>p.type==="source"&&p.source===s.source),f=a.find(p=>p.type==="ingestion"&&p.source===s.source),_=a.find(p=>p.type==="transformation"&&p.source===s.source);if((v==null?void 0:v.status)!=="failed"&&(f==null?void 0:f.status)!=="failed"&&(_==null?void 0:_.status)!=="failed"){const c={LinkedIn:["Threat Intelligence DB","MSTIC Data Lake","ML Training Data"],Twitter:["Real-time Dashboard","Alert System","Security Analytics Store"],Office365:["Compliance Archive","Security Analytics Store","Alert System"],AzureAD:["Security Analytics Store","Alert System","Threat Intelligence DB"],GitHub:["Threat Intelligence DB","Security Analytics Store","API Gateway"],ThreatIntel:["Alert System","Threat Intelligence DB","Real-time Dashboard"],Exchange:["Compliance Archive","Security Analytics Store","Alert System"],Teams:["Compliance Archive","Real-time Dashboard","Security Analytics Store"],SharePoint:["Compliance Archive","MSTIC Data Lake","Security Analytics Store"],PowerBI:["Real-time Dashboard","Security Analytics Store","API Gateway"]}[s.source]||["MSTIC Data Lake","Security Analytics Store","Alert System"];a.filter(S=>S.type==="destination"&&c.includes(S.name)).forEach(S=>{const ne=`${s.id}-${S.id}`;r.push({id:ne,from:s.id,to:S.id,volume:"high",health:s.status==="failed"?"error":s.status==="warning"?"warning":"healthy",animated:s.status!=="failed"}),s.connections.push(S.id),S.connections.push(s.id)})}}});const y=a.find(s=>s.id==="parquet-source-adls"),I=a.find(s=>s.id==="parquet-staging-pipeline"),Z=a.find(s=>s.name==="Kusto Analytics Engine");return y&&I&&Z&&(r.push({id:"parquet-to-staging",from:y.id,to:I.id,volume:"high",health:"healthy",animated:!0}),y.connections.push(I.id),I.connections.push(y.id),r.push({id:"staging-to-kusto",from:I.id,to:Z.id,volume:"medium",health:"healthy",animated:!0}),I.connections.push(Z.id),Z.connections.push(I.id)),{nodes:a,connections:r}},{nodes:o,connections:h}=j.useMemo(()=>{const a=Y(),r=a.nodes.filter(d=>d.hasErrors);return console.log("Generated nodes:",{total:a.nodes.length,withErrors:r.length,errorNodes:r.map(d=>({id:d.id,name:d.name,status:d.status,errorCount:d.errorCount}))}),a},[]),te=j.useMemo(()=>N==="all"?h:h.filter(a=>{const r=o.find(u=>u.id===a.from),d=o.find(u=>u.id===a.to);return(r==null?void 0:r.source)===N||(d==null?void 0:d.source)===N?!0:(d==null?void 0:d.type)==="destination"?h.filter(g=>{var C;return g.to===d.id&&((C=o.find(y=>y.id===g.from))==null?void 0:C.type)==="enrichment"}).some(g=>{const C=o.find(y=>y.id===g.from);return(C==null?void 0:C.source)===N}):!1}),[o,h,N]),V=o,ae=te;j.useEffect(()=>{D([]),P(null)},[N]),j.useEffect(()=>{const a=()=>{if(L&&i){let u=k.x,g=k.y;u+420>window.innerWidth-20&&(u=window.innerWidth-420-20),g+400>window.innerHeight-20&&(g=window.innerHeight-400-20),u<20&&(u=20),g<20&&(g=20),H({x:u,y:g})}};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[L,i,k]);const G=V.filter(a=>a.name.toLowerCase().includes(q.toLowerCase())||a.source&&a.source.toLowerCase().includes(q.toLowerCase())),cs=a=>{const r=new Set,d=[],u=g=>{if(r.has(g))return;r.add(g),d.push(g);const C=V.find(y=>y.id===g);C&&C.connections.forEach(y=>{r.has(y)||u(y)})};u(a),D(d)},rs=(a,r)=>{O(!1);const d=420,u=400,g=r.clientX,C=r.clientY;let y=g+15,I=C+15;y+d>window.innerWidth-20&&(y=g-d-15),I+u>window.innerHeight-20&&(I=C-u-15),y<20&&(y=20),I<20&&(I=20),d>window.innerWidth-40&&(y=20),u>window.innerHeight-40&&(I=20),H({x:y,y:I}),P(a),B(!0),a.type==="source"&&a.source?(x(a.source),D([])):cs(a.id)},os=()=>{const a=!M;if(O(a),!i)return;const r=a?800:420,d=a?600:400;let u=k.x,g=k.y;u+r>window.innerWidth-20&&(u=window.innerWidth-r-20),g+d>window.innerHeight-20&&(g=window.innerHeight-d-20),u<20&&(u=20),g<20&&(g=20),H({x:u,y:g})},ls=a=>{console.log("Node double-clicked:",{id:a.id,name:a.name,status:a.status,hasErrors:a.hasErrors,errorCount:a.errorCount,hasPipelineData:!!a.pipelineData,pipelineDataKeys:a.pipelineData?Object.keys(a.pipelineData):[]}),(a.status==="failed"||a.status==="warning")&&a.pipelineData?(console.log("Opening error modal for node:",a.name),P(a),A(!0)):console.log("Not opening modal - conditions not met")},ds=a=>{if(z.length>0&&!z.includes(a.id))return"#444";if(N!=="all"){if(a.type==="source"&&a.source===N)return"#0078d4";if(a.type==="source"&&a.source!==N)return"#333";if(a.type!=="source"&&a.type!=="destination")if(a.source===N)switch(a.type){case"ingestion":return"#52c41a";case"transformation":return"#faad14";case"enrichment":return"#8b5cf6";default:return"#888"}else return"#333";if(a.type==="destination")return ae.some(d=>d.to===a.id)?"#ef4444":"#333"}switch(a.type){case"source":return"#0078d4";case"ingestion":return"#52c41a";case"transformation":return"#faad14";case"enrichment":return"#8b5cf6";case"destination":return"#ef4444";default:return"#888"}},ms=a=>{const r=z.includes(a.from)&&z.includes(a.to);return{strokeWidth:a.volume==="high"?"3":a.volume==="medium"?"2":"1",stroke:a.health==="error"?"#ef4444":a.health==="warning"?"#faad14":"#52c41a",opacity:z.length>0?r?"1":"0.2":"0.8",strokeDasharray:a.volume==="low"?"5,5":"none",markerEnd:a.health==="error"?"url(#arrowhead-error)":a.health==="warning"?"url(#arrowhead-warning)":"url(#arrowhead-healthy)"}},us=a=>{switch(a){case"healthy":return e.jsx(se,{size:16,className:t.statusHealthy});case"warning":return e.jsx(F,{size:16,className:t.statusWarning});case"failed":return e.jsx(as,{size:16,className:t.statusFailed});case"processing":return e.jsx(W,{size:16,className:t.statusProcessing});default:return null}},hs=[...new Set(ie.map(a=>a.source))];return e.jsxs("div",{className:t.dataLineage,children:[e.jsx("div",{className:t.header,children:e.jsx("div",{className:t.headerContent,children:e.jsxs("div",{className:t.titleSection,children:[e.jsxs("h1",{className:t.title,children:["Interactive Data Lineage",e.jsx("button",{className:t.infoButton,onClick:()=>E(!0),title:"How does this system work?",children:e.jsx(Je,{size:18})}),e.jsx("button",{className:`${t.infoButton} ${t.challengesButton}`,onClick:()=>m(!0),title:"Implementation Challenges",children:e.jsx(de,{size:18})})]}),e.jsx("p",{className:t.subtitle,children:"Visualize and explore data flow through your threat intelligence pipelines"})]})})}),e.jsxs("div",{className:t.mainContent,children:[e.jsxs("div",{className:t.controls,children:[e.jsxs("div",{className:t.searchContainer,children:[e.jsx(xs,{className:t.searchIcon}),e.jsx("input",{type:"text",placeholder:"Search nodes and pipelines...",value:q,onChange:a=>K(a.target.value),className:t.searchInput})]}),e.jsxs("select",{value:N,onChange:a=>x(a.target.value),className:t.filterSelect,children:[e.jsx("option",{value:"all",children:"All Sources"}),hs.map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsx("button",{className:t.clearButton,onClick:()=>{P(null),D([]),x("all")},children:"Clear Selection"}),e.jsx("button",{className:t.clearButton,onClick:()=>{const a=o.find(r=>r.hasErrors&&r.pipelineData);a?(console.log("Test: Opening modal for",a.name),P(a),A(!0)):console.log("Test: No error nodes found")},style:{background:"#dc3545"},children:"Test Error Modal"})]}),N!=="all"&&e.jsxs("div",{className:t.filterIndicator,children:[e.jsxs("span",{children:["Showing data flow for: ",e.jsx("strong",{children:N})]}),e.jsx("button",{className:t.clearFilterButton,onClick:()=>x("all"),title:"Show all sources",children:"Ã—"})]}),e.jsx("div",{className:t.contentGrid,children:e.jsxs("div",{className:t.visualizationPanel,children:[e.jsxs("div",{className:t.legend,children:[e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendDot} ${t.source}`}),e.jsx("span",{children:"Data Sources"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendDot} ${t.ingestion}`}),e.jsx("span",{children:"Ingestion"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendDot} ${t.transformation}`}),e.jsx("span",{children:"Transformation"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendDot} ${t.enrichment}`}),e.jsx("span",{children:"Enrichment"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendDot} ${t.destination}`}),e.jsx("span",{children:"Destinations"})]}),e.jsx("div",{className:t.legendSeparator}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendProcessingBadge} ${t.streaming}`,children:"STRM"}),e.jsx("span",{children:"Streaming"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendProcessingBadge} ${t.microBatch}`,children:"Î¼BTCH"}),e.jsx("span",{children:"Micro-batch"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendProcessingBadge} ${t.batch}`,children:"BTCH"}),e.jsx("span",{children:"Batch"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendProcessingBadge} ${t.hybrid}`,children:"HYB"}),e.jsx("span",{children:"Hybrid"})]})]}),e.jsx("div",{className:t.lineageContainer,children:e.jsxs("svg",{ref:R,className:t.lineageSvg,viewBox:"0 0 1600 900",preserveAspectRatio:"xMidYMid meet",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"flowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(82, 196, 26, 0.1)"}),e.jsx("stop",{offset:"50%",stopColor:"rgba(82, 196, 26, 0.8)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(82, 196, 26, 0.1)"}),e.jsx("animateTransform",{attributeName:"gradientTransform",attributeType:"XML",type:"translate",values:"-100 0; 200 0; -100 0",dur:"3s",repeatCount:"indefinite"})]}),e.jsx("marker",{id:"arrowhead-healthy",markerWidth:"6",markerHeight:"4",refX:"5",refY:"2",orient:"auto",children:e.jsx("polygon",{points:"0 0, 6 2, 0 4",fill:"#52c41a"})}),e.jsx("marker",{id:"arrowhead-warning",markerWidth:"6",markerHeight:"4",refX:"5",refY:"2",orient:"auto",children:e.jsx("polygon",{points:"0 0, 6 2, 0 4",fill:"#faad14"})}),e.jsx("marker",{id:"arrowhead-error",markerWidth:"6",markerHeight:"4",refX:"5",refY:"2",orient:"auto",children:e.jsx("polygon",{points:"0 0, 6 2, 0 4",fill:"#ef4444"})}),e.jsxs("filter",{id:"glow",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("text",{x:"120",y:"50",className:t.sectionLabel,children:"Data Sources"}),e.jsx("text",{x:"420",y:"50",className:t.sectionLabel,children:"Ingestion"}),e.jsx("text",{x:"720",y:"50",className:t.sectionLabel,children:"Transformation"}),e.jsx("text",{x:"1020",y:"50",className:t.sectionLabel,children:"Enrichment"}),e.jsx("text",{x:"1320",y:"50",className:t.sectionLabel,children:"Destinations"}),ae.filter(a=>{const r=G.find(u=>u.id===a.from),d=G.find(u=>u.id===a.to);return r&&d}).map(a=>{const r=G.find(g=>g.id===a.from),d=G.find(g=>g.id===a.to),u=ms(a);return e.jsxs("g",{children:[e.jsx("line",{x1:r.x+180,y1:r.y+22,x2:d.x-20,y2:d.y+22,stroke:u.stroke,strokeWidth:u.strokeWidth,opacity:u.opacity,strokeDasharray:u.strokeDasharray,markerEnd:u.markerEnd,className:t.connectionLine}),a.animated&&e.jsx("circle",{r:"3",fill:u.stroke,className:t.flowDot,children:e.jsx("animateMotion",{dur:"3s",repeatCount:"indefinite",path:`M${r.x+180},${r.y+22} L${d.x-20},${d.y+22}`})})]},a.id)}),G.map(a=>{const r=a.type==="source"&&N!=="all"&&a.source===N;return e.jsxs("g",{className:t.nodeGroup,onClick:d=>rs(a,d),onDoubleClick:()=>ls(a),onMouseEnter:()=>T(a.id),onMouseLeave:()=>T(null),children:[e.jsx("rect",{x:a.x,y:a.y,width:"180",height:"45",fill:ds(a),rx:"6",className:`${t.nodeRect} ${(i==null?void 0:i.id)===a.id?t.selectedNode:""}`,filter:(i==null?void 0:i.id)===a.id||r?"url(#glow)":"none",stroke:r?"#ffffff":"transparent",strokeWidth:r?"2":"0"}),e.jsx("text",{x:a.x+90,y:a.y+18,textAnchor:"middle",fill:"white",fontSize:"11",fontWeight:"600",className:t.nodeText,children:a.name.length>20?`${a.name.substring(0,17)}...`:a.name}),e.jsx("text",{x:a.x+90,y:a.y+30,textAnchor:"middle",fill:"#0078d4",fontSize:"8",fontWeight:"500",children:a.technology.length>30?a.technology.split(" ")[0]+(a.technology.includes("Azure")?" "+a.technology.split(" ")[1]:""):a.technology}),e.jsx("rect",{x:a.x+5,y:a.y+5,width:"28",height:"12",fill:a.processingMode==="streaming"?"#52c41a":a.processingMode==="micro-batch"?"#faad14":a.processingMode==="hybrid"?"#8b5cf6":"#0078d4",rx:"2"}),e.jsx("text",{x:a.x+19,y:a.y+13,textAnchor:"middle",fill:"white",fontSize:"6",fontWeight:"700",children:a.processingMode==="streaming"?"STRM":a.processingMode==="micro-batch"?"Î¼BTCH":a.processingMode==="hybrid"?"HYB":"BTCH"}),e.jsxs("text",{x:a.x+90,y:a.y+40,textAnchor:"middle",fill:"rgba(255,255,255,0.8)",fontSize:"9",className:t.nodeSubtext,children:[a.recordsPerSecond,"/s"]}),e.jsx("circle",{cx:a.x+160,cy:a.y+12,r:"5",fill:a.status==="healthy"?"#52c41a":a.status==="warning"?"#faad14":a.status==="failed"?"#ef4444":"#1890ff"}),a.hasErrors&&a.errorCount&&a.errorCount>0&&e.jsxs("g",{children:[e.jsx("circle",{cx:a.x+170,cy:a.y+35,r:"12",fill:"#ef4444",stroke:"#ffffff",strokeWidth:"2"}),e.jsx("text",{x:a.x+170,y:a.y+40,textAnchor:"middle",fill:"white",fontSize:"11",fontWeight:"700",children:a.errorCount>9?"9+":a.errorCount})]}),a.hasErrors&&e.jsx("rect",{x:a.x-3,y:a.y-3,width:"186",height:"51",fill:"none",stroke:a.status==="failed"?"#ef4444":"#faad14",strokeWidth:"3",rx:"8",className:t.errorBorder}),a.hasErrors&&$===a.id&&e.jsxs("g",{children:[e.jsx("rect",{x:a.x+20,y:a.y+55,width:"140",height:"20",fill:"rgba(0, 0, 0, 0.8)",rx:"4"}),e.jsx("text",{x:a.x+90,y:a.y+68,textAnchor:"middle",fill:"#faad14",fontSize:"10",fontWeight:"600",children:"Double-click for error details"})]})]},a.id)}),$&&G.map(a=>{var u;if($!==a.id)return null;const r=a.x>1e3?a.x-210:a.x+190,d=a.y-10;return e.jsxs("g",{className:t.tooltip,children:[e.jsx("rect",{x:r,y:d,width:"240",height:"110",fill:"rgba(0,0,0,0.95)",rx:"6",stroke:"#555",strokeWidth:"1"}),e.jsx("text",{x:r+10,y:d+15,fill:"white",fontSize:"11",fontWeight:"600",children:a.name}),e.jsx("text",{x:r+10,y:d+28,fill:"#0078d4",fontSize:"9",fontWeight:"500",children:a.technology}),e.jsxs("text",{x:r+10,y:d+40,fill:"#ccc",fontSize:"9",children:["Processing: ",(u=a.processingMode)==null?void 0:u.toUpperCase()," | ",a.dataMovementTool]}),e.jsxs("text",{x:r+10,y:d+52,fill:"#ccc",fontSize:"9",children:["Records/sec: ",a.recordsPerSecond," | Avg Time: ",a.avgProcessingTime,"ms"]}),e.jsx("text",{x:r+10,y:d+64,fill:"#ccc",fontSize:"9",children:a.processingMode==="streaming"?`Latency: ${a.streamingLatency}`:a.processingMode==="batch"?`Frequency: ${a.batchFrequency}`:"Mode: Hybrid Processing"}),e.jsxs("text",{x:r+10,y:d+76,fill:"#ccc",fontSize:"9",children:["Format: ",a.dataFormat," | Quality: ",a.dataQuality,"%"]}),e.jsxs("text",{x:r+10,y:d+88,fill:"#ccc",fontSize:"9",children:["RG: ",a.resourceGroup.split("-").slice(-2).join("-")]}),e.jsx("text",{x:r+10,y:d+100,fill:"#52c41a",fontSize:"8",children:"Click for detailed tech specs â†’"})]},`tooltip-${a.id}`)})]})})]})}),L&&i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:t.popupOverlay,onClick:()=>B(!1)}),e.jsxs("div",{className:`${t.nodePopup} ${M?t.nodePopupExpanded:""}`,style:{left:`${k.x}px`,top:`${k.y}px`},children:[e.jsxs("div",{className:t.popupHeader,children:[e.jsxs("h3",{className:t.popupTitle,children:[i.type==="source"&&e.jsx(Xe,{size:18}),i.type==="ingestion"&&e.jsx(Ye,{size:18}),i.type==="transformation"&&e.jsx(Ze,{size:18}),i.type==="enrichment"&&e.jsx(is,{size:18}),i.type==="destination"&&e.jsx(es,{size:18}),i.name]}),e.jsx("div",{className:t.popupActions,children:e.jsx("button",{className:t.popupButton,onClick:()=>B(!1),title:"Close",children:e.jsx(ys,{size:16})})})]}),e.jsxs("div",{className:t.popupContent,children:[e.jsxs("div",{className:t.quickInfo,children:[e.jsxs("div",{className:t.quickInfoItem,children:[e.jsx("span",{className:t.quickInfoLabel,children:"Status"}),e.jsx("div",{className:t.quickInfoValue,children:e.jsxs("span",{className:`${t.statusBadge} ${t[`status${i.status.charAt(0).toUpperCase()+i.status.slice(1)}`]}`,children:[us(i.status),i.status]})})]}),e.jsxs("div",{className:t.quickInfoItem,children:[e.jsx("span",{className:t.quickInfoLabel,children:"Technology"}),e.jsxs("div",{className:t.quickInfoValue,children:[e.jsx(ns,{size:14}),i.technology]})]}),e.jsxs("div",{className:t.quickInfoItem,children:[e.jsx("span",{className:t.quickInfoLabel,children:"Throughput"}),e.jsxs("div",{className:t.quickInfoValue,children:[e.jsx(W,{size:14}),i.recordsPerSecond,"/s"]})]}),e.jsxs("div",{className:t.quickInfoItem,children:[e.jsx("span",{className:t.quickInfoLabel,children:"Processing Time"}),e.jsxs("div",{className:t.quickInfoValue,children:[e.jsx(Q,{size:14}),i.avgProcessingTime,"ms"]})]})]}),e.jsxs("div",{className:t.metricGrid,children:[e.jsxs("div",{className:t.metricItem,children:[e.jsxs("p",{className:t.metricValue,children:[i.dataQuality,"%"]}),e.jsx("p",{className:t.metricLabel,children:"Data Quality"})]}),e.jsxs("div",{className:t.metricItem,children:[e.jsx("p",{className:t.metricValue,children:i.connections.length}),e.jsx("p",{className:t.metricLabel,children:"Connections"})]}),e.jsxs("div",{className:t.metricItem,children:[e.jsx("p",{className:t.metricValue,children:i.region}),e.jsx("p",{className:t.metricLabel,children:"Region"})]})]}),e.jsx("div",{className:t.expandButtonContainer,children:e.jsxs("button",{className:t.expandButton,onClick:os,title:M?"Show less details":"Show more details",children:[M?e.jsx(js,{size:14}):e.jsx(vs,{size:14}),M?"Less Details":"More Details"]})}),M&&e.jsxs("div",{className:t.expandedContent,children:[e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(de,{size:16}),"Security & Authentication"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Authentication:"}),e.jsx("span",{className:t.detailValue,children:i.authentication})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Protocols:"}),e.jsx("div",{className:t.tagList,children:(ue=i.protocols)==null?void 0:ue.slice(0,3).map((a,r)=>e.jsx("span",{className:t.tag,children:a},r))})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(ss,{size:16}),"Infrastructure"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Resource Group:"}),e.jsx("span",{className:t.detailValue,children:i.resourceGroup})]}),i.computeType&&e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Compute:"}),e.jsx("span",{className:t.detailValue,children:i.computeType})]}),i.storageType&&e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Storage:"}),e.jsx("span",{className:t.detailValue,children:i.storageType})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(me,{size:16}),"Monitoring"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"App Insights:"}),e.jsx("span",{className:t.detailValue,children:(he=i.monitoring)==null?void 0:he.applicationInsights})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Log Analytics:"}),e.jsx("span",{className:t.detailValue,children:(pe=i.monitoring)==null?void 0:pe.logAnalyticsWorkspace})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(F,{size:16}),"Dependencies"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Key Vault:"}),e.jsx("span",{className:t.detailValue,children:(ge=i.dependencies)==null?void 0:ge.keyVault})]}),((_e=i.dependencies)==null?void 0:_e.externalApis)&&i.dependencies.externalApis.length>0&&e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"External APIs:"}),e.jsx("div",{className:t.tagList,children:i.dependencies.externalApis.slice(0,2).map((a,r)=>e.jsx("span",{className:t.tag,children:a},r))})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(ss,{size:16}),"Operational Information"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Owner:"}),e.jsx("span",{className:t.detailValue,children:(fe=i.operationalInfo)==null?void 0:fe.owner})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Escalation Path:"}),e.jsx("div",{className:t.tagList,children:(ye=(xe=i.operationalInfo)==null?void 0:xe.escalationPath)==null?void 0:ye.map((a,r)=>e.jsx("span",{className:t.tag,children:a},r))})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Maintenance Window:"}),e.jsx("span",{className:t.detailValue,children:(je=i.operationalInfo)==null?void 0:je.maintenanceWindow})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Criticality Level:"}),e.jsx("span",{className:t.detailValue,children:(ve=i.operationalInfo)==null?void 0:ve.criticalityLevel})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Data Classification:"}),e.jsx("span",{className:t.detailValue,children:(Ne=i.operationalInfo)==null?void 0:Ne.dataClassification})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Compliance Requirements:"}),e.jsx("div",{className:t.tagList,children:(be=(Se=i.operationalInfo)==null?void 0:Se.complianceRequirements)==null?void 0:be.map((a,r)=>e.jsx("span",{className:t.tag,children:a},r))})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(Q,{size:16}),"SLA Metrics"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Uptime:"}),e.jsxs("span",{className:t.detailValue,children:[(Ce=i.slaMetrics)==null?void 0:Ce.uptime,"%"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Target Uptime:"}),e.jsxs("span",{className:t.detailValue,children:[(Ie=i.slaMetrics)==null?void 0:Ie.targetUptime,"%"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"MTTR:"}),e.jsxs("span",{className:t.detailValue,children:[(Le=i.slaMetrics)==null?void 0:Le.mttr," minutes"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"MTBF:"}),e.jsxs("span",{className:t.detailValue,children:[(ke=i.slaMetrics)==null?void 0:ke.mtbf," hours"]})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(me,{size:16}),"Performance Metrics"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Avg Latency:"}),e.jsxs("span",{className:t.detailValue,children:[(Te=i.performanceMetrics)==null?void 0:Te.avgLatency,"ms"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"P95 Latency:"}),e.jsxs("span",{className:t.detailValue,children:[(we=i.performanceMetrics)==null?void 0:we.p95Latency,"ms"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Error Rate:"}),e.jsxs("span",{className:t.detailValue,children:[(Ae=i.performanceMetrics)==null?void 0:Ae.errorRate,"%"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Throughput:"}),e.jsxs("span",{className:t.detailValue,children:[(Me=i.performanceMetrics)==null?void 0:Me.throughputMbps," Mbps"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"CPU Utilization:"}),e.jsxs("span",{className:t.detailValue,children:[(Pe=i.performanceMetrics)==null?void 0:Pe.cpuUtilization,"%"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Memory Utilization:"}),e.jsxs("span",{className:t.detailValue,children:[(ze=i.performanceMetrics)==null?void 0:ze.memoryUtilization,"%"]})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(Je,{size:16}),"Troubleshooting Resources"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Common Issues:"}),e.jsx("div",{className:t.tagList,children:(Ee=(De=i.troubleshooting)==null?void 0:De.commonIssues)==null?void 0:Ee.slice(0,2).map((a,r)=>e.jsx("span",{className:t.tag,children:a},r))})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Runbook URLs:"}),e.jsx("div",{className:t.linkList,children:(Be=($e=i.troubleshooting)==null?void 0:$e.runbookUrls)==null?void 0:Be.map((a,r)=>e.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:t.link,children:["Runbook ",r+1]},r))})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Health Check Endpoints:"}),e.jsx("div",{className:t.linkList,children:(Re=(He=i.troubleshooting)==null?void 0:He.healthCheckEndpoints)==null?void 0:Re.map((a,r)=>e.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:t.link,children:["Health Check ",r+1]},r))})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Sample Log Queries:"}),e.jsx("div",{className:t.codeSnippets,children:(qe=(Ge=i.troubleshooting)==null?void 0:Ge.logQuerySamples)==null?void 0:qe.map((a,r)=>e.jsx("code",{className:t.codeSnippet,children:a},r))})]})]})]})]}),(i.hasErrors||i.status==="failed"||i.status==="warning")&&e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"#1a1a1a",borderRadius:"8px",border:"1px solid #ef4444"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(F,{size:16,style:{color:"#ef4444"}}),e.jsx("span",{style:{fontWeight:"600",color:"#ef4444"},children:i.errorCount?`${i.errorCount} Active Errors`:"System Issues Detected"})]}),((Oe=i.pipelineData)==null?void 0:Oe.currentError)&&e.jsxs("p",{style:{fontSize:"0.85rem",color:"#cccccc",margin:"0 0 0.75rem 0"},children:[i.pipelineData.currentError.errorMessage.slice(0,100),"..."]}),e.jsxs("button",{onClick:()=>{A(!0),B(!1)},style:{background:"#ef4444",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(F,{size:14}),"View Error Details"]})]}),e.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.8rem",color:"#888",textAlign:"center"},children:["Last updated: ",new Date(i.lastUpdate).toLocaleString()]})]})]})]}),w&&i&&i.pipelineData&&e.jsx(ts,{isOpen:w,onClose:()=>A(!1),pipelineName:i.name,currentError:i.pipelineData.currentError,errorHistory:i.pipelineData.errorHistory||[],logReferences:i.pipelineData.logs||[],metricsHistory:i.pipelineData.metrics||[],impactAnalysis:i.pipelineData.impact,runbooks:i.pipelineData.runbooks||[],oncallTeam:((Ve=i.operationalInfo)==null?void 0:Ve.owner)||"MSTIC Data Engineering Team",slackChannel:"#mstic-incidents",teamsChannel:"MSTIC Operations",operationalData:{slaMetrics:i.slaMetrics,operationalInfo:i.operationalInfo,performanceMetrics:i.performanceMetrics,troubleshooting:i.troubleshooting,contactInfo:{primaryTeam:((Ue=i.operationalInfo)==null?void 0:Ue.owner)||"MSTIC Data Engineering Team",secondaryTeam:"MSTIC Platform Team",escalationContacts:[{name:"On-call Engineer",role:"Level 1 Support",email:"mstic-oncall@microsoft.com",phone:"+1-425-882-8080",slackHandle:"@mstic-oncall"},{name:"Senior Engineer",role:"Level 2 Support",email:"mstic-senior@microsoft.com",phone:"+1-425-882-8081",slackHandle:"@mstic-senior"},{name:"Engineering Manager",role:"Level 3 Escalation",email:"mstic-manager@microsoft.com",phone:"+1-425-882-8082",slackHandle:"@mstic-manager"}]},technology:{stack:i.technology,resourceGroup:i.resourceGroup,subscriptionId:i.subscriptionId,region:i.region}}}),e.jsxs("div",{className:t.summaryGrid,children:[e.jsxs("div",{className:t.summaryCard,children:[e.jsx("div",{className:t.summaryIcon,children:e.jsx(Xe,{size:24})}),e.jsxs("div",{className:t.summaryContent,children:[e.jsx("div",{className:t.summaryValue,children:V.filter(a=>a.type==="source").length}),e.jsx("div",{className:t.summaryLabel,children:"Data Sources"})]})]}),e.jsxs("div",{className:t.summaryCard,children:[e.jsx("div",{className:t.summaryIcon,children:e.jsx(Ze,{size:24})}),e.jsxs("div",{className:t.summaryContent,children:[e.jsx("div",{className:t.summaryValue,children:V.filter(a=>["ingestion","transformation","enrichment"].includes(a.type)).length}),e.jsx("div",{className:t.summaryLabel,children:"Processing Pipelines"})]})]}),e.jsxs("div",{className:t.summaryCard,children:[e.jsx("div",{className:t.summaryIcon,children:e.jsx(Ye,{size:24})}),e.jsxs("div",{className:t.summaryContent,children:[e.jsx("div",{className:t.summaryValue,children:ae.length}),e.jsx("div",{className:t.summaryLabel,children:"Data Flows"})]})]}),e.jsxs("div",{className:t.summaryCard,children:[e.jsx("div",{className:t.summaryIcon,children:e.jsx(es,{size:24})}),e.jsxs("div",{className:t.summaryContent,children:[e.jsx("div",{className:t.summaryValue,children:V.filter(a=>a.type==="destination").length}),e.jsx("div",{className:t.summaryLabel,children:"Destinations"})]})]})]})]}),w&&i&&i.pipelineData&&e.jsx(ts,{isOpen:w,onClose:()=>A(!1),pipelineName:i.pipelineData.name,currentError:i.pipelineData.currentError,errorHistory:i.pipelineData.errorHistory||[],logReferences:i.pipelineData.logReferences||[],metricsHistory:i.pipelineData.metricsHistory||[],impactAnalysis:i.pipelineData.impactAnalysis,runbooks:i.pipelineData.runbooks||[],oncallTeam:i.pipelineData.oncallTeam||"MSTIC Data Engineering",slackChannel:i.pipelineData.slackChannel,teamsChannel:i.pipelineData.teamsChannel,dashboardUrl:i.pipelineData.dashboardUrl,grafanaUrl:i.pipelineData.grafanaUrl,healthCheckUrl:i.pipelineData.healthCheckUrl,operationalData:{slaMetrics:i.slaMetrics,operationalInfo:i.operationalInfo,performanceMetrics:i.performanceMetrics,troubleshooting:i.troubleshooting,technology:{stack:i.technology,resourceGroup:i.resourceGroup,region:i.region,subscriptionId:i.subscriptionId},contactInfo:{primaryTeam:((Fe=i.operationalInfo)==null?void 0:Fe.owner)||"MSTIC Data Engineering",escalationContacts:((Qe=(We=i.operationalInfo)==null?void 0:We.escalationPath)==null?void 0:Qe.map((a,r)=>({name:`${a} Contact`,role:a,email:`${a.toLowerCase().replace(/\s+/g,".")}@microsoft.com`,phone:r===0?"+1-555-0123":void 0,slackHandle:`@${a.toLowerCase().replace(/\s+/g,"")}`})))||[]}}}),e.jsx(Ns,{isOpen:J,onClose:()=>E(!1),section:"dataLineage"}),e.jsx(Ss,{isOpen:X,onClose:()=>m(!1),section:"dataLineage"})]})});mc.displayName="DataLineage";export{mc as default};
//# sourceMappingURL=DataLineage-Cy3zZz1Z.js.map
