import{j as e,m as J}from"./index-CU3QGbS8.js";import{r as j}from"./charts-C5h2vIoi.js";import{l as Xe,A as W,E as X,p as Ve,q as ee,U as q,r as se,m as Y,s as os,t as ls,G as ds,f as Ye,a as ms,S as Ze,k as F,C as ne,u as te,o as ae,T as U,Z as Je,e as Oe,h as hs,D as qe,v as Ue,w as We,H as Fe,X as ps,x as us,y as _s,z as Qe}from"./icons-utD9nCrm.js";import{H as xs}from"./HowItWorksModal-Co-MzQCL.js";import"./vendor-Csw2ODfV.js";import"./router-D-wRvbVe.js";const fs="_modalOverlay_f9ny3_2",gs="_modal_f9ny3_2",ys="_modalHeader_f9ny3_29",js="_modalTitle_f9ny3_38",Ns="_pipelineName_f9ny3_45",bs="_operationsSection_f9ny3_53",vs="_contactSection_f9ny3_73",Cs="_contactGrid_f9ny3_80",Ss="_contactCard_f9ny3_86",Is="_teamInfo_f9ny3_102",ks="_teamName_f9ny3_108",Ls="_contactMethods_f9ny3_114",ws="_contactButton_f9ny3_119",Ts="_escalationPath_f9ny3_137",Ms="_escalationLevel_f9ny3_143",As="_escalationOrder_f9ny3_150",$s="_escalationRole_f9ny3_163",Ps="_keyContacts_f9ny3_168",zs="_contactPerson_f9ny3_174",Ds="_contactName_f9ny3_181",Es="_contactRole_f9ny3_187",Bs="_contactDetails_f9ny3_193",Hs="_contactEmail_f9ny3_199",Gs="_contactPhone_f9ny3_200",Rs="_contactSlack_f9ny3_201",Vs="_slaSection_f9ny3_210",Os="_slaGrid_f9ny3_217",qs="_slaCard_f9ny3_223",Us="_slaLabel_f9ny3_231",Ws="_slaValue_f9ny3_240",Fs="_slaTarget_f9ny3_247",Qs="_techSection_f9ny3_253",Ks="_techGrid_f9ny3_260",Xs="_techCard_f9ny3_266",Ys="_techLabel_f9ny3_273",Zs="_techValue_f9ny3_282",Js="_configSection_f9ny3_290",et="_configGrid_f9ny3_297",st="_configCard_f9ny3_303",tt="_configLabel_f9ny3_310",at="_configValue_f9ny3_319",nt="_complianceList_f9ny3_338",it="_complianceBadge_f9ny3_344",ct="_perfSection_f9ny3_356",rt="_perfGrid_f9ny3_363",ot="_perfCard_f9ny3_369",lt="_perfLabel_f9ny3_377",dt="_perfValue_f9ny3_386",mt="_troubleshootSection_f9ny3_393",ht="_troubleshootGrid_f9ny3_400",pt="_troubleshootCard_f9ny3_406",ut="_issuesList_f9ny3_420",_t="_issueItem_f9ny3_429",xt="_endpointsList_f9ny3_438",ft="_endpointButton_f9ny3_444",gt="_queriesList_f9ny3_462",yt="_queryItem_f9ny3_468",jt="_queryHeader_f9ny3_475",Nt="_queryCode_f9ny3_484",bt="_closeButton_f9ny3_495",vt="_quickActions_f9ny3_511",Ct="_actionButton_f9ny3_520",St="_tabNav_f9ny3_545",It="_tab_f9ny3_545",kt="_activeTab_f9ny3_571",Lt="_errorBadge_f9ny3_577",wt="_modalContent_f9ny3_587",Tt="_tabContent_f9ny3_593",Mt="_currentError_f9ny3_598",At="_errorHeader_f9ny3_606",$t="_errorInfo_f9ny3_613",Pt="_errorIcon_f9ny3_619",zt="_errorTitle_f9ny3_625",Dt="_errorMeta_f9ny3_633",Et="_errorCode_f9ny3_639",Bt="_errorTime_f9ny3_645",Ht="_severityBadge_f9ny3_650",Gt="_stackTrace_f9ny3_660",Rt="_stackHeader_f9ny3_664",Vt="_copyButton_f9ny3_677",Ot="_stackContent_f9ny3_695",qt="_suggestedActions_f9ny3_709",Ut="_actionsList_f9ny3_719",Wt="_actionItem_f9ny3_725",Ft="_actionIcon_f9ny3_734",Qt="_context_f9ny3_741",Kt="_contextGrid_f9ny3_751",Xt="_contextItem_f9ny3_757",Yt="_contextKey_f9ny3_767",Zt="_contextValue_f9ny3_774",Jt="_noError_f9ny3_782",ea="_noErrorIcon_f9ny3_788",sa="_errorHistory_f9ny3_800",ta="_historyList_f9ny3_810",aa="_historyItem_f9ny3_816",na="_historyIcon_f9ny3_831",ia="_historyContent_f9ny3_836",ca="_historyMessage_f9ny3_840",ra="_historyMeta_f9ny3_846",oa="_historySeverity_f9ny3_853",la="_logsSection_f9ny3_863",da="_logsList_f9ny3_869",ma="_logItem_f9ny3_875",ha="_logHeader_f9ny3_882",pa="_logSystem_f9ny3_889",ua="_logButton_f9ny3_898",_a="_logMeta_f9ny3_916",xa="_queryTemplate_f9ny3_925",fa="_metricsSection_f9ny3_955",ga="_metricsPlaceholder_f9ny3_961",ya="_metricsInfo_f9ny3_980",ja="_grafanaButton_f9ny3_986",Na="_impactSection_f9ny3_1007",ba="_impactOverview_f9ny3_1013",va="_impactLevel_f9ny3_1020",Ca="_impactBadge_f9ny3_1025",Sa="_impactGrid_f9ny3_1035",Ia="_impactCard_f9ny3_1041",ka="_affectedList_f9ny3_1054",La="_affectedItem_f9ny3_1060",wa="_impactMetric_f9ny3_1073",Ta="_noImpact_f9ny3_1079",Ma="_runbooksSection_f9ny3_1097",Aa="_runbooksList_f9ny3_1103",$a="_runbookItem_f9ny3_1110",Pa="_runbookHeader_f9ny3_1117",za="_runbookMeta_f9ny3_1130",Da="_runbookDescription_f9ny3_1138",Ea="_runbookButton_f9ny3_1144",Ba="_oncallInfo_f9ny3_1163",Ha="_oncallDetails_f9ny3_1174",a={modalOverlay:fs,modal:gs,modalHeader:ys,modalTitle:js,pipelineName:Ns,operationsSection:bs,contactSection:vs,contactGrid:Cs,contactCard:Ss,teamInfo:Is,teamName:ks,contactMethods:Ls,contactButton:ws,escalationPath:Ts,escalationLevel:Ms,escalationOrder:As,escalationRole:$s,keyContacts:Ps,contactPerson:zs,contactName:Ds,contactRole:Es,contactDetails:Bs,contactEmail:Hs,contactPhone:Gs,contactSlack:Rs,slaSection:Vs,slaGrid:Os,slaCard:qs,slaLabel:Us,slaValue:Ws,slaTarget:Fs,techSection:Qs,techGrid:Ks,techCard:Xs,techLabel:Ys,techValue:Zs,configSection:Js,configGrid:et,configCard:st,configLabel:tt,configValue:at,"criticality-critical":"_criticality-critical_f9ny3_328","criticality-high":"_criticality-high_f9ny3_329","criticality-medium":"_criticality-medium_f9ny3_330","criticality-low":"_criticality-low_f9ny3_331","classification-restricted":"_classification-restricted_f9ny3_333","classification-confidential":"_classification-confidential_f9ny3_334","classification-internal":"_classification-internal_f9ny3_335","classification-public":"_classification-public_f9ny3_336",complianceList:nt,complianceBadge:it,perfSection:ct,perfGrid:rt,perfCard:ot,perfLabel:lt,perfValue:dt,troubleshootSection:mt,troubleshootGrid:ht,troubleshootCard:pt,issuesList:ut,issueItem:_t,endpointsList:xt,endpointButton:ft,queriesList:gt,queryItem:yt,queryHeader:jt,queryCode:Nt,closeButton:bt,quickActions:vt,actionButton:Ct,tabNav:St,tab:It,activeTab:kt,errorBadge:Lt,modalContent:wt,tabContent:Tt,currentError:Mt,errorHeader:At,errorInfo:$t,errorIcon:Pt,errorTitle:zt,errorMeta:Dt,errorCode:Et,errorTime:Bt,severityBadge:Ht,stackTrace:Gt,stackHeader:Rt,copyButton:Vt,stackContent:Ot,suggestedActions:qt,actionsList:Ut,actionItem:Wt,actionIcon:Ft,context:Qt,contextGrid:Kt,contextItem:Xt,contextKey:Yt,contextValue:Zt,noError:Jt,noErrorIcon:ea,errorHistory:sa,historyList:ta,historyItem:aa,historyIcon:na,historyContent:ia,historyMessage:ca,historyMeta:ra,historySeverity:oa,logsSection:la,logsList:da,logItem:ma,logHeader:ha,logSystem:pa,logButton:ua,logMeta:_a,queryTemplate:xa,metricsSection:fa,metricsPlaceholder:ga,metricsInfo:ya,grafanaButton:ja,impactSection:Na,impactOverview:ba,impactLevel:va,impactBadge:Ca,impactGrid:Sa,impactCard:Ia,affectedList:ka,affectedItem:La,impactMetric:wa,noImpact:Ta,runbooksSection:Ma,runbooksList:Aa,runbookItem:$a,runbookHeader:Pa,runbookMeta:za,runbookDescription:Da,runbookButton:Ea,oncallInfo:Ba,oncallDetails:Ha},Ke=({isOpen:H,onClose:Q,pipelineName:N,currentError:y,errorHistory:i,logReferences:T,metricsHistory:z,impactAnalysis:S,runbooks:M,oncallTeam:A,slackChannel:I,teamsChannel:k,dashboardUrl:K,grafanaUrl:$,healthCheckUrl:D,operationalData:l})=>{var w,P;const[C,G]=j.useState("error"),[L,R]=j.useState(null);if(!H)return null;const V=async(r,h)=>{try{await navigator.clipboard.writeText(r),R(h),setTimeout(()=>R(null),2e3)}catch(O){console.error("Failed to copy:",O)}},o=r=>{switch(r){case"connection":return e.jsx(Je,{className:a.errorIcon});case"data_quality":return e.jsx(Ve,{className:a.errorIcon});case"timeout":return e.jsx(F,{className:a.errorIcon});case"authentication":return e.jsx(q,{className:a.errorIcon});default:return e.jsx(U,{className:a.errorIcon})}},E=r=>{switch(r){case"critical":return"#ef4444";case"high":return"#f97316";case"medium":return"#eab308";case"low":return"#22c55e";default:return"#6b7280"}};return e.jsx("div",{className:a.modalOverlay,onClick:Q,children:e.jsxs("div",{className:a.modal,onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:a.modalHeader,children:[e.jsxs("div",{children:[e.jsx("h2",{className:a.modalTitle,children:"Pipeline Error Details"}),e.jsx("p",{className:a.pipelineName,children:N})]}),e.jsx("button",{className:a.closeButton,onClick:Q,children:e.jsx(Xe,{size:24})})]}),e.jsxs("div",{className:a.quickActions,children:[e.jsxs("button",{className:a.actionButton,onClick:()=>window.open(D,"_blank"),disabled:!D,children:[e.jsx(W,{size:16}),"Health Check"]}),e.jsxs("button",{className:a.actionButton,onClick:()=>window.open(K,"_blank"),disabled:!K,children:[e.jsx(X,{size:16}),"Dashboard"]}),e.jsxs("button",{className:a.actionButton,onClick:()=>window.open($,"_blank"),disabled:!$,children:[e.jsx(Ve,{size:16}),"Metrics"]}),I&&e.jsxs("button",{className:a.actionButton,onClick:()=>window.open(`slack://channel?team=T123&id=${I}`,"_blank"),children:[e.jsx(ee,{size:16}),"Slack"]}),k&&e.jsxs("button",{className:a.actionButton,onClick:()=>window.open(k,"_blank"),children:[e.jsx(q,{size:16}),"Teams"]})]}),e.jsx("div",{className:a.tabNav,children:["error","operations","logs","metrics","impact","runbooks"].map(r=>e.jsxs("button",{className:`${a.tab} ${C===r?a.activeTab:""}`,onClick:()=>G(r),children:[r==="operations"?"Operations":r.charAt(0).toUpperCase()+r.slice(1),r==="error"&&y&&e.jsx("span",{className:a.errorBadge,style:{backgroundColor:E(y.severity)},children:y.severity})]},r))}),e.jsxs("div",{className:a.modalContent,children:[C==="error"&&e.jsxs("div",{className:a.tabContent,children:[y?e.jsxs("div",{className:a.currentError,children:[e.jsxs("div",{className:a.errorHeader,children:[e.jsxs("div",{className:a.errorInfo,children:[o(y.errorType),e.jsxs("div",{children:[e.jsx("h3",{className:a.errorTitle,children:y.errorMessage}),e.jsxs("div",{className:a.errorMeta,children:[e.jsxs("span",{className:a.errorCode,children:["Error Code: ",y.errorCode]}),e.jsx("span",{className:a.errorTime,children:new Date(y.timestamp).toLocaleString()})]})]})]}),e.jsx("span",{className:a.severityBadge,style:{backgroundColor:E(y.severity)},children:y.severity})]}),y.stackTrace&&e.jsxs("div",{className:a.stackTrace,children:[e.jsxs("div",{className:a.stackHeader,children:[e.jsx("h4",{children:"Stack Trace"}),e.jsxs("button",{className:a.copyButton,onClick:()=>V(y.stackTrace,"Stack Trace"),children:[e.jsx(se,{size:14}),L==="Stack Trace"?"Copied!":"Copy"]})]}),e.jsx("pre",{className:a.stackContent,children:y.stackTrace})]}),e.jsxs("div",{className:a.suggestedActions,children:[e.jsx("h4",{children:"Suggested Actions"}),e.jsx("ul",{className:a.actionsList,children:y.suggestedActions.map((r,h)=>e.jsxs("li",{className:a.actionItem,children:[e.jsx(Y,{size:16,className:a.actionIcon}),r]},h))})]}),y.context&&Object.keys(y.context).length>0&&e.jsxs("div",{className:a.context,children:[e.jsx("h4",{children:"Error Context"}),e.jsx("div",{className:a.contextGrid,children:Object.entries(y.context).map(([r,h])=>e.jsxs("div",{className:a.contextItem,children:[e.jsxs("span",{className:a.contextKey,children:[r,":"]}),e.jsx("span",{className:a.contextValue,children:String(h)})]},r))})]})]}):e.jsxs("div",{className:a.noError,children:[e.jsx(Y,{size:48,className:a.noErrorIcon}),e.jsx("h3",{children:"No Current Errors"}),e.jsx("p",{children:"This pipeline is currently running without any detected errors."})]}),i.length>0&&e.jsxs("div",{className:a.errorHistory,children:[e.jsx("h4",{children:"Recent Error History"}),e.jsx("div",{className:a.historyList,children:i.slice(0,5).map((r,h)=>e.jsxs("div",{className:a.historyItem,children:[e.jsx("div",{className:a.historyIcon,children:o(r.errorType)}),e.jsxs("div",{className:a.historyContent,children:[e.jsx("div",{className:a.historyMessage,children:r.errorMessage}),e.jsxs("div",{className:a.historyMeta,children:[e.jsx("span",{children:r.errorCode}),e.jsx("span",{children:new Date(r.timestamp).toLocaleString()})]})]}),e.jsx("span",{className:a.historySeverity,style:{backgroundColor:E(r.severity)},children:r.severity})]},h))})]})]}),C==="operations"&&e.jsx("div",{className:a.tabContent,children:e.jsxs("div",{className:a.operationsSection,children:[e.jsxs("div",{className:a.contactSection,children:[e.jsxs("h3",{children:[e.jsx(q,{size:20}),"Contact Information"]}),e.jsxs("div",{className:a.contactGrid,children:[e.jsxs("div",{className:a.contactCard,children:[e.jsx("h4",{children:"Primary Team"}),e.jsxs("div",{className:a.teamInfo,children:[e.jsx("span",{className:a.teamName,children:((w=l==null?void 0:l.operationalInfo)==null?void 0:w.owner)||A}),e.jsxs("div",{className:a.contactMethods,children:[I&&e.jsxs("button",{className:a.contactButton,onClick:()=>window.open(`slack://channel?team=T123&id=${I}`,"_blank"),children:[e.jsx(ee,{size:14}),"#",I]}),k&&e.jsxs("button",{className:a.contactButton,onClick:()=>window.open(k,"_blank"),children:[e.jsx(q,{size:14}),"Teams Channel"]})]})]})]}),e.jsxs("div",{className:a.contactCard,children:[e.jsx("h4",{children:"Escalation Path"}),e.jsx("div",{className:a.escalationPath,children:(((P=l==null?void 0:l.operationalInfo)==null?void 0:P.escalationPath)||["On-call Engineer","Senior Engineer","Team Lead","Principal Engineer"]).map((r,h)=>e.jsxs("div",{className:a.escalationLevel,children:[e.jsx("span",{className:a.escalationOrder,children:h+1}),e.jsx("span",{className:a.escalationRole,children:r})]},h))})]}),(l==null?void 0:l.contactInfo)&&e.jsxs("div",{className:a.contactCard,children:[e.jsx("h4",{children:"Key Contacts"}),e.jsx("div",{className:a.keyContacts,children:l.contactInfo.escalationContacts.slice(0,3).map((r,h)=>e.jsxs("div",{className:a.contactPerson,children:[e.jsx("div",{className:a.contactName,children:r.name}),e.jsx("div",{className:a.contactRole,children:r.role}),e.jsxs("div",{className:a.contactDetails,children:[e.jsxs("span",{className:a.contactEmail,children:[e.jsx(os,{size:12}),r.email]}),r.phone&&e.jsxs("span",{className:a.contactPhone,children:[e.jsx(ls,{size:12}),r.phone]}),r.slackHandle&&e.jsxs("span",{className:a.contactSlack,children:[e.jsx(ee,{size:12}),"@",r.slackHandle]})]})]},h))})]})]})]}),(l==null?void 0:l.slaMetrics)&&e.jsxs("div",{className:a.slaSection,children:[e.jsxs("h3",{children:[e.jsx(ds,{size:20}),"SLA Metrics"]}),e.jsxs("div",{className:a.slaGrid,children:[e.jsxs("div",{className:a.slaCard,children:[e.jsx("div",{className:a.slaLabel,children:"Current Uptime"}),e.jsxs("div",{className:a.slaValue,children:[l.slaMetrics.uptime.toFixed(2),"%"]}),e.jsxs("div",{className:a.slaTarget,children:["Target: ",l.slaMetrics.targetUptime,"%"]})]}),e.jsxs("div",{className:a.slaCard,children:[e.jsx("div",{className:a.slaLabel,children:"MTTR"}),e.jsxs("div",{className:a.slaValue,children:[l.slaMetrics.mttr," min"]}),e.jsx("div",{className:a.slaTarget,children:"Mean Time To Recovery"})]}),e.jsxs("div",{className:a.slaCard,children:[e.jsx("div",{className:a.slaLabel,children:"MTBF"}),e.jsxs("div",{className:a.slaValue,children:[l.slaMetrics.mtbf," hrs"]}),e.jsx("div",{className:a.slaTarget,children:"Mean Time Between Failures"})]})]})]}),(l==null?void 0:l.technology)&&e.jsxs("div",{className:a.techSection,children:[e.jsxs("h3",{children:[e.jsx(Ye,{size:20}),"Technology Stack"]}),e.jsxs("div",{className:a.techGrid,children:[e.jsxs("div",{className:a.techCard,children:[e.jsx("div",{className:a.techLabel,children:"Service"}),e.jsx("div",{className:a.techValue,children:l.technology.stack})]}),e.jsxs("div",{className:a.techCard,children:[e.jsx("div",{className:a.techLabel,children:"Resource Group"}),e.jsx("div",{className:a.techValue,children:l.technology.resourceGroup})]}),e.jsxs("div",{className:a.techCard,children:[e.jsx("div",{className:a.techLabel,children:"Region"}),e.jsx("div",{className:a.techValue,children:l.technology.region})]}),e.jsxs("div",{className:a.techCard,children:[e.jsx("div",{className:a.techLabel,children:"Subscription"}),e.jsx("div",{className:a.techValue,children:l.technology.subscriptionId})]})]})]}),(l==null?void 0:l.operationalInfo)&&e.jsxs("div",{className:a.configSection,children:[e.jsxs("h3",{children:[e.jsx(ms,{size:20}),"Operational Configuration"]}),e.jsxs("div",{className:a.configGrid,children:[e.jsxs("div",{className:a.configCard,children:[e.jsx("div",{className:a.configLabel,children:"Criticality Level"}),e.jsx("div",{className:`${a.configValue} ${a[`criticality-${l.operationalInfo.criticalityLevel}`]}`,children:l.operationalInfo.criticalityLevel.toUpperCase()})]}),e.jsxs("div",{className:a.configCard,children:[e.jsx("div",{className:a.configLabel,children:"Data Classification"}),e.jsxs("div",{className:`${a.configValue} ${a[`classification-${l.operationalInfo.dataClassification}`]}`,children:[e.jsx(Ze,{size:14}),l.operationalInfo.dataClassification.toUpperCase()]})]}),e.jsxs("div",{className:a.configCard,children:[e.jsx("div",{className:a.configLabel,children:"Maintenance Window"}),e.jsxs("div",{className:a.configValue,children:[e.jsx(F,{size:14}),l.operationalInfo.maintenanceWindow]})]}),e.jsxs("div",{className:a.configCard,children:[e.jsx("div",{className:a.configLabel,children:"Compliance"}),e.jsx("div",{className:a.complianceList,children:l.operationalInfo.complianceRequirements.map((r,h)=>e.jsx("span",{className:a.complianceBadge,children:r},h))})]})]})]}),(l==null?void 0:l.performanceMetrics)&&e.jsxs("div",{className:a.perfSection,children:[e.jsxs("h3",{children:[e.jsx(ne,{size:20}),"Real-time Performance"]}),e.jsxs("div",{className:a.perfGrid,children:[e.jsxs("div",{className:a.perfCard,children:[e.jsx("div",{className:a.perfLabel,children:"Average Latency"}),e.jsxs("div",{className:a.perfValue,children:[l.performanceMetrics.avgLatency,"ms"]})]}),e.jsxs("div",{className:a.perfCard,children:[e.jsx("div",{className:a.perfLabel,children:"P95 Latency"}),e.jsxs("div",{className:a.perfValue,children:[l.performanceMetrics.p95Latency,"ms"]})]}),e.jsxs("div",{className:a.perfCard,children:[e.jsx("div",{className:a.perfLabel,children:"Error Rate"}),e.jsxs("div",{className:a.perfValue,children:[l.performanceMetrics.errorRate.toFixed(2),"%"]})]}),e.jsxs("div",{className:a.perfCard,children:[e.jsx("div",{className:a.perfLabel,children:"Throughput"}),e.jsxs("div",{className:a.perfValue,children:[l.performanceMetrics.throughputMbps," MB/s"]})]}),e.jsxs("div",{className:a.perfCard,children:[e.jsx("div",{className:a.perfLabel,children:"CPU Usage"}),e.jsxs("div",{className:a.perfValue,children:[l.performanceMetrics.cpuUtilization.toFixed(1),"%"]})]}),e.jsxs("div",{className:a.perfCard,children:[e.jsx("div",{className:a.perfLabel,children:"Memory Usage"}),e.jsxs("div",{className:a.perfValue,children:[l.performanceMetrics.memoryUtilization.toFixed(1),"%"]})]})]})]}),(l==null?void 0:l.troubleshooting)&&e.jsxs("div",{className:a.troubleshootSection,children:[e.jsxs("h3",{children:[e.jsx(te,{size:20}),"Troubleshooting Resources"]}),e.jsxs("div",{className:a.troubleshootGrid,children:[e.jsxs("div",{className:a.troubleshootCard,children:[e.jsx("h4",{children:"Common Issues"}),e.jsx("ul",{className:a.issuesList,children:l.troubleshooting.commonIssues.map((r,h)=>e.jsxs("li",{className:a.issueItem,children:[e.jsx(ae,{size:14}),r]},h))})]}),e.jsxs("div",{className:a.troubleshootCard,children:[e.jsx("h4",{children:"Health Check Endpoints"}),e.jsx("div",{className:a.endpointsList,children:l.troubleshooting.healthCheckEndpoints.map((r,h)=>e.jsxs("button",{className:a.endpointButton,onClick:()=>window.open(r,"_blank"),children:[e.jsx(W,{size:14}),"Health Check ",h+1,e.jsx(X,{size:12})]},h))})]}),e.jsxs("div",{className:a.troubleshootCard,children:[e.jsx("h4",{children:"Diagnostic Queries"}),e.jsx("div",{className:a.queriesList,children:l.troubleshooting.logQuerySamples.slice(0,2).map((r,h)=>e.jsxs("div",{className:a.queryItem,children:[e.jsxs("div",{className:a.queryHeader,children:[e.jsxs("span",{children:["Query ",h+1]}),e.jsxs("button",{className:a.copyButton,onClick:()=>V(r,`Query ${h+1}`),children:[e.jsx(se,{size:12}),L===`Query ${h+1}`?"Copied!":"Copy"]})]}),e.jsx("code",{className:a.queryCode,children:r})]},h))})]})]})]})]})}),C==="logs"&&e.jsx("div",{className:a.tabContent,children:e.jsxs("div",{className:a.logsSection,children:[e.jsx("h3",{children:"Log References"}),e.jsx("div",{className:a.logsList,children:T.map((r,h)=>e.jsxs("div",{className:a.logItem,children:[e.jsxs("div",{className:a.logHeader,children:[e.jsxs("div",{className:a.logSystem,children:[e.jsx(te,{size:16}),r.logSystem.toUpperCase()]}),e.jsxs("button",{className:a.logButton,onClick:()=>window.open(r.logUrl,"_blank"),children:[e.jsx(X,{size:14}),"Open Logs"]})]}),e.jsxs("div",{className:a.logMeta,children:[e.jsxs("span",{children:["Correlation ID: ",r.correlationId]}),e.jsxs("span",{children:["Time Range: ",new Date(r.timeRange.start).toLocaleString()," -",new Date(r.timeRange.end).toLocaleString()]})]}),r.queryTemplate&&e.jsxs("div",{className:a.queryTemplate,children:[e.jsxs("div",{className:a.queryHeader,children:[e.jsx("span",{children:"Query Template:"}),e.jsxs("button",{className:a.copyButton,onClick:()=>V(r.queryTemplate,"Query"),children:[e.jsx(se,{size:12}),L==="Query"?"Copied!":"Copy"]})]}),e.jsx("code",{className:a.queryCode,children:r.queryTemplate})]})]},h))})]})}),C==="metrics"&&e.jsx("div",{className:a.tabContent,children:e.jsxs("div",{className:a.metricsSection,children:[e.jsx("h3",{children:"Performance Metrics History"}),e.jsxs("div",{className:a.metricsPlaceholder,children:[e.jsx(W,{size:48}),e.jsx("p",{children:"Interactive metrics charts would be displayed here"}),e.jsx("p",{children:"Showing trends for: Records/sec, Processing Time, Error Rate, Data Quality"}),z.length>0&&e.jsxs("p",{className:a.metricsInfo,children:[z.length," historical data points available"]}),$&&e.jsxs("button",{className:a.grafanaButton,onClick:()=>window.open($,"_blank"),children:[e.jsx(X,{size:16}),"View in Grafana"]})]})]})}),C==="impact"&&e.jsx("div",{className:a.tabContent,children:S?e.jsxs("div",{className:a.impactSection,children:[e.jsxs("div",{className:a.impactOverview,children:[e.jsx("h3",{children:"Impact Analysis"}),e.jsx("div",{className:a.impactLevel,children:e.jsxs("span",{className:a.impactBadge,style:{backgroundColor:E(S.businessImpactLevel)},children:[S.businessImpactLevel.toUpperCase()," IMPACT"]})})]}),e.jsxs("div",{className:a.impactGrid,children:[e.jsxs("div",{className:a.impactCard,children:[e.jsx("h4",{children:"Affected Downstream Pipelines"}),e.jsx("div",{className:a.affectedList,children:S.affectedDownstreamPipelines.map((r,h)=>e.jsxs("div",{className:a.affectedItem,children:[e.jsx(ae,{size:14}),r]},h))})]}),e.jsxs("div",{className:a.impactCard,children:[e.jsx("h4",{children:"Affected Destinations"}),e.jsx("div",{className:a.affectedList,children:S.affectedDestinations.map((r,h)=>e.jsxs("div",{className:a.affectedItem,children:[e.jsx(ae,{size:14}),r]},h))})]}),e.jsxs("div",{className:a.impactCard,children:[e.jsx("h4",{children:"Estimated Data Loss"}),e.jsxs("div",{className:a.impactMetric,children:[S.estimatedDataLoss.toLocaleString()," records"]})]}),e.jsxs("div",{className:a.impactCard,children:[e.jsx("h4",{children:"Recovery Time Estimate"}),e.jsxs("div",{className:a.impactMetric,children:[S.recoveryTimeEstimate," minutes"]})]})]})]}):e.jsxs("div",{className:a.noImpact,children:[e.jsx(Y,{size:48}),e.jsx("h3",{children:"No Current Impact"}),e.jsx("p",{children:"This pipeline failure is not currently impacting downstream systems."})]})}),C==="runbooks"&&e.jsx("div",{className:a.tabContent,children:e.jsxs("div",{className:a.runbooksSection,children:[e.jsx("h3",{children:"Resolution Runbooks"}),e.jsx("div",{className:a.runbooksList,children:M.map((r,h)=>e.jsxs("div",{className:a.runbookItem,children:[e.jsxs("div",{className:a.runbookHeader,children:[e.jsx("h4",{children:r.title}),e.jsxs("div",{className:a.runbookMeta,children:[e.jsx(F,{size:14}),"~",r.estimatedResolutionTime," min"]})]}),e.jsx("p",{className:a.runbookDescription,children:r.description}),e.jsxs("button",{className:a.runbookButton,onClick:()=>window.open(r.url,"_blank"),children:[e.jsx(te,{size:16}),"Open Runbook"]})]},h))}),e.jsxs("div",{className:a.oncallInfo,children:[e.jsx("h4",{children:"On-Call Team"}),e.jsxs("div",{className:a.oncallDetails,children:[e.jsx(q,{size:16}),e.jsx("span",{children:A})]})]})]})})]})]})})},Ga="_dataLineage_bh4pt_2",Ra="_header_bh4pt_9",Va="_headerContent_bh4pt_13",Oa="_titleSection_bh4pt_19",qa="_title_bh4pt_19",Ua="_infoButton_bh4pt_37",Wa="_subtitle_bh4pt_57",Fa="_mainContent_bh4pt_64",Qa="_controls_bh4pt_70",Ka="_searchContainer_bh4pt_82",Xa="_searchIcon_bh4pt_89",Ya="_searchInput_bh4pt_99",Za="_filterSelect_bh4pt_120",Ja="_clearButton_bh4pt_137",en="_filterIndicator_bh4pt_153",sn="_clearFilterButton_bh4pt_166",tn="_contentGrid_bh4pt_181",an="_visualizationPanel_bh4pt_188",nn="_legend_bh4pt_197",cn="_legendItem_bh4pt_209",rn="_legendDot_bh4pt_218",on="_source_bh4pt_225",ln="_ingestion_bh4pt_229",dn="_transformation_bh4pt_233",mn="_enrichment_bh4pt_237",hn="_destination_bh4pt_241",pn="_lineageContainer_bh4pt_245",un="_lineageSvg_bh4pt_253",_n="_sectionLabel_bh4pt_260",xn="_nodeGroup_bh4pt_267",fn="_nodeRect_bh4pt_272",gn="_selectedNode_bh4pt_284",yn="_nodeText_bh4pt_290",jn="_nodeSubtext_bh4pt_295",Nn="_connectionLine_bh4pt_300",bn="_flowDot_bh4pt_304",vn="_glow_bh4pt_1",Cn="_tooltip_bh4pt_309",Sn="_nodePopup_bh4pt_315",In="_popupSlideIn_bh4pt_1",kn="_nodePopupExpanded_bh4pt_331",Ln="_popupHeader_bh4pt_349",wn="_popupTitle_bh4pt_358",Tn="_popupActions_bh4pt_368",Mn="_popupButton_bh4pt_374",An="_expandButtonContainer_bh4pt_392",$n="_expandButton_bh4pt_392",Pn="_popupContent_bh4pt_418",zn="_quickInfo_bh4pt_422",Dn="_quickInfoItem_bh4pt_429",En="_quickInfoLabel_bh4pt_435",Bn="_quickInfoValue_bh4pt_443",Hn="_statusBadge_bh4pt_452",Gn="_statusHealthy_bh4pt_461",Rn="_statusWarning_bh4pt_467",Vn="_statusFailed_bh4pt_473",On="_statusProcessing_bh4pt_479",qn="_expandedContent_bh4pt_485",Un="_expandedSection_bh4pt_492",Wn="_expandedSectionTitle_bh4pt_499",Fn="_expandedSectionContent_bh4pt_509",Qn="_detailItem_bh4pt_515",Kn="_detailLabel_bh4pt_522",Xn="_detailValue_bh4pt_526",Yn="_tagList_bh4pt_531",Zn="_tag_bh4pt_531",Jn="_popupOverlay_bh4pt_547",ei="_metricGrid_bh4pt_558",si="_metricItem_bh4pt_565",ti="_metricValue_bh4pt_573",ai="_metricLabel_bh4pt_580",ni="_sidePanel_bh4pt_614",ii="_summaryGrid_bh4pt_647",ci="_errorBadge_bh4pt_657",ri="_warning_bh4pt_675",oi="_nodeWithErrors_bh4pt_679",li="_clickHint_bh4pt_689",di="_errorNode_bh4pt_710",mi="_warningNode_bh4pt_716",hi="_techDetails_bh4pt_723",pi="_techItem_bh4pt_729",ui="_protocolTag_bh4pt_754",_i="_serviceTag_bh4pt_754",xi="_apiTag_bh4pt_754",fi="_networkTag_bh4pt_754",gi="_alertRule_bh4pt_754",yi="_alertList_bh4pt_792",ji="_troubleshootingActions_bh4pt_799",Ni="_actionButton_bh4pt_805",bi="_errorDetails_bh4pt_831",vi="_errorHeader_bh4pt_839",Ci="_errorIcon_bh4pt_846",Si="_errorMessage_bh4pt_852",Ii="_errorMeta_bh4pt_859",ki="_errorCode_bh4pt_865",Li="_errorTime_bh4pt_875",wi="_suggestedActions_bh4pt_880",Ti="_viewFullErrorButton_bh4pt_904",Mi="_monitoringLinks_bh4pt_933",Ai="_logLink_bh4pt_940",$i="_communicationLinks_bh4pt_961",Pi="_commLink_bh4pt_970",zi="_detailTitle_bh4pt_992",Di="_pulse_bh4pt_1",Ei="_linkList_bh4pt_1010",Bi="_link_bh4pt_1010",Hi="_codeSnippets_bh4pt_1032",Gi="_codeSnippet_bh4pt_1032",Ri="_summaryCard_bh4pt_1065",Vi="_summaryIcon_bh4pt_1101",Oi="_summaryContent_bh4pt_1139",qi="_summaryValue_bh4pt_1146",Ui="_summaryLabel_bh4pt_1158",t={dataLineage:Ga,header:Ra,headerContent:Va,titleSection:Oa,title:qa,infoButton:Ua,subtitle:Wa,mainContent:Fa,controls:Qa,searchContainer:Ka,searchIcon:Xa,searchInput:Ya,filterSelect:Za,clearButton:Ja,filterIndicator:en,clearFilterButton:sn,contentGrid:tn,visualizationPanel:an,legend:nn,legendItem:cn,legendDot:rn,source:on,ingestion:ln,transformation:dn,enrichment:mn,destination:hn,lineageContainer:pn,lineageSvg:un,sectionLabel:_n,nodeGroup:xn,nodeRect:fn,selectedNode:gn,nodeText:yn,nodeSubtext:jn,connectionLine:Nn,flowDot:bn,glow:vn,tooltip:Cn,nodePopup:Sn,popupSlideIn:In,nodePopupExpanded:kn,popupHeader:Ln,popupTitle:wn,popupActions:Tn,popupButton:Mn,expandButtonContainer:An,expandButton:$n,popupContent:Pn,quickInfo:zn,quickInfoItem:Dn,quickInfoLabel:En,quickInfoValue:Bn,statusBadge:Hn,statusHealthy:Gn,statusWarning:Rn,statusFailed:Vn,statusProcessing:On,expandedContent:qn,expandedSection:Un,expandedSectionTitle:Wn,expandedSectionContent:Fn,detailItem:Qn,detailLabel:Kn,detailValue:Xn,tagList:Yn,tag:Zn,popupOverlay:Jn,metricGrid:ei,metricItem:si,metricValue:ti,metricLabel:ai,sidePanel:ni,summaryGrid:ii,errorBadge:ci,warning:ri,nodeWithErrors:oi,clickHint:li,errorNode:di,warningNode:mi,techDetails:hi,techItem:pi,protocolTag:ui,serviceTag:_i,apiTag:xi,networkTag:fi,alertRule:gi,alertList:yi,troubleshootingActions:ji,actionButton:Ni,errorDetails:bi,errorHeader:vi,errorIcon:Ci,errorMessage:Si,errorMeta:Ii,errorCode:ki,errorTime:Li,suggestedActions:wi,viewFullErrorButton:Ti,monitoringLinks:Mi,logLink:Ai,communicationLinks:$i,commLink:Pi,detailTitle:zi,pulse:Di,linkList:Ei,link:Bi,codeSnippets:Hi,codeSnippet:Gi,summaryCard:Ri,summaryIcon:Vi,summaryContent:Oi,summaryValue:qi,summaryLabel:Ui},Wi=j.memo(()=>{var ie,ce,re,oe,le,de,me,he,pe,ue,_e,xe,fe,ge,ye,je,Ne,be,ve,Ce,Se,Ie,ke,Le,we,Te,Me,Ae,$e,Pe,ze,De,Ee,Be,He,Ge,Re;const[H,Q]=j.useState(""),[N,y]=j.useState("all"),[i,T]=j.useState(null),[z,S]=j.useState(null),[M,A]=j.useState([]),[I,k]=j.useState(!1),[K,$]=j.useState(!1),[D,l]=j.useState(!1),[C,G]=j.useState({x:0,y:0}),[L,R]=j.useState(!1),V=j.useRef(null),o=n=>{let c=0;for(let d=0;d<n.length;d++){const p=n.charCodeAt(d);c=(c<<5)-c+p,c=c&c}return Math.abs(c)/2147483647},E=()=>{const n=[],c=[],d=["LinkedIn","Twitter","Office365","AzureAD","GitHub","ThreatIntel","Exchange","Teams","SharePoint","PowerBI"];return d.forEach((s,_)=>{var b;const u=o(`${s}-status`),f=["healthy","warning","failed"],x=f[Math.floor(u*f.length)],m=J.filter(Z=>Z.source===s),v=m.length>0?m[0]:null;n.push({id:`source-${s}`,name:s,type:"source",source:s,x:50,y:80+_*80,status:x,recordsPerSecond:Math.floor(o(`${s}-records`)*1e3)+100,avgProcessingTime:Math.floor(o(`${s}-time`)*500)+50,connections:[],description:`Data ingestion from ${s} platform`,lastUpdate:new Date(Date.now()-o(`${s}-update`)*36e5).toISOString(),dataQuality:Math.floor(o(`${s}-quality`)*20)+80,pipelineData:v,hasErrors:x==="failed"||x==="warning",errorCount:((b=v==null?void 0:v.errorHistory)==null?void 0:b.length)||(x==="failed"?3:x==="warning"?1:0),technology:s==="Office365"||s==="Exchange"||s==="Teams"||s==="SharePoint"?"Microsoft Graph API":s==="AzureAD"?"Azure Active Directory Logs":s==="LinkedIn"||s==="Twitter"?"Azure Event Hubs":s==="GitHub"?"GitHub REST API â†’ Azure Logic Apps":s==="ThreatIntel"?"Microsoft Defender for Threat Intelligence API":"Azure Event Hubs",resourceGroup:"rg-mstic-prod-eastus2",subscriptionId:"mstic-prod-subscription",region:"East US 2",throughputUnits:["LinkedIn","Twitter"].includes(s)?20:10,partitionCount:["LinkedIn","Twitter"].includes(s)?32:16,retentionDays:7,protocols:s==="Office365"||s==="AzureAD"?["HTTPS","OAuth 2.0"]:s==="GitHub"?["HTTPS","Webhook"]:["HTTPS","AMQP 1.0","Kafka"],authentication:s==="Office365"||s==="AzureAD"?"Managed Identity + Application Registration":s==="GitHub"?"GitHub App + Personal Access Token":"Managed Identity + Shared Access Key",monitoring:{applicationInsights:"ai-mstic-ingestion-prod",logAnalyticsWorkspace:"law-mstic-prod-eastus2",kustoCluster:"msticdata.eastus2.kusto.windows.net",alertRules:[`${s}_ingestion_failure`,`${s}_throughput_low`,`${s}_latency_high`]},dependencies:{keyVault:"kv-mstic-secrets-prod",serviceAccounts:[`sa-${s.toLowerCase()}-ingestion`],externalApis:s==="Office365"?["graph.microsoft.com"]:s==="GitHub"?["api.github.com"]:s==="LinkedIn"?["api.linkedin.com"]:s==="Twitter"?["api.twitter.com"]:[],networkConnections:["Virtual Network Gateway","Private Endpoints","Service Endpoints"]},slaMetrics:{uptime:Math.max(95,100-o(`${s}-uptime`)*5),targetUptime:99.9,mttr:Math.floor(o(`${s}-mttr`)*30)+5,mtbf:Math.floor(o(`${s}-mtbf`)*168)+24},operationalInfo:{owner:s==="Office365"||s==="AzureAD"?"MSTIC Identity Team":s==="GitHub"||s==="LinkedIn"?"MSTIC External Feeds Team":"MSTIC Data Ingestion Team",escalationPath:["On-call Engineer","Team Lead","Principal Engineer","Engineering Manager"],maintenanceWindow:"Sundays 02:00-04:00 UTC",criticalityLevel:["Office365","AzureAD","ThreatIntel"].includes(s)?"critical":["LinkedIn","Twitter"].includes(s)?"high":"medium",dataClassification:["Office365","AzureAD"].includes(s)?"confidential":"internal",complianceRequirements:["Office365","AzureAD"].includes(s)?["GDPR","SOX","ISO 27001","FedRAMP"]:["GDPR","ISO 27001"]},performanceMetrics:{avgLatency:Math.floor(o(`${s}-latency`)*200)+50,p95Latency:Math.floor(o(`${s}-p95`)*500)+100,errorRate:Math.round(o(`${s}-errors`)*2*100)/100,throughputMbps:Math.floor(o(`${s}-throughput`)*100)+10,cpuUtilization:Math.floor(o(`${s}-cpu`)*30)+20,memoryUtilization:Math.floor(o(`${s}-memory`)*40)+30},troubleshooting:{commonIssues:[`${s} API rate limiting`,"Authentication token expiration","Network connectivity issues","Data format validation errors"],runbookUrls:[`https://mstic.wiki/runbooks/${s.toLowerCase()}-ingestion`,`https://mstic.wiki/troubleshooting/${s.toLowerCase()}-common-issues`],logQuerySamples:[`${s}Ingestion_CL | where TimeGenerated > ago(1h) | where Level == "Error"`,`${s}Metrics_CL | summarize avg(RecordsPerSecond) by bin(TimeGenerated, 5m)`],healthCheckEndpoints:[`https://mstic-monitoring.azurewebsites.net/health/${s.toLowerCase()}`,`https://mstic-api.azurewebsites.net/status/${s.toLowerCase()}`]}})}),[{type:"ingestion",x:350},{type:"transformation",x:650},{type:"enrichment",x:950}].forEach(({type:s,x:_})=>{const u={};J.forEach(m=>{u[m.source]||(u[m.source]=[]),u[m.source].push(m)});const f=[];d.forEach(m=>{const v=u[m]||[];if(v.length>0){const b=Math.floor(o(`${s}-${m}`)*v.length);f.push(v[b])}});const x=f.map((m,v)=>{var b;return{id:`${s}-${m.id}`,name:`${s.charAt(0).toUpperCase()+s.slice(1)} - ${m.name.split(" ").slice(0,3).join(" ")}`,type:s,source:m.source,x:_,y:80+v*80,status:m.status,recordsPerSecond:Math.floor(m.recordsProcessed/60),avgProcessingTime:m.avgProcessingTime,connections:[],description:`${s} pipeline: ${m.name}`,lastUpdate:m.lastRun.toISOString(),dataQuality:Math.floor(o(`${m.id}-quality`)*15)+85,actualPipeline:m,pipelineData:m,hasErrors:m.status==="failed"||m.status==="warning",errorCount:((b=m.errorHistory)==null?void 0:b.length)||0,technology:s==="ingestion"?"Azure Data Factory":s==="transformation"?"Azure Synapse Analytics (Spark Pools)":"Azure Databricks + Azure Functions",resourceGroup:`rg-mstic-${s}-prod-eastus2`,subscriptionId:"mstic-prod-subscription",region:"East US 2",computeType:s==="ingestion"?"Integration Runtime (Auto-resolve)":s==="transformation"?"Spark Pool (Medium: 8-32 nodes)":"Databricks Cluster (Standard_DS3_v2)",partitionCount:s==="transformation"?64:32,retentionDays:30,protocols:s==="ingestion"?["HTTPS","ODBC","JDBC"]:s==="transformation"?["Spark SQL","Delta Lake"]:["Python","Scala","Delta Lake","MLflow"],authentication:"Managed Identity + Azure Key Vault",monitoring:{applicationInsights:`ai-mstic-${s}-prod`,logAnalyticsWorkspace:"law-mstic-prod-eastus2",kustoCluster:"msticdata.eastus2.kusto.windows.net",alertRules:[`${s}_pipeline_failure`,`${s}_processing_delay`,`${s}_resource_exhaustion`]},dependencies:{keyVault:"kv-mstic-secrets-prod",serviceAccounts:[`sa-${s}-${m.source.toLowerCase()}`],externalApis:s==="enrichment"?["threatintelligence.microsoft.com","virusshare.com"]:[],networkConnections:["Azure Virtual Network","Private Link","Managed Virtual Network"]},slaMetrics:{uptime:Math.max(95,100-o(`${m.id}-uptime`)*5),targetUptime:s==="ingestion"?99.95:99.9,mttr:Math.floor(o(`${m.id}-mttr`)*20)+10,mtbf:Math.floor(o(`${m.id}-mtbf`)*120)+48},operationalInfo:{owner:s==="ingestion"?"MSTIC Data Ingestion Team":s==="transformation"?"MSTIC Data Platform Team":"MSTIC ML Engineering Team",escalationPath:["On-call Engineer","Senior Engineer","Team Lead","Principal Engineer"],maintenanceWindow:s==="transformation"?"Saturdays 01:00-03:00 UTC":"Sundays 03:00-05:00 UTC",criticalityLevel:s==="ingestion"?"high":s==="transformation"?"critical":"medium",dataClassification:"internal",complianceRequirements:["GDPR","ISO 27001","SOC 2"]},performanceMetrics:{avgLatency:s==="ingestion"?Math.floor(o(`${m.id}-lat1`)*100)+20:s==="transformation"?Math.floor(o(`${m.id}-lat2`)*300)+100:Math.floor(o(`${m.id}-lat3`)*500)+200,p95Latency:s==="ingestion"?Math.floor(o(`${m.id}-p95-1`)*200)+50:s==="transformation"?Math.floor(o(`${m.id}-p95-2`)*600)+200:Math.floor(o(`${m.id}-p95-3`)*1e3)+500,errorRate:Math.round(o(`${m.id}-errors`)*1.5*100)/100,throughputMbps:Math.floor(o(`${m.id}-throughput`)*200)+50,cpuUtilization:Math.floor(o(`${m.id}-cpu`)*40)+30,memoryUtilization:Math.floor(o(`${m.id}-memory`)*50)+25},troubleshooting:{commonIssues:[`${s} pipeline timeout issues`,"Resource scaling limitations","Data schema validation errors","Memory pressure during peak loads"],runbookUrls:[`https://mstic.wiki/runbooks/${s}-pipeline-troubleshooting`,`https://mstic.wiki/scaling/${s}-performance-tuning`],logQuerySamples:[`${s.charAt(0).toUpperCase()+s.slice(1)}Pipeline_CL | where TimeGenerated > ago(1h) | where Level == "Error"`,`${s.charAt(0).toUpperCase()+s.slice(1)}Metrics_CL | summarize avg(ProcessingTimeMs) by bin(TimeGenerated, 5m)`],healthCheckEndpoints:[`https://mstic-monitoring.azurewebsites.net/health/${s}`,`https://mstic-${s}.azurewebsites.net/status`]}}});n.push(...x)}),[{name:"MSTIC Data Lake",types:["storage","archive"],priority:1},{name:"Threat Intelligence DB",types:["threat","intel"],priority:1},{name:"Security Analytics Store",types:["analytics","ml"],priority:2},{name:"Alert System",types:["realtime","alerts"],priority:1},{name:"ML Training Data",types:["ml","training"],priority:3},{name:"Compliance Archive",types:["compliance","audit"],priority:2},{name:"Real-time Dashboard",types:["realtime","dashboard"],priority:1},{name:"API Gateway",types:["api","external"],priority:2}].forEach((s,_)=>{const u=o(`${s.name}-status`),f=["healthy","warning"],x=f[Math.floor(u*f.length)];n.push({id:`dest-${s.name}`,name:s.name,type:"destination",x:1250,y:80+_*80,status:x,recordsPerSecond:Math.floor(o(`${s.name}-records`)*500)+50,avgProcessingTime:Math.floor(o(`${s.name}-time`)*100)+20,connections:[],description:`Data destination: ${s.name}`,lastUpdate:new Date(Date.now()-o(`${s.name}-update`)*18e5).toISOString(),dataQuality:Math.floor(o(`${s.name}-quality`)*10)+90,destinationTypes:s.types,priority:s.priority,technology:s.name.includes("Data Lake")?"Azure Data Lake Storage Gen2 (ADLS)":s.name.includes("DB")||s.name.includes("Database")?"Azure SQL Database (Premium)":s.name.includes("Analytics")?"Azure Synapse Analytics (SQL Pool)":s.name.includes("Alert")?"Azure Logic Apps + Service Bus":s.name.includes("ML")?"Azure Machine Learning Studio":s.name.includes("Compliance")?"Azure Purview + Archive Storage":s.name.includes("Dashboard")?"Power BI Premium + Azure SignalR":"Azure API Management + Application Gateway",resourceGroup:"rg-mstic-storage-prod-eastus2",subscriptionId:"mstic-prod-subscription",region:"East US 2",storageType:s.name.includes("Data Lake")?"Hot (Standard LRS) + Cool Archive":s.name.includes("Analytics")?"Premium SSD + Columnstore Index":s.name.includes("ML")?"Standard SSD + Blob Storage":s.name.includes("Compliance")?"Archive Storage (GRS)":"Standard Storage (ZRS)",partitionCount:s.name.includes("Data Lake")?128:s.name.includes("Analytics")?256:s.name.includes("Alert")?64:32,retentionDays:s.name.includes("Compliance")?2555:s.name.includes("Archive")?365:s.name.includes("ML")?180:90,protocols:s.name.includes("Data Lake")?["HTTPS","REST API","ABFS"]:s.name.includes("DB")?["TDS","HTTPS","ODBC"]:s.name.includes("Alert")?["HTTPS","AMQP","Service Bus"]:s.name.includes("API")?["HTTPS","OAuth 2.0","OpenAPI"]:["HTTPS","WebSocket","REST API"],authentication:s.name.includes("Data Lake")?"Managed Identity + ACLs + RBAC":s.name.includes("DB")?"Managed Identity + SQL Authentication":s.name.includes("ML")?"Service Principal + Workspace MSI":"Managed Identity + Key Vault",monitoring:{applicationInsights:"ai-mstic-destinations-prod",logAnalyticsWorkspace:"law-mstic-prod-eastus2",kustoCluster:"msticdata.eastus2.kusto.windows.net",alertRules:[`${s.name.replace(/\s+/g,"_").toLowerCase()}_capacity`,`${s.name.replace(/\s+/g,"_").toLowerCase()}_latency`,`${s.name.replace(/\s+/g,"_").toLowerCase()}_availability`]},dependencies:{keyVault:"kv-mstic-secrets-prod",serviceAccounts:[`sa-${s.name.replace(/\s+/g,"-").toLowerCase()}`],externalApis:s.name.includes("API")?["partner-apis.microsoft.com"]:[],networkConnections:["Private Endpoints","VNet Integration","Service Endpoints"]},slaMetrics:{uptime:Math.max(98,100-o(`${s.name}-uptime`)*2),targetUptime:s.name.includes("Data Lake")||s.name.includes("Alert")?99.99:99.9,mttr:Math.floor(o(`${s.name}-mttr`)*15)+5,mtbf:Math.floor(o(`${s.name}-mtbf`)*200)+100},operationalInfo:{owner:s.name.includes("Data Lake")||s.name.includes("Analytics")?"MSTIC Data Platform Team":s.name.includes("Alert")||s.name.includes("Dashboard")?"MSTIC Operations Team":s.name.includes("ML")?"MSTIC ML Engineering Team":s.name.includes("Compliance")?"MSTIC Compliance Team":"MSTIC Infrastructure Team",escalationPath:["On-call Engineer","Senior Engineer","Team Lead","Engineering Manager"],maintenanceWindow:s.name.includes("Alert")?"None (24/7 Operations)":"Sundays 01:00-03:00 UTC",criticalityLevel:s.name.includes("Alert")||s.name.includes("Data Lake")?"critical":s.name.includes("Dashboard")||s.name.includes("Analytics")?"high":"medium",dataClassification:s.name.includes("Compliance")?"confidential":"internal",complianceRequirements:s.name.includes("Compliance")?["GDPR","SOX","ISO 27001","FedRAMP","HIPAA"]:["GDPR","ISO 27001","SOC 2"]},performanceMetrics:{avgLatency:s.name.includes("Data Lake")?Math.floor(o(`${s.name}-lat1`)*50)+10:s.name.includes("Alert")?Math.floor(o(`${s.name}-lat2`)*100)+50:s.name.includes("Analytics")?Math.floor(o(`${s.name}-lat3`)*200)+100:Math.floor(o(`${s.name}-lat4`)*150)+75,p95Latency:s.name.includes("Data Lake")?Math.floor(o(`${s.name}-p95-1`)*100)+25:s.name.includes("Alert")?Math.floor(o(`${s.name}-p95-2`)*200)+100:s.name.includes("Analytics")?Math.floor(o(`${s.name}-p95-3`)*500)+250:Math.floor(o(`${s.name}-p95-4`)*300)+150,errorRate:Math.round(o(`${s.name}-errors`)*1*100)/100,throughputMbps:s.name.includes("Data Lake")?Math.floor(o(`${s.name}-through1`)*500)+100:s.name.includes("Analytics")?Math.floor(o(`${s.name}-through2`)*300)+50:Math.floor(o(`${s.name}-through3`)*200)+25,cpuUtilization:Math.floor(o(`${s.name}-cpu`)*25)+15,memoryUtilization:Math.floor(o(`${s.name}-memory`)*35)+20},troubleshooting:{commonIssues:[`${s.name} capacity management`,"Query performance optimization","Connection pool exhaustion","Storage tier optimization"],runbookUrls:[`https://mstic.wiki/runbooks/${s.name.replace(/\s+/g,"-").toLowerCase()}-maintenance`,`https://mstic.wiki/troubleshooting/${s.name.replace(/\s+/g,"-").toLowerCase()}-performance`],logQuerySamples:[`${s.name.replace(/\s+/g,"")}Logs_CL | where TimeGenerated > ago(1h) | where Level == "Error"`,`${s.name.replace(/\s+/g,"")}Metrics_CL | summarize avg(ResponseTimeMs) by bin(TimeGenerated, 5m)`],healthCheckEndpoints:[`https://mstic-monitoring.azurewebsites.net/health/${s.name.replace(/\s+/g,"-").toLowerCase()}`,`https://mstic-storage.azurewebsites.net/status/${s.name.replace(/\s+/g,"-").toLowerCase()}`]}})}),n.forEach(s=>{if(s.type==="source")n.filter(u=>u.type==="ingestion"&&u.source===s.source).forEach(u=>{const f=`${s.id}-${u.id}`,x=o(`${f}-volume`),m=["low","medium","high"],v=m[Math.floor(x*m.length)];c.push({id:f,from:s.id,to:u.id,volume:v,health:s.status==="failed"?"error":s.status==="warning"?"warning":"healthy",animated:s.status!=="failed"}),s.connections.push(u.id),u.connections.push(s.id)});else if(s.type==="ingestion"){const _=n.find(u=>u.type==="source"&&u.source===s.source);(_==null?void 0:_.status)!=="failed"&&n.filter(f=>f.type==="transformation"&&f.source===s.source).slice(0,2).forEach(f=>{const x=`${s.id}-${f.id}`,m=o(`${x}-volume`),v=["medium","high"],b=v[Math.floor(m*v.length)];c.push({id:x,from:s.id,to:f.id,volume:b,health:s.status==="failed"?"error":s.status==="warning"?"warning":"healthy",animated:s.status!=="failed"}),s.connections.push(f.id),f.connections.push(s.id)})}else if(s.type==="transformation"){const _=n.find(f=>f.type==="ingestion"&&f.source===s.source),u=n.find(f=>f.type==="source"&&f.source===s.source);(u==null?void 0:u.status)!=="failed"&&(_==null?void 0:_.status)!=="failed"&&n.filter(x=>x.type==="enrichment"&&x.source===s.source).slice(0,2).forEach(x=>{const m=`${s.id}-${x.id}`;c.push({id:m,from:s.id,to:x.id,volume:"high",health:s.status==="failed"?"error":s.status==="warning"?"warning":"healthy",animated:s.status!=="failed"}),s.connections.push(x.id),x.connections.push(s.id)})}else if(s.type==="enrichment"){const _=n.find(x=>x.type==="source"&&x.source===s.source),u=n.find(x=>x.type==="ingestion"&&x.source===s.source),f=n.find(x=>x.type==="transformation"&&x.source===s.source);if((_==null?void 0:_.status)!=="failed"&&(u==null?void 0:u.status)!=="failed"&&(f==null?void 0:f.status)!=="failed"){const m={LinkedIn:["Threat Intelligence DB","MSTIC Data Lake","ML Training Data"],Twitter:["Real-time Dashboard","Alert System","Security Analytics Store"],Office365:["Compliance Archive","Security Analytics Store","Alert System"],AzureAD:["Security Analytics Store","Alert System","Threat Intelligence DB"],GitHub:["Threat Intelligence DB","Security Analytics Store","API Gateway"],ThreatIntel:["Alert System","Threat Intelligence DB","Real-time Dashboard"],Exchange:["Compliance Archive","Security Analytics Store","Alert System"],Teams:["Compliance Archive","Real-time Dashboard","Security Analytics Store"],SharePoint:["Compliance Archive","MSTIC Data Lake","Security Analytics Store"],PowerBI:["Real-time Dashboard","Security Analytics Store","API Gateway"]}[s.source]||["MSTIC Data Lake","Security Analytics Store","Alert System"];n.filter(b=>b.type==="destination"&&m.includes(b.name)).forEach(b=>{const Z=`${s.id}-${b.id}`;c.push({id:Z,from:s.id,to:b.id,volume:"high",health:s.status==="failed"?"error":s.status==="warning"?"warning":"healthy",animated:s.status!=="failed"}),s.connections.push(b.id),b.connections.push(s.id)})}}}),{nodes:n,connections:c}},{nodes:w,connections:P}=j.useMemo(()=>{const n=E(),c=n.nodes.filter(d=>d.hasErrors);return console.log("Generated nodes:",{total:n.nodes.length,withErrors:c.length,errorNodes:c.map(d=>({id:d.id,name:d.name,status:d.status,errorCount:d.errorCount}))}),n},[]),r=j.useMemo(()=>N==="all"?P:P.filter(n=>{const c=w.find(p=>p.id===n.from),d=w.find(p=>p.id===n.to);return(c==null?void 0:c.source)===N||(d==null?void 0:d.source)===N?!0:(d==null?void 0:d.type)==="destination"?P.filter(g=>{var s;return g.to===d.id&&((s=w.find(_=>_.id===g.from))==null?void 0:s.type)==="enrichment"}).some(g=>{const s=w.find(_=>_.id===g.from);return(s==null?void 0:s.source)===N}):!1}),[w,P,N]),h=w,O=r;j.useEffect(()=>{A([]),T(null)},[N]),j.useEffect(()=>{const n=()=>{if(D&&i){let p=C.x,g=C.y;p+420>window.innerWidth-20&&(p=window.innerWidth-420-20),g+400>window.innerHeight-20&&(g=window.innerHeight-400-20),p<20&&(p=20),g<20&&(g=20),G({x:p,y:g})}};return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[D,i,C]);const B=h.filter(n=>n.name.toLowerCase().includes(H.toLowerCase())||n.source&&n.source.toLowerCase().includes(H.toLowerCase())),es=n=>{const c=new Set,d=[],p=g=>{if(c.has(g))return;c.add(g),d.push(g);const s=h.find(_=>_.id===g);s&&s.connections.forEach(_=>{c.has(_)||p(_)})};p(n),A(d)},ss=(n,c)=>{R(!1);const d=420,p=400,g=c.clientX,s=c.clientY;let _=g+15,u=s+15;_+d>window.innerWidth-20&&(_=g-d-15),u+p>window.innerHeight-20&&(u=s-p-15),_<20&&(_=20),u<20&&(u=20),d>window.innerWidth-40&&(_=20),p>window.innerHeight-40&&(u=20),G({x:_,y:u}),T(n),l(!0),n.type==="source"&&n.source?(y(n.source),A([])):es(n.id)},ts=()=>{const n=!L;if(R(n),!i)return;const c=n?800:420,d=n?600:400;let p=C.x,g=C.y;p+c>window.innerWidth-20&&(p=window.innerWidth-c-20),g+d>window.innerHeight-20&&(g=window.innerHeight-d-20),p<20&&(p=20),g<20&&(g=20),G({x:p,y:g})},as=n=>{console.log("Node double-clicked:",{id:n.id,name:n.name,status:n.status,hasErrors:n.hasErrors,errorCount:n.errorCount,hasPipelineData:!!n.pipelineData,pipelineDataKeys:n.pipelineData?Object.keys(n.pipelineData):[]}),(n.status==="failed"||n.status==="warning")&&n.pipelineData?(console.log("Opening error modal for node:",n.name),T(n),k(!0)):console.log("Not opening modal - conditions not met")},ns=n=>{if(M.length>0&&!M.includes(n.id))return"#444";if(N!=="all"){if(n.type==="source"&&n.source===N)return"#0078d4";if(n.type==="source"&&n.source!==N)return"#333";if(n.type!=="source"&&n.type!=="destination")if(n.source===N)switch(n.type){case"ingestion":return"#52c41a";case"transformation":return"#faad14";case"enrichment":return"#8b5cf6";default:return"#888"}else return"#333";if(n.type==="destination")return O.some(d=>d.to===n.id)?"#ef4444":"#333"}switch(n.type){case"source":return"#0078d4";case"ingestion":return"#52c41a";case"transformation":return"#faad14";case"enrichment":return"#8b5cf6";case"destination":return"#ef4444";default:return"#888"}},is=n=>{const c=M.includes(n.from)&&M.includes(n.to);return{strokeWidth:n.volume==="high"?"3":n.volume==="medium"?"2":"1",stroke:n.health==="error"?"#ef4444":n.health==="warning"?"#faad14":"#52c41a",opacity:M.length>0?c?"1":"0.2":"0.8",strokeDasharray:n.volume==="low"?"5,5":"none",markerEnd:n.health==="error"?"url(#arrowhead-error)":n.health==="warning"?"url(#arrowhead-warning)":"url(#arrowhead-healthy)"}},cs=n=>{switch(n){case"healthy":return e.jsx(Y,{size:16,className:t.statusHealthy});case"warning":return e.jsx(U,{size:16,className:t.statusWarning});case"failed":return e.jsx(Xe,{size:16,className:t.statusFailed});case"processing":return e.jsx(W,{size:16,className:t.statusProcessing});default:return null}},rs=[...new Set(J.map(n=>n.source))];return e.jsxs("div",{className:t.dataLineage,children:[e.jsx("div",{className:t.header,children:e.jsx("div",{className:t.headerContent,children:e.jsxs("div",{className:t.titleSection,children:[e.jsxs("h1",{className:t.title,children:["Interactive Data Lineage",e.jsx("button",{className:t.infoButton,onClick:()=>$(!0),title:"How does this system work?",children:e.jsx(Oe,{size:18})})]}),e.jsx("p",{className:t.subtitle,children:"Visualize and explore data flow through your threat intelligence pipelines"})]})})}),e.jsxs("div",{className:t.mainContent,children:[e.jsxs("div",{className:t.controls,children:[e.jsxs("div",{className:t.searchContainer,children:[e.jsx(hs,{className:t.searchIcon}),e.jsx("input",{type:"text",placeholder:"Search nodes and pipelines...",value:H,onChange:n=>Q(n.target.value),className:t.searchInput})]}),e.jsxs("select",{value:N,onChange:n=>y(n.target.value),className:t.filterSelect,children:[e.jsx("option",{value:"all",children:"All Sources"}),rs.map(n=>e.jsx("option",{value:n,children:n},n))]}),e.jsx("button",{className:t.clearButton,onClick:()=>{T(null),A([]),y("all")},children:"Clear Selection"}),e.jsx("button",{className:t.clearButton,onClick:()=>{const n=w.find(c=>c.hasErrors&&c.pipelineData);n?(console.log("Test: Opening modal for",n.name),T(n),k(!0)):console.log("Test: No error nodes found")},style:{background:"#dc3545"},children:"Test Error Modal"})]}),N!=="all"&&e.jsxs("div",{className:t.filterIndicator,children:[e.jsxs("span",{children:["Showing data flow for: ",e.jsx("strong",{children:N})]}),e.jsx("button",{className:t.clearFilterButton,onClick:()=>y("all"),title:"Show all sources",children:"Ã—"})]}),e.jsx("div",{className:t.contentGrid,children:e.jsxs("div",{className:t.visualizationPanel,children:[e.jsxs("div",{className:t.legend,children:[e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendDot} ${t.source}`}),e.jsx("span",{children:"Data Sources"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendDot} ${t.ingestion}`}),e.jsx("span",{children:"Ingestion"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendDot} ${t.transformation}`}),e.jsx("span",{children:"Transformation"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendDot} ${t.enrichment}`}),e.jsx("span",{children:"Enrichment"})]}),e.jsxs("div",{className:t.legendItem,children:[e.jsx("div",{className:`${t.legendDot} ${t.destination}`}),e.jsx("span",{children:"Destinations"})]})]}),e.jsx("div",{className:t.lineageContainer,children:e.jsxs("svg",{ref:V,className:t.lineageSvg,viewBox:"0 0 1600 900",preserveAspectRatio:"xMidYMid meet",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"flowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(82, 196, 26, 0.1)"}),e.jsx("stop",{offset:"50%",stopColor:"rgba(82, 196, 26, 0.8)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(82, 196, 26, 0.1)"}),e.jsx("animateTransform",{attributeName:"gradientTransform",attributeType:"XML",type:"translate",values:"-100 0; 200 0; -100 0",dur:"3s",repeatCount:"indefinite"})]}),e.jsx("marker",{id:"arrowhead-healthy",markerWidth:"6",markerHeight:"4",refX:"5",refY:"2",orient:"auto",children:e.jsx("polygon",{points:"0 0, 6 2, 0 4",fill:"#52c41a"})}),e.jsx("marker",{id:"arrowhead-warning",markerWidth:"6",markerHeight:"4",refX:"5",refY:"2",orient:"auto",children:e.jsx("polygon",{points:"0 0, 6 2, 0 4",fill:"#faad14"})}),e.jsx("marker",{id:"arrowhead-error",markerWidth:"6",markerHeight:"4",refX:"5",refY:"2",orient:"auto",children:e.jsx("polygon",{points:"0 0, 6 2, 0 4",fill:"#ef4444"})}),e.jsxs("filter",{id:"glow",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("text",{x:"120",y:"50",className:t.sectionLabel,children:"Data Sources"}),e.jsx("text",{x:"420",y:"50",className:t.sectionLabel,children:"Ingestion"}),e.jsx("text",{x:"720",y:"50",className:t.sectionLabel,children:"Transformation"}),e.jsx("text",{x:"1020",y:"50",className:t.sectionLabel,children:"Enrichment"}),e.jsx("text",{x:"1320",y:"50",className:t.sectionLabel,children:"Destinations"}),O.filter(n=>{const c=B.find(p=>p.id===n.from),d=B.find(p=>p.id===n.to);return c&&d}).map(n=>{const c=B.find(g=>g.id===n.from),d=B.find(g=>g.id===n.to),p=is(n);return e.jsxs("g",{children:[e.jsx("line",{x1:c.x+180,y1:c.y+22,x2:d.x-20,y2:d.y+22,stroke:p.stroke,strokeWidth:p.strokeWidth,opacity:p.opacity,strokeDasharray:p.strokeDasharray,markerEnd:p.markerEnd,className:t.connectionLine}),n.animated&&e.jsx("circle",{r:"3",fill:p.stroke,className:t.flowDot,children:e.jsx("animateMotion",{dur:"3s",repeatCount:"indefinite",path:`M${c.x+180},${c.y+22} L${d.x-20},${d.y+22}`})})]},n.id)}),B.map(n=>{const c=n.type==="source"&&N!=="all"&&n.source===N;return e.jsxs("g",{className:t.nodeGroup,onClick:d=>ss(n,d),onDoubleClick:()=>as(n),onMouseEnter:()=>S(n.id),onMouseLeave:()=>S(null),children:[e.jsx("rect",{x:n.x,y:n.y,width:"180",height:"45",fill:ns(n),rx:"6",className:`${t.nodeRect} ${(i==null?void 0:i.id)===n.id?t.selectedNode:""}`,filter:(i==null?void 0:i.id)===n.id||c?"url(#glow)":"none",stroke:c?"#ffffff":"transparent",strokeWidth:c?"2":"0"}),e.jsx("text",{x:n.x+90,y:n.y+18,textAnchor:"middle",fill:"white",fontSize:"11",fontWeight:"600",className:t.nodeText,children:n.name.length>20?`${n.name.substring(0,17)}...`:n.name}),e.jsx("text",{x:n.x+90,y:n.y+30,textAnchor:"middle",fill:"#0078d4",fontSize:"8",fontWeight:"500",children:n.technology.length>30?n.technology.split(" ")[0]+(n.technology.includes("Azure")?" "+n.technology.split(" ")[1]:""):n.technology}),e.jsxs("text",{x:n.x+90,y:n.y+40,textAnchor:"middle",fill:"rgba(255,255,255,0.8)",fontSize:"9",className:t.nodeSubtext,children:[n.recordsPerSecond,"/s"]}),e.jsx("circle",{cx:n.x+160,cy:n.y+12,r:"5",fill:n.status==="healthy"?"#52c41a":n.status==="warning"?"#faad14":n.status==="failed"?"#ef4444":"#1890ff"}),n.hasErrors&&n.errorCount&&n.errorCount>0&&e.jsxs("g",{children:[e.jsx("circle",{cx:n.x+170,cy:n.y+35,r:"12",fill:"#ef4444",stroke:"#ffffff",strokeWidth:"2"}),e.jsx("text",{x:n.x+170,y:n.y+40,textAnchor:"middle",fill:"white",fontSize:"11",fontWeight:"700",children:n.errorCount>9?"9+":n.errorCount})]}),n.hasErrors&&e.jsx("rect",{x:n.x-3,y:n.y-3,width:"186",height:"51",fill:"none",stroke:n.status==="failed"?"#ef4444":"#faad14",strokeWidth:"3",rx:"8",className:t.errorBorder}),n.hasErrors&&z===n.id&&e.jsxs("g",{children:[e.jsx("rect",{x:n.x+20,y:n.y+55,width:"140",height:"20",fill:"rgba(0, 0, 0, 0.8)",rx:"4"}),e.jsx("text",{x:n.x+90,y:n.y+68,textAnchor:"middle",fill:"#faad14",fontSize:"10",fontWeight:"600",children:"Double-click for error details"})]})]},n.id)}),z&&B.map(n=>{if(z!==n.id)return null;const c=n.x>1e3?n.x-210:n.x+190,d=n.y-10;return e.jsxs("g",{className:t.tooltip,children:[e.jsx("rect",{x:c,y:d,width:"220",height:"85",fill:"rgba(0,0,0,0.95)",rx:"6",stroke:"#555",strokeWidth:"1"}),e.jsx("text",{x:c+10,y:d+15,fill:"white",fontSize:"11",fontWeight:"600",children:n.name}),e.jsx("text",{x:c+10,y:d+28,fill:"#0078d4",fontSize:"9",fontWeight:"500",children:n.technology}),e.jsxs("text",{x:c+10,y:d+40,fill:"#ccc",fontSize:"9",children:["Records/sec: ",n.recordsPerSecond]}),e.jsxs("text",{x:c+10,y:d+52,fill:"#ccc",fontSize:"9",children:["Avg Time: ",n.avgProcessingTime,"ms"]}),e.jsxs("text",{x:c+10,y:d+64,fill:"#ccc",fontSize:"9",children:["Quality: ",n.dataQuality,"% | RG: ",n.resourceGroup.split("-").slice(-2).join("-")]}),e.jsx("text",{x:c+10,y:d+76,fill:"#52c41a",fontSize:"8",children:"Click for detailed tech specs â†’"})]},`tooltip-${n.id}`)})]})})]})}),D&&i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:t.popupOverlay,onClick:()=>l(!1)}),e.jsxs("div",{className:`${t.nodePopup} ${L?t.nodePopupExpanded:""}`,style:{left:`${C.x}px`,top:`${C.y}px`},children:[e.jsxs("div",{className:t.popupHeader,children:[e.jsxs("h3",{className:t.popupTitle,children:[i.type==="source"&&e.jsx(qe,{size:18}),i.type==="ingestion"&&e.jsx(Ue,{size:18}),i.type==="transformation"&&e.jsx(We,{size:18}),i.type==="enrichment"&&e.jsx(Je,{size:18}),i.type==="destination"&&e.jsx(Fe,{size:18}),i.name]}),e.jsx("div",{className:t.popupActions,children:e.jsx("button",{className:t.popupButton,onClick:()=>l(!1),title:"Close",children:e.jsx(ps,{size:16})})})]}),e.jsxs("div",{className:t.popupContent,children:[e.jsxs("div",{className:t.quickInfo,children:[e.jsxs("div",{className:t.quickInfoItem,children:[e.jsx("span",{className:t.quickInfoLabel,children:"Status"}),e.jsx("div",{className:t.quickInfoValue,children:e.jsxs("span",{className:`${t.statusBadge} ${t[`status${i.status.charAt(0).toUpperCase()+i.status.slice(1)}`]}`,children:[cs(i.status),i.status]})})]}),e.jsxs("div",{className:t.quickInfoItem,children:[e.jsx("span",{className:t.quickInfoLabel,children:"Technology"}),e.jsxs("div",{className:t.quickInfoValue,children:[e.jsx(Ye,{size:14}),i.technology]})]}),e.jsxs("div",{className:t.quickInfoItem,children:[e.jsx("span",{className:t.quickInfoLabel,children:"Throughput"}),e.jsxs("div",{className:t.quickInfoValue,children:[e.jsx(W,{size:14}),i.recordsPerSecond,"/s"]})]}),e.jsxs("div",{className:t.quickInfoItem,children:[e.jsx("span",{className:t.quickInfoLabel,children:"Processing Time"}),e.jsxs("div",{className:t.quickInfoValue,children:[e.jsx(F,{size:14}),i.avgProcessingTime,"ms"]})]})]}),e.jsxs("div",{className:t.metricGrid,children:[e.jsxs("div",{className:t.metricItem,children:[e.jsxs("p",{className:t.metricValue,children:[i.dataQuality,"%"]}),e.jsx("p",{className:t.metricLabel,children:"Data Quality"})]}),e.jsxs("div",{className:t.metricItem,children:[e.jsx("p",{className:t.metricValue,children:i.connections.length}),e.jsx("p",{className:t.metricLabel,children:"Connections"})]}),e.jsxs("div",{className:t.metricItem,children:[e.jsx("p",{className:t.metricValue,children:i.region}),e.jsx("p",{className:t.metricLabel,children:"Region"})]})]}),e.jsx("div",{className:t.expandButtonContainer,children:e.jsxs("button",{className:t.expandButton,onClick:ts,title:L?"Show less details":"Show more details",children:[L?e.jsx(us,{size:14}):e.jsx(_s,{size:14}),L?"Less Details":"More Details"]})}),L&&e.jsxs("div",{className:t.expandedContent,children:[e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(Ze,{size:16}),"Security & Authentication"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Authentication:"}),e.jsx("span",{className:t.detailValue,children:i.authentication})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Protocols:"}),e.jsx("div",{className:t.tagList,children:(ie=i.protocols)==null?void 0:ie.slice(0,3).map((n,c)=>e.jsx("span",{className:t.tag,children:n},c))})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(Qe,{size:16}),"Infrastructure"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Resource Group:"}),e.jsx("span",{className:t.detailValue,children:i.resourceGroup})]}),i.computeType&&e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Compute:"}),e.jsx("span",{className:t.detailValue,children:i.computeType})]}),i.storageType&&e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Storage:"}),e.jsx("span",{className:t.detailValue,children:i.storageType})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(ne,{size:16}),"Monitoring"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"App Insights:"}),e.jsx("span",{className:t.detailValue,children:(ce=i.monitoring)==null?void 0:ce.applicationInsights})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Log Analytics:"}),e.jsx("span",{className:t.detailValue,children:(re=i.monitoring)==null?void 0:re.logAnalyticsWorkspace})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(U,{size:16}),"Dependencies"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Key Vault:"}),e.jsx("span",{className:t.detailValue,children:(oe=i.dependencies)==null?void 0:oe.keyVault})]}),((le=i.dependencies)==null?void 0:le.externalApis)&&i.dependencies.externalApis.length>0&&e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"External APIs:"}),e.jsx("div",{className:t.tagList,children:i.dependencies.externalApis.slice(0,2).map((n,c)=>e.jsx("span",{className:t.tag,children:n},c))})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(Qe,{size:16}),"Operational Information"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Owner:"}),e.jsx("span",{className:t.detailValue,children:(de=i.operationalInfo)==null?void 0:de.owner})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Escalation Path:"}),e.jsx("div",{className:t.tagList,children:(he=(me=i.operationalInfo)==null?void 0:me.escalationPath)==null?void 0:he.map((n,c)=>e.jsx("span",{className:t.tag,children:n},c))})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Maintenance Window:"}),e.jsx("span",{className:t.detailValue,children:(pe=i.operationalInfo)==null?void 0:pe.maintenanceWindow})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Criticality Level:"}),e.jsx("span",{className:t.detailValue,children:(ue=i.operationalInfo)==null?void 0:ue.criticalityLevel})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Data Classification:"}),e.jsx("span",{className:t.detailValue,children:(_e=i.operationalInfo)==null?void 0:_e.dataClassification})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Compliance Requirements:"}),e.jsx("div",{className:t.tagList,children:(fe=(xe=i.operationalInfo)==null?void 0:xe.complianceRequirements)==null?void 0:fe.map((n,c)=>e.jsx("span",{className:t.tag,children:n},c))})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(F,{size:16}),"SLA Metrics"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Uptime:"}),e.jsxs("span",{className:t.detailValue,children:[(ge=i.slaMetrics)==null?void 0:ge.uptime,"%"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Target Uptime:"}),e.jsxs("span",{className:t.detailValue,children:[(ye=i.slaMetrics)==null?void 0:ye.targetUptime,"%"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"MTTR:"}),e.jsxs("span",{className:t.detailValue,children:[(je=i.slaMetrics)==null?void 0:je.mttr," minutes"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"MTBF:"}),e.jsxs("span",{className:t.detailValue,children:[(Ne=i.slaMetrics)==null?void 0:Ne.mtbf," hours"]})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(ne,{size:16}),"Performance Metrics"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Avg Latency:"}),e.jsxs("span",{className:t.detailValue,children:[(be=i.performanceMetrics)==null?void 0:be.avgLatency,"ms"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"P95 Latency:"}),e.jsxs("span",{className:t.detailValue,children:[(ve=i.performanceMetrics)==null?void 0:ve.p95Latency,"ms"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Error Rate:"}),e.jsxs("span",{className:t.detailValue,children:[(Ce=i.performanceMetrics)==null?void 0:Ce.errorRate,"%"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Throughput:"}),e.jsxs("span",{className:t.detailValue,children:[(Se=i.performanceMetrics)==null?void 0:Se.throughputMbps," Mbps"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"CPU Utilization:"}),e.jsxs("span",{className:t.detailValue,children:[(Ie=i.performanceMetrics)==null?void 0:Ie.cpuUtilization,"%"]})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Memory Utilization:"}),e.jsxs("span",{className:t.detailValue,children:[(ke=i.performanceMetrics)==null?void 0:ke.memoryUtilization,"%"]})]})]})]}),e.jsxs("div",{className:t.expandedSection,children:[e.jsxs("h4",{className:t.expandedSectionTitle,children:[e.jsx(Oe,{size:16}),"Troubleshooting Resources"]}),e.jsxs("div",{className:t.expandedSectionContent,children:[e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Common Issues:"}),e.jsx("div",{className:t.tagList,children:(we=(Le=i.troubleshooting)==null?void 0:Le.commonIssues)==null?void 0:we.slice(0,2).map((n,c)=>e.jsx("span",{className:t.tag,children:n},c))})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Runbook URLs:"}),e.jsx("div",{className:t.linkList,children:(Me=(Te=i.troubleshooting)==null?void 0:Te.runbookUrls)==null?void 0:Me.map((n,c)=>e.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:t.link,children:["Runbook ",c+1]},c))})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Health Check Endpoints:"}),e.jsx("div",{className:t.linkList,children:($e=(Ae=i.troubleshooting)==null?void 0:Ae.healthCheckEndpoints)==null?void 0:$e.map((n,c)=>e.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:t.link,children:["Health Check ",c+1]},c))})]}),e.jsxs("div",{className:t.detailItem,children:[e.jsx("span",{className:t.detailLabel,children:"Sample Log Queries:"}),e.jsx("div",{className:t.codeSnippets,children:(ze=(Pe=i.troubleshooting)==null?void 0:Pe.logQuerySamples)==null?void 0:ze.map((n,c)=>e.jsx("code",{className:t.codeSnippet,children:n},c))})]})]})]})]}),(i.hasErrors||i.status==="failed"||i.status==="warning")&&e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"#1a1a1a",borderRadius:"8px",border:"1px solid #ef4444"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(U,{size:16,style:{color:"#ef4444"}}),e.jsx("span",{style:{fontWeight:"600",color:"#ef4444"},children:i.errorCount?`${i.errorCount} Active Errors`:"System Issues Detected"})]}),((De=i.pipelineData)==null?void 0:De.currentError)&&e.jsxs("p",{style:{fontSize:"0.85rem",color:"#cccccc",margin:"0 0 0.75rem 0"},children:[i.pipelineData.currentError.errorMessage.slice(0,100),"..."]}),e.jsxs("button",{onClick:()=>{k(!0),l(!1)},style:{background:"#ef4444",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(U,{size:14}),"View Error Details"]})]}),e.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.8rem",color:"#888",textAlign:"center"},children:["Last updated: ",new Date(i.lastUpdate).toLocaleString()]})]})]})]}),I&&i&&i.pipelineData&&e.jsx(Ke,{isOpen:I,onClose:()=>k(!1),pipelineName:i.name,currentError:i.pipelineData.currentError,errorHistory:i.pipelineData.errorHistory||[],logReferences:i.pipelineData.logs||[],metricsHistory:i.pipelineData.metrics||[],impactAnalysis:i.pipelineData.impact,runbooks:i.pipelineData.runbooks||[],oncallTeam:((Ee=i.operationalInfo)==null?void 0:Ee.owner)||"MSTIC Data Engineering Team",slackChannel:"#mstic-incidents",teamsChannel:"MSTIC Operations",operationalData:{slaMetrics:i.slaMetrics,operationalInfo:i.operationalInfo,performanceMetrics:i.performanceMetrics,troubleshooting:i.troubleshooting,contactInfo:{primaryTeam:((Be=i.operationalInfo)==null?void 0:Be.owner)||"MSTIC Data Engineering Team",secondaryTeam:"MSTIC Platform Team",escalationContacts:[{name:"On-call Engineer",role:"Level 1 Support",email:"mstic-oncall@microsoft.com",phone:"+1-425-882-8080",slackHandle:"@mstic-oncall"},{name:"Senior Engineer",role:"Level 2 Support",email:"mstic-senior@microsoft.com",phone:"+1-425-882-8081",slackHandle:"@mstic-senior"},{name:"Engineering Manager",role:"Level 3 Escalation",email:"mstic-manager@microsoft.com",phone:"+1-425-882-8082",slackHandle:"@mstic-manager"}]},technology:{stack:i.technology,resourceGroup:i.resourceGroup,subscriptionId:i.subscriptionId,region:i.region}}}),e.jsxs("div",{className:t.summaryGrid,children:[e.jsxs("div",{className:t.summaryCard,children:[e.jsx("div",{className:t.summaryIcon,children:e.jsx(qe,{size:24})}),e.jsxs("div",{className:t.summaryContent,children:[e.jsx("div",{className:t.summaryValue,children:h.filter(n=>n.type==="source").length}),e.jsx("div",{className:t.summaryLabel,children:"Data Sources"})]})]}),e.jsxs("div",{className:t.summaryCard,children:[e.jsx("div",{className:t.summaryIcon,children:e.jsx(We,{size:24})}),e.jsxs("div",{className:t.summaryContent,children:[e.jsx("div",{className:t.summaryValue,children:h.filter(n=>["ingestion","transformation","enrichment"].includes(n.type)).length}),e.jsx("div",{className:t.summaryLabel,children:"Processing Pipelines"})]})]}),e.jsxs("div",{className:t.summaryCard,children:[e.jsx("div",{className:t.summaryIcon,children:e.jsx(Ue,{size:24})}),e.jsxs("div",{className:t.summaryContent,children:[e.jsx("div",{className:t.summaryValue,children:O.length}),e.jsx("div",{className:t.summaryLabel,children:"Data Flows"})]})]}),e.jsxs("div",{className:t.summaryCard,children:[e.jsx("div",{className:t.summaryIcon,children:e.jsx(Fe,{size:24})}),e.jsxs("div",{className:t.summaryContent,children:[e.jsx("div",{className:t.summaryValue,children:h.filter(n=>n.type==="destination").length}),e.jsx("div",{className:t.summaryLabel,children:"Destinations"})]})]})]})]}),I&&i&&i.pipelineData&&e.jsx(Ke,{isOpen:I,onClose:()=>k(!1),pipelineName:i.pipelineData.name,currentError:i.pipelineData.currentError,errorHistory:i.pipelineData.errorHistory||[],logReferences:i.pipelineData.logReferences||[],metricsHistory:i.pipelineData.metricsHistory||[],impactAnalysis:i.pipelineData.impactAnalysis,runbooks:i.pipelineData.runbooks||[],oncallTeam:i.pipelineData.oncallTeam||"MSTIC Data Engineering",slackChannel:i.pipelineData.slackChannel,teamsChannel:i.pipelineData.teamsChannel,dashboardUrl:i.pipelineData.dashboardUrl,grafanaUrl:i.pipelineData.grafanaUrl,healthCheckUrl:i.pipelineData.healthCheckUrl,operationalData:{slaMetrics:i.slaMetrics,operationalInfo:i.operationalInfo,performanceMetrics:i.performanceMetrics,troubleshooting:i.troubleshooting,technology:{stack:i.technology,resourceGroup:i.resourceGroup,region:i.region,subscriptionId:i.subscriptionId},contactInfo:{primaryTeam:((He=i.operationalInfo)==null?void 0:He.owner)||"MSTIC Data Engineering",escalationContacts:((Re=(Ge=i.operationalInfo)==null?void 0:Ge.escalationPath)==null?void 0:Re.map((n,c)=>({name:`${n} Contact`,role:n,email:`${n.toLowerCase().replace(/\s+/g,".")}@microsoft.com`,phone:c===0?"+1-555-0123":void 0,slackHandle:`@${n.toLowerCase().replace(/\s+/g,"")}`})))||[]}}}),e.jsx(xs,{isOpen:K,onClose:()=>$(!1),section:"dataLineage"})]})});Wi.displayName="DataLineage";export{Wi as default};
//# sourceMappingURL=DataLineage-DeZK3kRx.js.map
